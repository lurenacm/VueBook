<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title>Editing TouchDevelop Scripts</title><link href="springer_epub.css" type="text/css" rel="styleSheet"/></head><body><div class="ChapterContextInformation"><div class="ContextInformation" id="Chap12"><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">R. Nigel Horspool</span> and </span><span class="Author"><span class="AuthorName">Nikolai Tillmann</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" xml:lang="en">TouchDevelop: Programming on the Go</span><span class="BookEdition">Third Edition</span></span><span class="ChapterDOI">10.1007/978-1-4302-6137-7_12</span><span class="ChapterCopyright">© R. Nigel Horspool 2013</span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" xml:lang="en">Editing TouchDevelop Scripts</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">R. Nigel Horspool</span><sup>1 <span class="ContactIcon"/></sup> and </span><span class="Author"><span class="AuthorName">Nikolai Tillmann</span><sup>2 <span class="ContactIcon"/></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff1"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">Canada, USA</div></div><div class="Affiliation" id="Aff2"><span class="AffiliationNumber">(2)</span><div class="AffiliationText">TU Berlin, Germany</div></div><div class="ClearBoth"> </div></div></div><div class="ArticleOrChapterToc"><div class="TocLine"><a href="#Sec1">A.1 The starting point</a></div><div class="TocLine"><a href="#Sec2">A.2 The editing steps</a></div><div class="TocLine"><a href="#Sec10">A.3 Additional steps</a></div><div class="TocLine"><a href="#Sec14">A.4 More advanced editing features</a></div></div><div class="Abstract" id="Abs1" xml:lang="en"><div class="Heading">Abstract</div><div class="Para">This appendix provides a worked example of creating a TouchDevelop script using an editor which runs inside your browser. It cannot cover all the editor’s features. Some experimentation is suggested for gaining familiarity with the editor. The script to be entered is shown in Figure A-1. It is published under the name rotor with code name <span class="EmphasisFontCategoryNonProportional">/gtbd</span>.</div></div><!--End Abstract--><div class="Fulltext"><div class="Para">This appendix provides a worked example of creating a TouchDevelop script using an editor which runs inside your browser. It cannot cover all the editor’s features. Some experimentation is suggested for gaining familiarity with the editor. The script to be entered is shown in Figure <span class="InternalRef"><a href="#Fig1">A-1</a></span>. It is published under the name rotor with code name <span class="EmphasisFontCategoryNonProportional">/gtbd</span>.
<div class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img src="A978-1-4302-6137-7_12_Fig1_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig1_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-1</span><div class="SimplePara">The rotor program /gtbd</div></div></div></div>
        </div><div id="Sec1" class="Section1 RenderAsSection1"><h2 class="Heading">A.1 The starting point</h2><div class="Para">Once you have signed into the TouchDevelop website, your current webpage is a page with the URL <span class="ExternalRef"><a href="https://www.touchdevelop.com/app/"><span class="RefSource">
                <span class="EmphasisFontCategoryNonProportional">https://www.touchdevelop.com/app/</span>
              </span></a></span>
            <span class="EmphasisFontCategoryNonProportional">#</span>. This webpage is known as <span class="EmphasisTypeItalic">the hub</span>.</div><div class="Para">In the top left of the hub, there should be a collection of tiles under the heading <span class="EmphasisTypeItalic">my scripts</span>. If you have previously created or downloaded some scripts, there will be tiles for the more recent ones. If you wish to edit one of these scripts, just tap its tile and then tap the large orange tile labeled <span class="EmphasisTypeItalic">edit</span>. If you don’t see a tile for your previously created or downloaded script, tap the tile labeled <span class="EmphasisTypeItalic">See More</span> and the browser will display a webpage which contains tiles for many more scripts, plus a button at the end of the list which reads <span class="EmphasisTypeItalic">load more</span>. Tapping that button performs as advertised, extending the list with more tiles plus a new <span class="EmphasisTypeItalic">load more</span> button at the end.</div><div class="Para">For our example, we are creating a completely new script so we tap the tile labeled <span class="EmphasisTypeItalic">Create Script</span>. This causes the browser to display a scrollable list of script templates. The top portion of the list is shown in Figure <span class="InternalRef"><a href="#Fig2">A-2</a></span>. We should look through the list to see if there is a template for the kind of script we wish to create. For our example, we tap the template named <span class="EmphasisTypeItalic">blank</span> because none of the other templates seems to be appropriate.</div><div class="Para">The browser now displays a textbox into which we should enter a name for the new script. A default name reading something like ‘my script 5’ has been provided in the textbox, but we will change it to read ‘rotor’. Having entered that text, we tap the button labeled <span class="EmphasisTypeItalic">create</span>.</div><div class="Para">The browser now displays the webpage for the TouchDevelop script editor. As seen in the screenshot shown in Figure <span class="InternalRef"><a href="#Fig3">A-3</a></span>, the webpage is divided into three columns.
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">A narrow left column contains buttons labeled <span class="EmphasisTypeItalic">my scripts</span>, <span class="EmphasisTypeItalic">run</span> and <span class="EmphasisTypeItalic">undo</span>. That undo button is very useful because it undoes the effect of any editing action performed by mistake.</div></li><li><div class="Para">A wider second column has a tile for the new script itself, tapping that tile brings up a script properties page where the name of the script can be changed, along with many other properties which are not needed until the script is finished.</div></li></ul></div>
          </div><div class="Para">There are several headings below the initial tile, one for each possible section of a script. Underneath heading, there would be a tile for every action, every page, every event … which has been added to the script. At this point, there is only a tile for an action named <span class="EmphasisTypeItalic">main</span>.
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">The remainder of the browser window is devoted to the third column which is the editing window. When we start, that window holds the code for the <span class="EmphasisTypeItalic">main</span> action. A minimal version of the action which does nothing has been provided in the template.</div></li></ul></div>
            <div class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img src="A978-1-4302-6137-7_12_Fig2_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig2_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-2</span><div class="SimplePara">The first few script templates</div></div></div></div>
            <div class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img src="A978-1-4302-6137-7_12_Fig3_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig3_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-3</span><div class="SimplePara">The editor webpage</div></div></div></div>
          </div></div><div id="Sec2" class="Section1 RenderAsSection1"><h2 class="Heading">A.2 The editing steps</h2><div class="Para">The screen contents change many times as the editing steps detailed below are followed. For space reasons, only a selection of the screenshots can be included in this appendix.</div><div id="Sec3" class="Section2 RenderAsSection2"><h3 class="Heading">Getting started – providing an input parameter</h3><div class="Para">The script for the main action will modified to have a parameter. Its code will then be as follows.</div><div class="Para ParaTypeProgramcode">     <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">action</span></span>
              <span class="EmphasisFontCategoryNonProportional">main( speed : Number )</span>
            </div><div class="Para ParaTypeProgramcode">     <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">do</span></span>
            </div><div class="Para ParaTypeProgramcode">     <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">// do nothing</span></span>
            </div><div class="Para">
              <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">If the code for the main action is not displayed, tap on the tile for the main action underneath the code heading in the second column of the main editor webpage (as in Figure <span class="InternalRef"><a href="#Fig3">A-3</a></span>).</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Our script needs an input parameter for its main action, so tap anywhere on the first line of the code for main – on the line which reads “<span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">action</span></span>
                      <span class="EmphasisFontCategoryNonProportional">main()”.</span> That changes the second column of the webpage.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">In the second column, there is a large gray plus symbol and the words “add input parameter”. Tap that plus symbol. The code for main shown in the third hand column instantly changes to show an input parameter named p with type <span class="EmphasisFontCategoryNonProportional">Number</span>.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><div class="Para">We do not want to keep the name <span class="EmphasisFontCategoryNonProportional">p</span> for that parameter, so tap anywhere in the line of code where <span class="EmphasisFontCategoryNonProportional">p: Number</span> appears. The webpage changes so that the second column displays details of parameter p and the third column indicates which part of the script we are focused on.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><div class="Para">In the second column, the parameter’s name p appears in a textbox whose contents can be edited. Select that name p using the mouse or a finger on a touchscreen, and enter the replacement name: speed. (The editor guessed the correct type for the parameter, so it does not need to be changed. If we had wanted a different type, tapping the tile for the Number type would allow us to select an alternative.) Tap anywhere in the third column, and the code is redisplayed showing the new parameter name.</div></div><div class="ClearBoth"> </div></div></div>
            </div></div><div id="Sec5" class="Section2 RenderAsSection2"><h3 class="Heading">Adding the first statement to the action</h3><div class="Para">The first statement to be inserted is <span class="EmphasisFontCategoryNonProportional">◳rate := speed</span>
              <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Tap anywhere in the comment which reads <span class="EmphasisTypeItalic">do nothing</span>. This causes the comment to disappear and be replaced with a vertical bar which indicates the insertion point for subsequent editing actions. More importantly, two keypads appear side-by-side at the bottom of the browser window. The two keypads are shown in Figure <span class="InternalRef"><a href="#Fig4">A-4</a></span> and Figure <span class="InternalRef"><a href="#Fig5">A-5</a></span>. The left keypad is used for entering or editing constants (numbers, strings and Booleans). The right keypad is used for entering statements and expressions.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">The top row of the right-hand keypad shows different kinds of statements. We wish to insert an assignment to a new variable, so tap on the tile labeled <span class="EmphasisTypeItalic">var</span>. The code changes to show an assignment to a new variable named x where the right-hand side is empty. The red bar is on the right side, indicating where the editor will insert new items. See Figure <span class="InternalRef"><a href="#Fig6">A-6</a></span>. The right keypad at the bottom of the window also changed; it now shows only items which can appear at the current insertion point in the code.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">One of the tiles in the keypad is labeled <span class="EmphasisTypeItalic">speed</span>. Tap that tile. The identifier speed gets inserted into right side of the assignment.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><div class="Para">The right side is complete, but the left side is not the variable we wanted. Select the left side of the assignment. This causes the insertion bar to appear just to the right of the name x. In addition, the right keypad at the bottom of the screen has changed again. There is a tile labeled rename. Tap it.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><div class="Para">Enter the desired name <span class="EmphasisTypeItalic">rate</span> on the keyboard. And then tap anywhere below on the screen. The code for the action is redisplayed showing the statement as <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">var</span></span>
                      <span class="EmphasisFontCategoryNonProportional">rate := speed</span>.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">6.</span><div class="ItemContent"><div class="Para">We did not want rate to be a local variable, so tap anywhere in that statement and then tap the left hand side. The insertion bar appears alongside the name rate and the right keypad re-appears.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">7.</span><div class="ItemContent"><div class="Para">Tap the tile labeled promote to <span class="EmphasisFontCategoryNonProportional">▯data</span>. This causes the code to be redisplayed, with the assignment now reading <span class="EmphasisFontCategoryNonProportional">◳rate := speed</span>. The second column in the window has also changed; a global variable named rate has appeared in the data section of the script.</div></div><div class="ClearBoth"> </div></div></div>
              <div class="Figure" id="Fig4"><div class="MediaObject" id="MO4"><img src="A978-1-4302-6137-7_12_Fig4_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig4_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-4</span><div class="SimplePara">The left keypad</div></div></div></div>
              <div class="Figure" id="Fig5"><div class="MediaObject" id="MO5"><img src="A978-1-4302-6137-7_12_Fig5_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig5_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-5</span><div class="SimplePara">The right keypad</div></div></div></div>
            </div></div><div id="Sec6" class="Section2 RenderAsSection2"><h3 class="Heading">Adding the second and third statements</h3><div class="Para">The two statements to be inserted are as follows.</div><div class="Para ParaTypeProgramcode">      <span class="EmphasisFontCategoryNonProportional">◳bd := media→ create board(480)</span>
            </div><div class="Para ParaTypeProgramcode">      <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">var</span></span>
              <span class="EmphasisFontCategoryNonProportional">sprite := ◳bd → create rectangle(360,60)</span>
            </div><div class="Para">
              <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Tap on the right side of the previously inserted assignment statement; this causes the insertion marker to appear after the identifier speed. Now hit the enter (or return) key. An empty line with the insertion marker at the left end appears.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Tap the <span class="EmphasisTypeItalic">var</span> tile in the keypad to begin a new assignment statement to a new variable,</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">Tap the tile labeled <span class="EmphasisTypeItalic">media</span>. There is one tile for each service or resource in the API. If you do not see the service you need, you can tap the special tile labeled “there’s more”. (It can be seen in Figure <span class="InternalRef"><a href="#Fig5">A-5</a></span>.)</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><div class="Para">When the <span class="EmphasisTypeItalic">media</span> tile was tapped, the identifier <span class="EmphasisFontCategoryNonProportional">media</span> appeared in the code for the statement and the keypad changed. The tiles in the keypad are now labeled with all the methods provided by the <span class="EmphasisTypeItalic">media</span> service. Tap the <span class="EmphasisTypeItalic">create board</span> tile.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><div class="Para">A call to the create board method with a default parameter of 640 has appeared in the code. The editor insertion point is shown just to the right of the 640 value. Tap the backspace tile in the keypad three times to erase the three character ‘0’ ‘4’ ‘6’ in that order. Now tap the tiles labeled ‘4’ ‘8’ ‘0’ on the left keypad to enter the new number 480.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">6.</span><div class="ItemContent"><div class="Para">Change the name of the variable on the left of the assignment to bd and promote it to be a global variable, by following the same steps as given above for the variable rate.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">7.</span><div class="ItemContent"><div class="Para">Insert a new empty line below the last statement. The easy way to do that is to tap the <span class="EmphasisTypeItalic">add below</span> button, as seen in Figure <span class="InternalRef"><a href="#Fig6">A-6</a></span>. It is the plus symbol beneath the current statement. (Alternatively, move the insertion point to the right end of the statement and hit the enter key on the keyboard.)</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">8.</span><div class="ItemContent"><div class="Para">Following the same techniques as before, insert the statement</div></div><div class="ClearBoth"> </div></div></div>
            </div><div class="Para ParaTypeProgramcode">      <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">var</span></span>
              <span class="EmphasisFontCategoryNonProportional">sprite := ◳bd → create rectangle(360,60)</span>
            </div><div class="Para">(To insert the global variable <span class="EmphasisFontCategoryNonProportional">◳bd</span> into the right side, look for the key labeled <span class="EmphasisFontCategoryNonProportional">◳data</span> on the keypad; after tapping that, there will be a key labeled <span class="EmphasisFontCategoryNonProportional">bd</span>, one for each global variable defined so far, and this should be tapped.)
<div class="Figure" id="Fig6"><div class="MediaObject" id="MO6"><img src="A978-1-4302-6137-7_12_Fig6_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig6_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-6</span><div class="SimplePara">Add above and add below buttons</div></div></div></div>
            </div></div><div id="Sec7" class="Section2 RenderAsSection2"><h3 class="Heading">Inserting the if statement</h3><div class="Para">The statements to be inserted are the following:</div><div class="Para ParaTypeProgramcode">      <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">if</span></span>
              <span class="EmphasisFontCategoryNonProportional">speed &gt; 10</span>
              <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">then</span></span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">sprite → set color(colors → red)</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">else</span>
            </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">sprite → set color(colors → blue)</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">◳bd</span> → <span class="EmphasisFontCategoryNonProportional">post to wall</span>
            </div><div class="Para">
              <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Tap in the last statement entered and tap the <span class="EmphasisTypeItalic">add below</span> button. Then tap the tile in the top row of the right keypad which is labeled <span class="EmphasisTypeItalic">if</span>. An empty if-then-else statement is inserted into the script.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">With the current insertion point at the place where the conditional expression should go, tap the key labeled speed in the right keypad. then tap the key labeled <span class="EmphasisFontCategoryNonProportional">&gt;</span> and finally tap the key labeled 0 in the left keypad.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">Tap on the <span class="EmphasisTypeItalic">do nothing</span> comment in the <span class="EmphasisTypeItalic">then</span> clause of the <span class="EmphasisTypeBold">if</span> statement and insert the initial version of the next statement by tapping keys labeled <span class="EmphasisTypeItalic">sprite</span> and <span class="EmphasisTypeItalic">set color</span>.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><div class="Para">The new statement has <span class="EmphasisFontCategoryNonProportional">colors→random</span> as the argument of <span class="EmphasisFontCategoryNonProportional">set color</span>. Tap on the name random to select it. Then tap the tile labeled <span class="EmphasisTypeItalic">backspace</span> in the right keypad to delete the →random part. Finally tap the tile labeled <span class="EmphasisTypeItalic">red</span> in the right keypad.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><div class="Para">Select the <span class="EmphasisTypeBold">else</span> keyword as the insertion point and similarly insert the statement <span class="EmphasisFontCategoryNonProportional">sprite → set color(colors → blue).</span>
                    </div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">6.</span><div class="ItemContent"><div class="Para">Tap on the keyword <span class="EmphasisTypeBold">if</span> so that the whole <span class="EmphasisTypeBold">if</span> statement is enclosed within <span class="EmphasisTypeItalic">add above</span> and <span class="EmphasisTypeItalic">add below</span> buttons. Tap add below and the insertion point becomes a new line below the <span class="EmphasisTypeBold">if</span> statement. Insert the final line <span class="EmphasisFontCategoryNonProportional">◳bd→post</span> to wall using steps similar to those previously described.</div></div><div class="ClearBoth"> </div></div></div>
            </div></div><div id="Sec8" class="Section2 RenderAsSection2"><h3 class="Heading">Defining the Gameloop Event</h3><div class="Para">The final steps provide the code for the gameloop event. The code will read as follows.</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">event gameloop( )</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">var sprite := ◳bd → at(0)</span>
            </div><div class="Para ParaTypeProgramcode">          <span class="EmphasisFontCategoryNonProportional">var x := sprite → angle + ◳rate</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">sprite → set angle(x)</span>
            </div><div class="Para ParaTypeProgramcode">          <span class="EmphasisFontCategoryNonProportional">◳bd → update on wall</span>
            </div><div class="Para">
              <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">If necessary, tap anywhere in the window away from the recently entered code, so that the second column is displaying the different components of the script. There should be a heading which reads <span class="EmphasisTypeItalic">events</span>. Tap the plus symbol below that heading.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">A scrollable list of different kinds of events should be showing on the screen. Tap on the item labeled <span class="EmphasisFontCategoryNonProportional">gameloop().</span> This new event will appear as one of the script’s components in the second column, and the code for a <span class="EmphasisTypeItalic">gameloop</span> event will appear in the third column.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">Using the same kinds of steps as previously covered, the four statements to handle the event can be inserted.</div></div><div class="ClearBoth"> </div></div></div>
            </div></div><div id="Sec9" class="Section2 RenderAsSection2"><h3 class="Heading">Trying out the script</h3><div class="Para">At this point, we should test the script.
<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">The left column on the screen has a button labeled <span class="EmphasisTypeItalic">run</span>. Tap this button to start the script running. Since the script requires an input parameter, a dialog box appears on the screen. Enter a number such as 10 into the text entry field and tap the OK button.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">The display from the running script is like that in Figure <span class="InternalRef"><a href="#Fig7">A-7</a></span>. To suspend the script, tap the <span class="EmphasisTypeItalic">stop</span> button in the top right corner of the browser’s window. To resume running the script, tap the button in the same spot as before (it has changed to be a <span class="EmphasisTypeItalic">run</span> button).</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">To exit from the script’s execution, tap the button in the top left corner which is labeled with a left arrow. That will return to the editor.</div></div><div class="ClearBoth"> </div></div></div>
              <div class="Figure" id="Fig7"><div class="MediaObject" id="MO7"><img src="A978-1-4302-6137-7_12_Fig7_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig7_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-7</span><div class="SimplePara">The running script</div></div></div></div>
            </div></div></div><div id="Sec10" class="Section1 RenderAsSection1"><h2 class="Heading">A.3 Additional steps</h2><div id="Sec11" class="Section2 RenderAsSection2"><h3 class="Heading">Revising the script</h3><div class="Para">If the script does not behave as expected or needs improvement, it is easy to go back and edit the code. On the screen where the script components are listed, just tap the name of the action or the name of the event to display its code in the third column of the editor’s window.</div></div><div id="Sec13" class="Section2 RenderAsSection2"><h3 class="Heading">Publishing the script</h3><div class="Para">If the code is something that is worth sharing with others, or simply to save it to the cloud, the script can be published. Just tap the upward pointing arrow, labeled <span class="EmphasisTypeItalic">publish</span> underneath, which appears to the right of the tile for the script’s properties in the second column.</div><div class="Para">After tapping the publish button, the screen should display a message with buttons underneath. One button is labeled <span class="EmphasisTypeItalic">publish</span> and the other <span class="EmphasisTypeItalic">publish as hidden</span>. The two buttons provide a choice of making the script visible or making it hidden.</div><div class="Para">If it is marked as visible, then anyone searching the TouchDevelop website for an example of a particular language feature or script feature may be directed to this script. It can also appear in lists of new scripts, or featured scripts. If it is marked as hidden, then it will not show up in such searches (but anyone knowing the codename for the script can still access it).</div></div></div><div id="Sec14" class="Section1 RenderAsSection1"><h2 class="Heading">A.4 More advanced editing features</h2><div id="Sec15" class="Section2 RenderAsSection2"><h3 class="Heading">A.4.1 Refactoring code into a new action</h3><div class="Para">Removing a sequence of statements and making a new action from them is known as refactoring. The TouchDevelop editor makes this process easy. To demonstrate, the steps for refactoring a few statements from the <span class="EmphasisTypeItalic">main</span> action in the <span class="EmphasisTypeItalic">rotor</span> script are given below.
<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Select the first line in the sequence. The statement which assigns to the variable sprite in the <span class="EmphasisTypeItalic">main</span> action is shown as selected in Figure <span class="InternalRef"><a href="#Fig8">A-8</a></span>
                    </div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Tap the button labeled mark which appears to the right of the window. The code listing display changes to be like that seen in Figure <span class="InternalRef"><a href="#Fig9">A-9</a></span>. The extent of the lines of code to be refactored is shown by the two thick red lines.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">Now drag the bottom red line downwards until it is immediately below the last statement to be transferred to the refactored action. The screen should be showing a selected group of lines similar to that shown in Figure <span class="InternalRef"><a href="#Fig10">A-10</a></span>.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><div class="Para">In the second column displayed in the browser window, there are several headings and several buttons. Underneath the heading which reads “extract selection into action”, enter a suitable name for the new action into the textbox, replacing the default name of <span class="EmphasisTypeItalic">do stuff</span>. Figure <span class="InternalRef"><a href="#Fig11">A-11</a></span> shows that textbox after entering the new name <span class="EmphasisTypeItalic">update sprite</span>.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><div class="Para">Now tap that extract button and the new action is created. The refactored action is provided with whichever parameters are needed to allow it to work correctly. A statement is inserted into the main action, replacing the refactored code.</div></div><div class="ClearBoth"> </div></div></div>
            </div><div class="Para">It should be observed that the marked group of statements could have been selected by first marking the last line and then moving the top horizontal red line upwards. Or any line in the group can be marked and both end point lines adjusted.
<div class="Figure" id="Fig8"><div class="MediaObject" id="MO8"><img src="A978-1-4302-6137-7_12_Fig8_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig8_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-8</span><div class="SimplePara">Selecting the first line</div></div></div></div>
              <div class="Figure" id="Fig9"><div class="MediaObject" id="MO9"><img src="A978-1-4302-6137-7_12_Fig9_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig9_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-9</span><div class="SimplePara">Marking the first line to extract</div></div></div></div>
              <div class="Figure" id="Fig10"><div class="MediaObject" id="MO10"><img src="A978-1-4302-6137-7_12_Fig10_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig10_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-10</span><div class="SimplePara">Marking the last line to extract</div></div></div></div>
            </div><div class="Para">
              <div class="Figure" id="Fig11"><div class="MediaObject" id="MO11"><img src="A978-1-4302-6137-7_12_Fig11_HTML.jpg" alt="A978-1-4302-6137-7_12_Fig11_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure A-11</span><div class="SimplePara">Naming the extracted code</div></div></div></div>
            </div></div><div id="Sec16" class="Section2 RenderAsSection2"><h3 class="Heading">A.4.2 Copying and pasting code</h3><div class="Para">If a range of lines of code has been marked, following steps similar to those given above, those lines can be cut and temporarily held on the editor’s clipboard.</div><div class="Para">Next another place in the code of any action or event can be selected. A button labeled <span class="EmphasisTypeItalic">paste</span> appears on the right hand side. Tap that button to insert the cut code next to the selected line.</div><div class="Para">The pasted code appears above or below the selected line and which of the two places is chosen depends on various factors. To force the correct placement, always begin by inserting an empty line at the desired place for the pasted code. Then the <span class="EmphasisTypeItalic">paste</span> button causes the pasted code to replace that empty line.</div></div><div id="Sec17" class="Section2 RenderAsSection2"><h3 class="Heading">A.4.3 Surrounding code in a higher-level construct</h3><div class="Para">Sometimes some complicated editing actions are needed. For example, an existing group of statements might need to become the <span class="EmphasisTypeBold">then</span> clause of a new <span class="EmphasisTypeBold">if</span> statement. That group of lines simply needs be marked using the same steps as previously described.</div><div class="Para">In the second column of the editor’s window, there is a heading which reads “surround with” and underneath there are buttons labeled <span class="EmphasisTypeItalic">if, for each, for, while</span> and <span class="EmphasisTypeItalic">boxed</span>. Each one of these buttons performs exactly as advertised.</div></div></div></div></body></html>
