<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title>The Wall – using the screen</title><link href="springer_epub.css" type="text/css" rel="styleSheet"/></head><body><div class="ChapterContextInformation"><div class="ContextInformation" id="Chap3"><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">R. Nigel Horspool</span> and </span><span class="Author"><span class="AuthorName">Nikolai Tillmann</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" xml:lang="en">TouchDevelop: Programming on the Go</span><span class="BookEdition">Third Edition</span></span><span class="ChapterDOI">10.1007/978-1-4302-6137-7_3</span><span class="ChapterCopyright">© R. Nigel Horspool 2013</span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" xml:lang="en">3. The Wall – using the screen</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">R. Nigel Horspool</span><sup>1 <span class="ContactIcon"/></sup> and </span><span class="Author"><span class="AuthorName">Nikolai Tillmann</span><sup>2 <span class="ContactIcon"/></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff1"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">Canada, USA</div></div><div class="Affiliation" id="Aff2"><span class="AffiliationNumber">(2)</span><div class="AffiliationText">TU Berlin, Germany</div></div><div class="ClearBoth"> </div></div></div><div class="ArticleOrChapterToc"><div class="TocLine"><a href="#Sec1">3.1 Output – the writing on the wall</a></div><div class="TocLine"><a href="#Sec8">3.2 Input of values from the touchscreen</a></div><div class="TocLine"><a href="#Sec9">3.3 Updating the wall’s content</a></div><div class="TocLine"><a href="#Sec12">3.4 Events on the touchscreen</a></div><div class="TocLine"><a href="#Sec15">3.5 Pushing and popping pages</a></div><div class="TocLine"><a href="#Sec16">3.6 Titles and subtitles</a></div><div class="TocLine"><a href="#Sec17">3.7 Wall buttons</a></div><div class="TocLine"><a href="#Sec18">3.8 On-demand creation of output</a></div></div><div class="Abstract" id="Abs1" xml:lang="en"><div class="Heading">Abstract</div><div class="Para">A TouchDevelop script usually needs to interact with the user. While input via a microphone and output via speakers built into, or connected to, the device are certainly possibilities, a touchscreen or a screen plus a mouse is almost always used for input and output. In TouchDevelop, the screen is known as the wall. The API provides many ways in which a script can access the wall.</div></div><!--End Abstract--><div class="Fulltext"><div class="Para">A TouchDevelop script usually needs to interact with the user. While input via a microphone and output via speakers built into, or connected to, the device are certainly possibilities, a touchscreen or a screen plus a mouse is almost always used for input and output. In TouchDevelop, the screen is known as the wall. The API provides many ways in which a script can access the wall.</div><div id="Sec1" class="Section1 RenderAsSection1"><h2 class="Heading">3.1 Output – the writing on the wall</h2><div id="Sec2" class="Section2 RenderAsSection2"><h3 class="Heading">3.1.1 Output of simple values</h3><div class="Para">Every datatype in TouchDevelop provides a method named post to wall. If that method is called, some representation of the value is displayed. Here are some simple examples.</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">action</span></span>
              <span class="EmphasisFontCategoryNonProportional">main()</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">(1/3) → post to wall</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">123 → post to wall</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">("hello" || " there") → post to wall</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">(11&gt;11) → post to wall</span>
            </div><div class="Para">The code produces a result like that shown in Figure <span class="InternalRef"><a href="#Fig1">3-1</a></span> on the left side. Note that the output is apparently displayed in reverse order. That is because the default is for each new output item to be inserted at the top of the screen, pushing previously generated output further down. The default is a good one if it is desired that the user can see the most recent item without having to scroll down.
<div class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img src="A978-1-4302-6137-7_3_Fig1_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig1_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-1</span><div class="SimplePara">Simple output, normal and reversed order</div></div></div></div>
            </div><div class="Para">To display a value in a manner which stands out prominently on the screen, a <span class="EmphasisFontCategoryNonProportional">TextBox</span> value can be used. The text can be displayed in any color, with any size font, against any background color. A simple example of using a <span class="EmphasisFontCategoryNonProportional">TextBox</span> to display a string is shown in Figure <span class="InternalRef"><a href="#Fig2">3-2</a></span>. The script is shown on the left and the result of running it is shown on the right.
<div class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img src="A978-1-4302-6137-7_3_Fig2_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig2_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-2</span><div class="SimplePara">Displaying a string using a TextBox</div></div></div></div>
            </div></div><div id="Sec3" class="Section2 RenderAsSection2"><h3 class="Heading">3.1.2 Direction of Output</h3><div class="Para">The default direction of output on the screen can be changed so that items are displayed from top-to-bottom. To do so, make the method call:</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">wall →set reversed(true)</span>
            </div><div class="Para">The following sample script should make the effect clear.</div><div class="Para ParaTypeProgramcode">         <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">action</span></span>
              <span class="EmphasisFontCategoryNonProportional">main()</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">(1/3)→post to wall</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">123→post to wall</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">wall →set reversed(true)</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">("hello" || " there") →post to wall</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">(11&gt;11) →post to wall</span>
            </div><div class="Para">The result of running the script is shown in Figure <span class="InternalRef"><a href="#Fig1">3-1</a></span> on the right side. Comparison of the two snapshots shows that the call affected all output on the screen – not just the output generated after the call was made.</div><div class="Para">In summary, the effect of making the call with an argument of <span class="EmphasisFontCategoryNonProportional">true</span> is to cause existing output on the screen to be reordered if necessary, so that the oldest output is at the top and the newest output is at the bottom. Future calls to</div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">post to wall</span>
            </div><div class="Para">cause the new output to be added at the bottom. Making the call</div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">wall →set reversed(false)</span>
            </div><div class="Para">reorders the output again so that the oldest output is at the bottom and the newest is at the top, then subsequent calls to <span class="EmphasisFontCategoryNonProportional">post to wall</span> will again cause output to be inserted at the top of the screen.</div></div><div id="Sec4" class="Section2 RenderAsSection2"><h3 class="Heading">3.1.3 Output of composite values</h3><div class="Para">Displaying a composite value such as one with the <span class="EmphasisFontCategoryNonProportional">DateTime</span> or <span class="EmphasisFontCategoryNonProportional">Vector3</span> type produces an appropriately formatted result. Displaying a collection of values produces a list of items on the screen, each element formatted in the appropriate manner for the element’s datatype.</div><div class="Para">Figure <span class="InternalRef"><a href="#Fig3">3-3</a></span> gives a few examples of composite values being displayed.
<div class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img src="A978-1-4302-6137-7_3_Fig3_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig3_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-3</span><div class="SimplePara">Displaying composite values</div></div></div></div>
            </div></div><div id="Sec5" class="Section2 RenderAsSection2"><h3 class="Heading">3.1.4 Output of media values</h3><div class="Para">Each media value is displayed on the screen in a manner appropriate for the datatype. In the case of a <span class="EmphasisFontCategoryNonProportional">Song</span> or a <span class="EmphasisFontCategoryNonProportional">Song Album</span> value, there is also a play button displayed. Tapping that play button causes the song or the song album to be played.</div><div class="Para">A summary of what is displayed for each datatype is given in Table <span class="InternalRef"><a href="#Tab1">3-1</a></span>.
<div id="Tab1" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 3-1</span><div class="SimplePara">Display of media values</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">
                          <span class="EmphasisTypeBold">Datatype</span>
                        </div></th><th align="left"><div class="SimplePara">
                          <span class="EmphasisTypeBold">What is displayed</span>
                        </div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Picture</span>
                        </div></td><td align="left"><div class="SimplePara">The picture, resized if necessary to fit the screen.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Board</span>
                        </div></td><td align="left"><div class="SimplePara">The board (note that the board can be changed and redisplayed dynamically).</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Song</span>
                        </div></td><td align="left"><div class="SimplePara">A play button plus whichever of these items is available: duration, artist, name of album from which the song was obtained, the album cover, track number.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Sound</span>
                        </div></td><td align="left"><div class="SimplePara">The text “A sound…” and a button to play the sound.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Picture Album</span>
                        </div></td><td align="left"><div class="SimplePara">A sequence of all pictures in the album.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Song Album</span>
                        </div></td><td align="left"><div class="SimplePara">A play button plus whichever of these items if available: total duration, artist, name of album, the album cover, number of tracks.</div></td></tr></tbody></table></div>
            </div></div><div id="Sec6" class="Section2 RenderAsSection2"><h3 class="Heading">3.1.5 Output of social values</h3><div class="Para">Each value managed by the social API is displayed in a manner appropriate for the datatype. The <span class="EmphasisFontCategoryNonProportional">Contact</span> and <span class="EmphasisFontCategoryNonProportional">Link</span> values include buttons which can be tapped to initiate a phone call or send a message.</div><div class="Para">A summary of what is displayed for each datatype is given in Table <span class="InternalRef"><a href="#Tab2">3-2</a></span>.
<div id="Tab2" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 3-2</span><div class="SimplePara">Display of social values</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">
                          <span class="EmphasisTypeBold">Datatype</span>
                        </div></th><th align="left"><div class="SimplePara">
                          <span class="EmphasisTypeBold">What is displayed</span>
                        </div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Appointment</span>
                        </div></td><td align="left"><div class="SimplePara">The date, time and details of the appointment.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Contact</span>
                        </div></td><td align="left"><div class="SimplePara">The name of the contact plus buttons which can be tapped to initiate a phone call or send a SMS message or send an email to this contact.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Link</span>
                        </div></td><td align="left"><div class="SimplePara">The name associated with the link plus a button to initiate a phone call, send a SMS message or send an email, depending on the kind of link.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Location</span>
                        </div></td><td align="left"><div class="SimplePara">A scrollable Bing map which shows the location.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Message</span>
                        </div></td><td align="left"><div class="SimplePara">The name of the sender, the time when the message was sent plus the contents of the message.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Place</span>
                        </div></td><td align="left"><div class="SimplePara">The name associated with the place plus a thumbnail map showing the location of the place.</div></td></tr></tbody></table></div>
            </div></div><div id="Sec7" class="Section2 RenderAsSection2"><h3 class="Heading">3.1.6 Output of web values</h3><div class="Para">There are several datatypes specifically associated with web access. Values of five of these types are displayed on the wall according to Table <span class="InternalRef"><a href="#Tab3">3-3</a></span>.
<div id="Tab3" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 3-3</span><div class="SimplePara">Display of web values</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">
                          <span class="EmphasisTypeBold">Datatype</span>
                        </div></th><th align="left"><div class="SimplePara">
                          <span class="EmphasisTypeBold">What is displayed</span>
                        </div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Form Builder</span>
                        </div></td><td align="left"><div class="SimplePara">The current contents of the form</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Json Object</span>
                        </div></td><td align="left"><div class="SimplePara">The string value of the JSON object.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Web Request</span>
                        </div></td><td align="left"><div class="SimplePara">Two lines which display the accepted webpage encodings followed by a line which contains the keyword GET followed by a URL.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Web Response</span>
                        </div></td><td align="left"><div class="SimplePara">The response</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">Xml Object</span>
                        </div></td><td align="left"><div class="SimplePara">The string value of the XML object</div></td></tr></tbody></table></div>
            </div></div></div><div id="Sec8" class="Section1 RenderAsSection1"><h2 class="Heading">3.2 Input of values from the touchscreen</h2><div class="Para">The wall API provides several methods which prompt the user to enter a value or pick a value from a range of possibilities. These methods are listed in Table <span class="InternalRef"><a href="#Tab4">3-4</a></span>. Some sample statements to illustrate their use are shown in Figure <span class="InternalRef"><a href="#Fig4">3-4</a></span>.
<div id="Tab4" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 3-4</span><div class="SimplePara">Prompting for input</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">
                        <span class="EmphasisTypeBold">Datatype</span>
                      </div></th><th align="left"><div class="SimplePara">
                        <span class="EmphasisTypeBold">Method</span>
                      </div></th><th align="left"><div class="SimplePara">
                        <span class="EmphasisTypeBold">Description</span>
                      </div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">Boolean</span>
                      </div></td><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">ask boolean</span>
                      </div></td><td align="left"><div class="SimplePara">An OK button and a Cancel button are displayed. Tapping OK returns true and tapping Cancel returns false</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">Number</span>
                      </div></td><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">ask number</span>
                      </div></td><td align="left"><div class="SimplePara">The user is prompted to enter a number, which is returned as the result</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">String</span>
                      </div></td><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">ask string</span>
                      </div></td><td align="left"><div class="SimplePara">The user is prompted to enter a string which is returned as the result</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">DateTime</span>
                      </div></td><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">pick date</span>
                      </div></td><td align="left"><div class="SimplePara">The user is prompted to pick a date; that date combined with a time of 12 noon is returned as the result</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">String</span>
                      </div></td><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">pick string</span>
                      </div></td><td align="left"><div class="SimplePara">A list of strings is displayed and the user is prompted to pick one; the index of the selected string is returned as the result</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">DateTime</span>
                      </div></td><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">pick time</span>
                      </div></td><td align="left"><div class="SimplePara">The user is prompted to pick a time of day; that time combined is with an undefined date and returned as the result</div></td></tr></tbody></table></div>
          </div></div><div id="Sec9" class="Section1 RenderAsSection1"><h2 class="Heading">3.3 Updating the wall’s content</h2><div class="Para">Each call of <span class="EmphasisFontCategoryNonProportional">post to wall</span> adds a new item on the screen. However it is frequently the case that we wish to leave the number of items unchanged and simply alter the value of one of them. The simplest, least sophisticated and least efficient way to achieve that effect would be to invoke</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">wall → clear</span>
          </div><div class="Para">and then re-display all the items with their new values.</div><div class="Para">However, TouchDevelop provides some alternatives which should be preferred.
<div class="Figure" id="Fig4"><div class="MediaObject" id="MO4"><img src="A978-1-4302-6137-7_3_Fig4_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig4_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-4</span><div class="SimplePara">Prompting for input</div></div></div></div>
          </div><div id="Sec10" class="Section2 RenderAsSection2"><h3 class="Heading">3.3.1 Updatable textbox</h3><div class="Para">For the display of text which needs to be changed while the script is executing, a textbox provides an easy-to-use mechanism. Figure <span class="InternalRef"><a href="#Fig5">3-5</a></span> shows a simple script which displays a line of text on the screen and then changes the text when the page button at the bottom is tapped.</div><div class="Para">The call to the <span class="EmphasisFontCategoryNonProportional">set text</span> method of the textbox causes the string displayed on the screen to be updated immediately. It is also possible to change the size of the text and the colors used in the textbox on the fly. Note that if the same textbox value has been posted to the wall more than once, then the <span class="EmphasisFontCategoryNonProportional">set text</span> method will cause all of those occurrences on the wall to be updated.
<div class="Figure" id="Fig5"><div class="MediaObject" id="MO5"><img src="A978-1-4302-6137-7_3_Fig5_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig5_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-5</span><div class="SimplePara">An updatable textbox (/censaair)</div></div></div></div>
            </div></div><div id="Sec11" class="Section2 RenderAsSection2"><h3 class="Heading">3.3.2 Updating a board display</h3><div class="Para">For updating more sophisticated displays of information on the screen, an instance of the <span class="EmphasisFontCategoryNonProportional">Board</span> datatype is normally used. Pictures, text messages and shapes can all be drawn on the board as sprites. Each sprite can have its position, orientation or content changed individually. Then a call to the <span class="EmphasisFontCategoryNonProportional">update on wall</span> method of the board causes a rendering of the board on the screen to be immediately updated. Although the main usage of the <span class="EmphasisFontCategoryNonProportional">Board</span> datatype was intended to be for implementing games, it is useful in any situation where information displayed on the screen needs to be changed.</div><div class="Para">A re-implementation of the previous example where a board is used instead is shown in Figure <span class="InternalRef"><a href="#Fig6">3-6</a></span>. The use of a board and sprites provides much greater flexibility because the positions and orientations of the items on the screen can also be updated.
<div class="Figure" id="Fig6"><div class="MediaObject" id="MO6"><img src="A978-1-4302-6137-7_3_Fig6_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig6_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-6</span><div class="SimplePara">Updating text using a board (/wkoxnasz)</div></div></div></div>
            </div></div></div><div id="Sec12" class="Section1 RenderAsSection1"><h2 class="Heading">3.4 Events on the touchscreen</h2><div id="Sec13" class="Section2 RenderAsSection2"><h3 class="Heading">3.4.1 Tap wall events</h3><div class="Para">A script can receive input via tap events on the screen. There is one event type for nearly every kind of value which can be displayed on the screen. A full list is provided in Table <span class="InternalRef"><a href="#Tab5">3-5</a></span>.</div><div class="Para">If one of these values is displayed on the screen, then tapping the value will cause the corresponding event to be executed. The tapped item is passed as a parameter to the event. The normal parameter passing rules are used, implying that a copy of the value is passed if the item is a value type and a reference to the value is passed if the item is a reference type. A trivial script which shows the use of tap events to select a string is shown in Figure <span class="InternalRef"><a href="#Fig7">3-7</a></span>.
<div class="Figure" id="Fig7"><div class="MediaObject" id="MO7"><img src="A978-1-4302-6137-7_3_Fig7_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig7_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-7</span><div class="SimplePara">Using tap wall events</div></div></div></div>
            </div></div><div id="Sec14" class="Section2 RenderAsSection2"><h3 class="Heading">3.4.2 Tap board events</h3><div class="Para">Although it is easy to display values on the screen and associate ‘tap wall’ events with them, there is very little control over where the values are positioned. To achieve full control over placement, it is necessary to display the values as sprites on an instance of the <span class="EmphasisFontCategoryNonProportional">Board</span> datatype. If the script displays the board with its sprites on the screen, then tapping or swiping or dragging one of the sprites will trigger an event that can be captured by the script.</div><div class="Para">A trivial script which brightens or darkens the color of a solid rectangle when buttons are tapped is shown in Figure <span class="InternalRef"><a href="#Fig8">3-8</a></span>.
<div id="Tab5" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 3-5</span><div class="SimplePara">Tap wall events</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">Event</div></th><th align="left"><div class="SimplePara">What happens</div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Appointment</span>
                        </div></td><td rowspan="18" align="left"><div class="SimplePara">Each event receives a single parameter. That parameter has the datatype named in the event.</div><div class="SimplePara">When any value of this type is tapped on the screen, the corresponding event is triggered. For value types, a copy of the value which was tapped is passed as the parameter. For reference types, a reference to the tapped value is passed as the parameter.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Camera</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Color</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Contact</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Link</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Message</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Motion</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Page Button</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Picture</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Picture Album</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Place</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Playlist</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Song</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Song Album</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Sound</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall String</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall TextBox</span>
                        </div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">tap wall Vector3</span>
                        </div></td></tr></tbody></table></div>
            </div><div class="Para">Simply defining a variable with a datatype of Board or Sprite or Sprite Set in the data section of the script causes new event types to be made available. In the case of the script shown in Figure <span class="InternalRef"><a href="#Fig7">3-7</a></span>, the data section contains three sprites named rectangle, Lighter and Darker, it contains controls which has type Sprite Set, and board which has type Board.</div><div class="Para">The existence of these globally visible data variables creates 14 events with these names:
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">tap sprite: rectangle, swipe sprite: rectangle, drag sprite: rectangle</div></li><li><div class="Para">tap sprite: Lighter, swipe sprite: Lighter, drag sprite: Lighter</div></li><li><div class="Para">tap sprite: Darker, swipe sprite: Darker, drag sprite: Darker</div></li><li><div class="Para">tap sprite in controls, swipe sprite in controls, drag sprite in controls</div></li><li><div class="Para">tap board: board, swipe board: board</div></li></ul></div>
              <div class="Figure" id="Fig8"><div class="MediaObject" id="MO8"><img src="A978-1-4302-6137-7_3_Fig8_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig8_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-8</span><div class="SimplePara">Using sprite events (/akmcnpux)</div></div></div></div>
            </div><div class="Para">For sprites, the event names have the pattern <span class="EmphasisFontCategoryNonProportional">tap/swipe/drag sprite: xxx</span> where <span class="EmphasisFontCategoryNonProportional">xxx</span> is the name of the sprite. For sprite sets, the names have the <span class="EmphasisFontCategoryNonProportional">pattern tap/swipe/drag sprite in YYY</span> where <span class="EmphasisFontCategoryNonProportional">YYY</span> is the name of the set. For boards, the names have the pattern <span class="EmphasisFontCategoryNonProportional">tap/swipe board: ZZZ</span> where <span class="EmphasisFontCategoryNonProportional">ZZZ</span> is the name of the board. Parameters passed to each event identify which sprite was touched (when it is a sprite set event), the coordinates of the sprite on the board, and the extent of a swiping or a dragging action.</div><div class="Para">Note that there are yet more events associated with the <span class="EmphasisFontCategoryNonProportional">Board</span> datatype which have not been listed here, including the possibility of tapping anywhere on the board (not just on a sprite) and obtaining the coordinates of where the screen was tapped.</div></div></div><div id="Sec15" class="Section1 RenderAsSection1"><h2 class="Heading">3.5 Pushing and popping pages</h2><div class="Para">Some scripts may need to display information temporarily and then have it disappear. Or, perhaps, there is a need to input some extra information from the user but it is undesirable to disrupt what has already been displayed on the screen. The solution, for situations like these, is to create a brand new wall on which information is displayed and input is requested, then have that wall disappear and have the original wall re-displayed.</div><div class="Para">The general facility takes the form of a stack of pages. Each page corresponds to an instance of the wall.</div><div class="Para">The following command creates a new empty wall.</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">wall</span> → <span class="EmphasisFontCategoryNonProportional">push new page</span>
          </div><div class="Para">The script can then proceed to display information or prompt for input on this new wall. Afterwards, the following command</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">wall → pop page</span>
          </div><div class="Para">will delete that new wall and revert to displaying the previous version.</div><div class="Para">Some additional methods associated with the wall API are <span class="EmphasisFontCategoryNonProportional">wall</span>→<span class="EmphasisFontCategoryNonProportional">pages</span> which returns the stack of pages as a collection, and <span class="EmphasisFontCategoryNonProportional">wall</span>→<span class="EmphasisFontCategoryNonProportional">current page</span> which gets the current page.</div></div><div id="Sec16" class="Section1 RenderAsSection1"><h2 class="Heading">3.6 Titles and subtitles</h2><div class="Para">The output from a script can be beautified by displaying a title at the top of the screen. If appropriate, a subtitle may be displayed too. A few lines of code which illustrate the features are as follows.</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">wall → set title(“The wall’s title”)</span>
          </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">wall → set subtitle(“The subtitle”)</span>
          </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">“First line of output” → post to wall</span>
          </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">“Second line of output” → post to wall</span>
          </div><div class="Para">The result of running this code appears in Figure <span class="InternalRef"><a href="#Fig9">3-9</a></span>. Note that the capitalization of the title and subtitle has been changed; they have both been converted to lowercase.
<div class="Figure" id="Fig9"><div class="MediaObject" id="MO9"><img src="A978-1-4302-6137-7_3_Fig9_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig9_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-9</span><div class="SimplePara">Title and subtitle example</div></div></div></div>
          </div></div><div id="Sec17" class="Section1 RenderAsSection1"><h2 class="Heading">3.7 Wall buttons</h2><div class="Para">Buttons in the form of simple icons may be displayed at the bottom of the screen. These are <span class="EmphasisTypeItalic">page buttons</span>. Tapping a button triggers an event which can be captured in the script. The icons are predefined and have names. The names are as follows.</div><div class="Para ParaTypeProgramcode">
            <span class="EmphasisFontCategoryNonProportional">"add", "back", "cancel", "check", "close", "delete", "download",</span>
          </div><div class="Para ParaTypeProgramcode">
            <span class="EmphasisFontCategoryNonProportional">"edit", "favs.addto", "favs", "feature.camera", "feature.email",</span>
          </div><div class="Para ParaTypeProgramcode">
            <span class="EmphasisFontCategoryNonProportional">"feature.search", "feature.settings", "feature.video", "folder",</span>
          </div><div class="Para ParaTypeProgramcode">
            <span class="EmphasisFontCategoryNonProportional">"minus", "new", "next", "questionmark", "refresh", "save",</span>
          </div><div class="Para ParaTypeProgramcode">
            <span class="EmphasisFontCategoryNonProportional">"share", "stop", "sync", "transport.ff", "transport.pause",</span>
          </div><div class="Para ParaTypeProgramcode">
            <span class="EmphasisFontCategoryNonProportional">"transport.play", "transport.rew", "upload"</span>
          </div><div class="Para">This list of names can be generated by executing the following statement.</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">wall → button icon names → post to wall</span>
          </div><div class="Para">A possible statement to generate a button is the following.</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">wall → add button( “questionmark”, “help?” )</span>
          </div><div class="Para">Executing that statement causes the bar at the bottom of the screen to contain a ‘question mark’ icon with the label “help?” as shown in Figure <span class="InternalRef"><a href="#Fig10">3-10</a></span>.
<div class="Figure" id="Fig10"><div class="MediaObject" id="MO10"><img src="A978-1-4302-6137-7_3_Fig10_HTML.jpg" alt="A978-1-4302-6137-7_3_Fig10_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-10</span><div class="SimplePara">The ‘Question Mark’ page button</div></div></div></div>
          </div><div class="Para">There is space for several page buttons at the bottom of the screen. Therefore the event triggered when a page button is tapped has a parameter which enables the button to be identified, that parameter being the string used as the label. The following code shows how an event can distinguish between different possibilities for the button.</div><div class="Para ParaTypeProgramcode">        <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">event</span></span>
            <span class="EmphasisFontCategoryNonProportional">tap wall Page Button(item: Page Button)</span>
          </div><div class="Para ParaTypeProgramcode">                <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">if</span></span>
            <span class="EmphasisFontCategoryNonProportional">(item → icon → equals(“help?”)</span>
            <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">then</span></span>
          </div><div class="Para ParaTypeProgramcode">                  <span class="EmphasisFontCategoryNonProportional">▷show help info</span>
          </div><div class="Para ParaTypeProgramcode">                <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">else</span></span>
          </div><div class="Para ParaTypeProgramcode">                  <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">if</span></span>
            <span class="EmphasisFontCategoryNonProportional">(item → icon → equals(“cancel”)</span>
            <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">then</span></span>
          </div><div class="Para ParaTypeProgramcode">                    <span class="EmphasisFontCategoryNonProportional">time → stop</span>
          </div><div class="Para ParaTypeProgramcode">                  <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">else</span></span>
          </div><div class="Para ParaTypeProgramcode">                    <span class="EmphasisFontCategoryNonProportional">// do nothing</span>
          </div><div class="Para">The methods provided for the <span class="EmphasisFontCategoryNonProportional">Page Button</span> datatype are listed in Table <span class="InternalRef"><a href="#Tab6">3-6</a></span>.
<div id="Tab6" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 3-6</span><div class="SimplePara">Methods of the Page Table datatype</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">Page Table Method</div></th><th align="left"><div class="SimplePara">Description</div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">equals(page button : Page Button) : Boolean</span>
                      </div></td><td align="left"><div class="SimplePara">Returns true if this button is the same button as the one passed as a parameter</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">icon : String</span>
                      </div></td><td align="left"><div class="SimplePara">Gets the name of the icon</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">page : Page</span>
                      </div></td><td align="left"><div class="SimplePara">Gets the page to which this button is attached</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">text : String</span>
                      </div></td><td align="left"><div class="SimplePara">Gets the text associated with the icon</div></td></tr></tbody></table></div>
          </div></div><div id="Sec18" class="Section1 RenderAsSection1"><h2 class="Heading">3.8 On-demand creation of output</h2><div class="Para">Some scripts may need to generate a lot of output which the user will need to scroll through. It may be a waste of processing time (and perhaps battery charge) if all that output is generated at once. A better approach would be to create chunks of output only as the user scrolls to view the part of the screen where the output would be displayed.</div><div class="Para">An event <span class="EmphasisFontCategoryNonProportional">empty space on wall</span> is triggered whenever there is space on the wall for displaying new output. There will be space when the user scrolls to the end of the displayed output.</div></div></div></body></html>
