<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title>UI with Boxes and Pages</title><link href="springer_epub.css" type="text/css" rel="styleSheet"/></head><body><div class="ChapterContextInformation"><div class="ContextInformation" id="Chap10"><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">R. Nigel Horspool</span> and </span><span class="Author"><span class="AuthorName">Nikolai Tillmann</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" xml:lang="en">TouchDevelop: Programming on the Go</span><span class="BookEdition">Third Edition</span></span><span class="ChapterDOI">10.1007/978-1-4302-6137-7_10</span><span class="ChapterCopyright">© R. Nigel Horspool 2013</span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" xml:lang="en">10. UI with Boxes and Pages</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">R. Nigel Horspool</span><sup>1 <span class="ContactIcon"/></sup> and </span><span class="Author"><span class="AuthorName">Nikolai Tillmann</span><sup>2 <span class="ContactIcon"/></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff1"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">Canada, USA</div></div><div class="Affiliation" id="Aff2"><span class="AffiliationNumber">(2)</span><div class="AffiliationText">TU Berlin, Germany</div></div><div class="ClearBoth"> </div></div></div><div class="ArticleOrChapterToc"><div class="TocLine"><a href="#Sec1">10.1 Page Overview</a></div><div class="TocLine"><a href="#Sec2">10.2 Box Overview</a></div><div class="TocLine"><a href="#Sec3">10.3 Examples of Boxes and Pages</a></div><div class="TocLine"><a href="#Sec7">10.4 Working with Pages</a></div><div class="TocLine"><a href="#Sec10">10.5 Live Editing of the User Interface</a></div><div class="TocLine"><a href="#Sec11">10.6 API Support for Boxes and Pages</a></div></div><div class="Abstract" id="Abs1" xml:lang="en"><div class="Heading">Abstract</div><div class="Para">A well-designed user interface that takes full advantage of the screen is essential for giving a professional look and feel to a program. The <span class="EmphasisTypeItalic">page</span> and <span class="EmphasisTypeItalic">boxed</span> constructs in TouchDevelop provide a powerful means of laying out information on the screen. A unique feature to assist script developers is that a running script can be suspended while the format of information currently displayed on the screen is changed, and then the script’s execution can be resumed.</div></div><!--End Abstract--><div class="Fulltext"><div class="Para">A well-designed user interface that takes full advantage of the screen is essential for giving a professional look and feel to a program. The <span class="EmphasisTypeItalic">page</span> and <span class="EmphasisTypeItalic">boxed</span> constructs in TouchDevelop provide a powerful means of laying out information on the screen. A unique feature to assist script developers is that a running script can be suspended while the format of information currently displayed on the screen is changed, and then the script’s execution can be resumed.</div><div id="Sec1" class="Section1 RenderAsSection1"><h2 class="Heading">10.1 Page Overview</h2><div class="Para">A page is invoked in a similar manner to an action. However, when it is invoked, it takes over the whole screen. Everything displayed on the screen is created by the code belonging to that screen (or by actions invoked by the page).</div><div class="Para">Pages are managed in a stack-like manner. When the code in page A causes page B to be displayed, B takes over the screen. However, when B is finished or when the user taps the back button, the screen reverts to show what had been displayed by A just before B. Similarly, page B could have caused page C to be displayed, and when C is finished, the screen returns to show page B again.</div><div class="Para">The code for a page is divided into two main parts: an <span class="EmphasisTypeItalic">initialize</span> section and a <span class="EmphasisTypeItalic">display</span> section. When the page is invoked, the screen is cleared to be blank and then the code in the initialize section is executed. This code can execute all kinds of statements in the scripting language except that <span class="EmphasisTypeItalic">it cannot display anything on the screen</span>. If it attempts to change anything on this blank screen, the script stops execution with an error report. The purpose of the initialize section is to initialize global variables, especially global variables which will be used in the display section of the page.</div><div class="Para">The display section of a page is responsible for rendering the images and text on the screen. The box construct, explained below, is used to manage the placement of information on the screen. There is a major restriction on what the code in the display section is allowed to do. <span class="EmphasisTypeItalic">The display section cannot make assignments to any global variables</span>. If the code in the display section attempts to execute such an assignment, or calls an action which attempts such an assignment, the script stops execution with an error report.</div><div class="Para">The restrictions on the contents of the initialize section and display section impose a certain style of programming on the script developer. However these restrictions also provide a significant benefit. They permit the script’s developer to modify the layout and contents of the screen while the script execution is suspended and then resume execution with the new screen layout in effect. A developer can therefore correct and/or improve the script’s user interface without having to stop and restart the script from the beginning.</div></div><div id="Sec2" class="Section1 RenderAsSection1"><h2 class="Heading">10.2 Box Overview</h2><div class="Para">The display section of a page is responsible for rendering visual elements on the screen. Within that screen area, any value which can be displayed on the wall can be displayed here too.</div><div class="Para">There is, however, a special feature available for use only within the display section of a page. The new feature is called a <span class="EmphasisTypeItalic">box</span>, and it is introduced in a script with the keyword <span class="EmphasisTypeBold">boxed</span>. Any collection of graphical elements can be boxed, which means that the collection can be treated as a single unit known as a box. That box becomes a graphical element in its own right.</div><div class="Para">A box represents a rectangular region of the screen. The size of the rectangle will normally default to whatever is needed to enclose its contents. Alternatively, either or both dimensions can be specified or constrained to be within desired ranges. Scroll bars can be added to a box if desired.</div><div class="Para">An important part of a graphical user interface is the ability to input information. Code can be attached to a box which is executed when the box is tapped (or clicked with a mouse). A box containing text can be marked as editable, and code can be attached to that box which is executed whenever the text contents are changed. The attached code must take the form of a <span class="EmphasisTypeItalic">change handler</span>. For a click event, the change handler is a parameterless action. For the action of changing text, it is an action which takes a single String parameter; that string is a copy of the new text.</div></div><div id="Sec3" class="Section1 RenderAsSection1"><h2 class="Heading">10.3 Examples of Boxes and Pages</h2><div class="Para">A page can be displayed either by making it into the first action executed when the script is started, or by using a <span class="EmphasisTypeBold">push</span> statement. The first of these choices is automatic if you select the script template named <span class="EmphasisTypeItalic">pages</span> when starting to create the script. The first example discussed here was created in this way.</div><div id="Sec4" class="Section2 RenderAsSection2"><h3 class="Heading">10.3.1 Page Example 1 (/bvhugenw)</h3><div class="Para">Figure <span class="InternalRef"><a href="#Fig1">10-1</a></span> is very similar to the <span class="EmphasisTypeItalic">scripts</span> template. However some changes have been made to illustrate a couple of important points.</div><div class="Para">The <span class="EmphasisTypeBold">boxed</span> keyword creates a new box. It is a <span class="EmphasisTypeItalic">container box</span>, because it is intended to hold graphical elements drawn on the screen. The contents and the formatting of that box are specified by the indented code underneath. In this example, two lines of text are written to the wall, which means that they are written as the contents of the box. After the script is run, the screen has the contents shown in Figure <span class="InternalRef"><a href="#Fig2">10-2(a)</a></span>.</div><div class="Para">The lines of text are written one below the other and are left-justified within the box. A vertical layout of graphical elements with left justification is the default. Both of these defaults can be overridden.
<div class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img src="A978-1-4302-6137-7_10_Fig1_HTML.jpg" alt="A978-1-4302-6137-7_10_Fig1_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 10-1</span><div class="SimplePara">Page Example 1 (/bvhugenw)</div></div></div></div>
            </div><div class="Para">The surprise of the example is that the sizes and colors of the two lines of text are exactly the same. The reason is that the graphical elements defined inside the box, which are the two textual strings in this example, are not rendered until all the statements inside the box have been executed. It is only the last change to the foreground color and the last change to the font size which has any effect.</div><div class="Para">The two lines of text are themselves boxes, but they are known as <span class="EmphasisTypeItalic">leaf boxes</span> because they do not contain any boxes at a lower level. It is possible to see the extents of all the boxes on the screen by tapping the pause button in the top right-hand corner of the screen. Figure <span class="InternalRef"><a href="#Fig2">10-2(b)</a></span> shows the browser window after pausing the script. Thin blue lines surround the two lines of text separately. The two leaf boxes taken together comprise the entire contents of the container box, and correspond to the code inside the <span class="EmphasisTypeBold">boxed</span> construct. That is why the background color of box boxes is yellow. The pink region surrounding the container box corresponds to the entire page – it is the frame within which the boxes have been drawn. The statement <span class="EmphasisFontCategoryNonProportional">box</span> → <span class="EmphasisFontCategoryNonProportional">set margins(2, 2, 2, 2)</span> affects the placement of the container box inside that enclosing frame.</div><div class="Para">As the code of Page Example 1 shows, it is possible to specify some kinds of formatting for the frame by using the <span class="EmphasisFontCategoryNonProportional">box</span> variable immediately inside the display section of the code.</div><div class="Para">Leaf boxes are created in various ways which include posting text on the wall, or posting images from the art section of the script onto the wall. The formatting of text in a leaf box is inherited from its enclosing container box.
<div class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img src="A978-1-4302-6137-7_10_Fig2_HTML.jpg" alt="A978-1-4302-6137-7_10_Fig2_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 10-2</span><div class="SimplePara">(a) Result from Page Example 1</div></div></div></div>
            </div></div><div id="Sec5" class="Section2 RenderAsSection2"><h3 class="Heading">10.3.2 Page Example 2 (/hnimxaiw)</h3><div class="Para">The second example introduces events which are executed when a box is clicked and demonstrates the need for the initialize section in a page (Figure <span class="InternalRef"><a href="#Fig3">10-3</a></span>).</div><div class="Para">The display section of the page defines three boxes. Because the display section makes the method call <span class="EmphasisFontCategoryNonProportional">box</span> → <span class="EmphasisFontCategoryNonProportional">use horizontal layout</span>, the three boxes are drawn from left to right across the screen. Furthermore, the boxes are vertically aligned so that their middle points are in a straight line.</div><div class="Para">The first box contains text copied from the global variable <span class="EmphasisFontCategoryNonProportional">s</span>, and draws it with a font whose size is specified by the global variable, <span class="EmphasisFontCategoryNonProportional">size</span>. The code also sets attributes of the box so that the text will wrap onto multiple lines if it does not fit, and solid lines are drawn around the box.</div><div class="Para">The second and third boxes are both intended to be clickable. They are drawn to have the same size and use the same colors. Therefore, rather than duplicating the code for the two boxes, the code to set each box’s attributes has been defined inside the action named <span class="EmphasisFontCategoryNonProportional">create button</span>. Whenever the identifier <span class="EmphasisFontCategoryNonProportional">box</span> is used inside that action, it refers to the current box which is being defined.</div><div class="Para">After calling the <span class="EmphasisFontCategoryNonProportional">create button</span> action for each box, the <span class="EmphasisFontCategoryNonProportional">on tapped</span> method is invoked to attach a change handler to the box. For a tapping action, the change handler takes the form of an action with no parameters, and that action has to be defined at this point in the script using a <span class="EmphasisTypeBold">where</span> clause.</div><div class="Para">The code inside a change handler can do anything allowed in a TouchDevelop script except assign values to local variables, change any attributes of the current box or directly change what is being displayed<span class="EmphasisTypeItalic">. If the action of tapping the box is to have any effect on the current page, the change handler must communicate the changes via global variables.</span>
            </div><div class="Para">The change handler for the box which displays the text “Click Here” increments a global variable named <span class="EmphasisFontCategoryNonProportional">cnt</span> and then uses the new value of <span class="EmphasisFontCategoryNonProportional">cnt</span> to construct a string value stored in the global variable <span class="EmphasisFontCategoryNonProportional">s</span>. It should be noted that <span class="EmphasisFontCategoryNonProportional">s</span> was used to provide the contents displayed inside the first box drawn on the page.</div><div class="Para">Along similar lines, the change handler for the box which displays the text “Make Larger” increments a global variable which specifies the font size used for text displayed in the first box on the page.</div><div class="Para">When the script is run, the first box is initially empty. However, when the “Click Here” box is tapped, the first box changes to display the string “It was clicked 1 times”. Each subsequent tapping action changes that 1 to 2, then to 3 and so on. The change to the box contents on the screen occurs because the entire page is redrawn any time something happens which may affect the page. The reasons for redrawing the page include:
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">executing a change handler on the page,</div></li><li><div class="Para">clicking the suspend button at the top right of the screen and then resuming the script,</div></li><li><div class="Para">displaying another page and then returning to this page,</div></li><li><div class="Para">any global variables or records have been modified.</div></li></ul></div>
              <div class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img src="A978-1-4302-6137-7_10_Fig3_HTML.jpg" alt="A978-1-4302-6137-7_10_Fig3_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 10-3</span><div class="SimplePara">Page Example 2 (/hnimxaiw)</div></div></div></div>
            </div><div class="Para">The screen after tapping the “Click Here” and “Make Larger” buttons a few times each is shown in Figure <span class="InternalRef"><a href="#Fig4">10-4</a></span>. Note that the <span class="EmphasisTypeItalic">text wrapping</span> attribute of the first box was set, and when the font size was increased, the string wrapped onto two lines of text. No height was specified for the box, so it simply grows taller to accommodate the two lines of text.
<div class="Figure" id="Fig4"><div class="MediaObject" id="MO4"><img src="A978-1-4302-6137-7_10_Fig4_HTML.jpg" alt="A978-1-4302-6137-7_10_Fig4_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 10-4</span><div class="SimplePara">Result of Running Page Example 2</div></div></div></div>
            </div></div><div id="Sec6" class="Section2 RenderAsSection2"><h3 class="Heading">10.3.3 Page Example 3 (/wrsonnwh)</h3><div class="Para">The third example script shows the use of a change handler to process editable text and the nesting of boxes to achieve a desired layout for the graphical elements.</div><div class="Para">The script shown in Figure <span class="InternalRef"><a href="#Fig5">10-5</a></span> allows the user to enter English language text into the left-hand box. Every time the user pauses, the change handler is invoked. Its input parameter is a copy of the current version of the text. That input parameter is normally assigned, unchanged, to the global variable associated with this box. (The editor ensures that there is always such a variable and it will have the <span class="EmphasisFontCategoryNonProportional">String</span> type.) However additional actions can be added to the change handler. In this example, that additional action is to invoke the Bing language translation service and translate the English language input into French, The French version of the text is displayed in the right-hand box.</div><div class="Para">A snapshot of the screen after the script has been used to translate one sentence is shown in Figure <span class="InternalRef"><a href="#Fig6">10-6</a></span>.
<div class="Figure" id="Fig5"><div class="MediaObject" id="MO5"><img src="A978-1-4302-6137-7_10_Fig5_HTML.jpg" alt="A978-1-4302-6137-7_10_Fig5_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 10-5</span><div class="SimplePara">Page Example 3 (/wrsonnwh)</div></div></div></div>
            </div><div class="Para">A production version of this script might allow the user to select both the source language and the destination language for the translation. This nicer version of the script would presumably use the full names of the languages rather than two letter abbreviations. It would likely also perform the translation only when the user clicks on the arrow between the two boxes. It can be disconcerting to have partial translations popping up and changing as one is typing text into the left-hand box. Also, an internet connection is made every time the text is translated and this can be undesirable for a tablet device communicating via a cellphone connection. These enhancements are left as an exercise for the reader.
<div class="Figure" id="Fig6"><div class="MediaObject" id="MO6"><img src="A978-1-4302-6137-7_10_Fig6_HTML.jpg" alt="A978-1-4302-6137-7_10_Fig6_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 10-6</span><div class="SimplePara">Translation produced by Page Example 3</div></div></div></div>
            </div></div></div><div id="Sec7" class="Section1 RenderAsSection1"><h2 class="Heading">10.4 Working with Pages</h2><div class="Para">The display section of a page works with the entire window of the browser running the script. This window is effectively the current box for any code executed immediately inside the display section; that is, code which is not nested inside a <span class="EmphasisTypeBold">boxed</span> construct.</div><div id="Sec8" class="Section2 RenderAsSection2"><h3 class="Heading">10.4.1 Entering and Leaving a Page</h3><div class="Para">A page is simply a special kind of action. It can be invoked as an entry point of the script if it is public and does not have any parameters. It can also be invoked as though it were an action. If, for example, the script defines a page named show then the page can be displayed by executing the call ▷ <span class="EmphasisFontCategoryNonProportional">show</span>. When code for the script is displayed on the screen, the call statement appears as push ▷ show to indicate that the TouchDevelop run-time is maintaining a stack of pages.</div><div class="Para">A page which is not used as the entry point of a script can accept input parameters. It cannot have any output parameters.</div><div class="Para">A page can be exited (terminated) by clicking the back arrow which appears in the top left corner of the webpage. On a Windows phone, the back button achieves the same effect. The page can also be exited by executing the statement <span class="EmphasisFontCategoryNonProportional">wall</span> → <span class="EmphasisFontCategoryNonProportional">pop page</span>. This statement would normally be used inside a change handler. An example appears below.</div><div class="Para ParaTypeProgramcode">       <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">boxed</span></span>
            </div><div class="Para ParaTypeProgramcode">              <span class="EmphasisFontCategoryNonProportional">“Click here when done” → post to wall</span>
            </div><div class="Para ParaTypeProgramcode">              <span class="EmphasisFontCategoryNonProportional">box → on tapped(handler)</span>
            </div><div class="Para ParaTypeProgramcode">                     <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">where</span></span>  <span class="EmphasisFontCategoryNonProportional">handler( )</span>
              <span class="EmphasisTypeBold"><span class="EmphasisFontCategoryNonProportional">is</span></span>
            </div><div class="Para ParaTypeProgramcode">                            <span class="EmphasisFontCategoryNonProportional">wall → pop page</span>
            </div></div><div id="Sec9" class="Section2 RenderAsSection2"><h3 class="Heading">10.4.2 Coding Restrictions</h3><div class="Para">The initialization section of a page cannot draw any items on the page. It can declare and use local variables but these variables are not accessible from inside the display section of the page. (They are out of scope.) Normally, the initialization section is used to initialize global variables used in the display section.</div><div class="Para">The display section of a page can use but not assign to global variables. (Even though change handlers are defined within the display section, they are not considered to be part of the display section.) The display section can use local variables as normal. It can use normal control structures such as loops and if-statements. Its main purpose is to render graphical elements on the current page.</div><div class="Para">Change handlers attached to boxes on the current page can use and assign to global variables. They can use but they cannot assign to local variables in the display section of the page, provided that they are visible. (Normal scope rules apply.) They cannot draw any items on the screen nor can they set any attributes of the current box.</div><div class="Para">All the statements in the display section of the page are re-executed and the entire page is re-drawn after control returns from a change handler or when the page becomes the current page again after another page exits or when a global variable or record is changed. In contrast, the code in the initialization section is only executed when a new instance of the page is created and pushed onto the stack of pages.</div><div class="Para">The identifier <span class="EmphasisFontCategoryNonProportional">box</span> refers to the current box and can be used in any context where there is an active current box. If <span class="EmphasisFontCategoryNonProportional">box</span> is referenced inside an action, then there may or may not be a current box depending on how control reached that action. A run-time error occurs if there is no current box. There is always a current box if control is inside the display section of a page or inside an action called from a page or inside a change handler attached to a box. There is no current box when the initialization section of a page is being executed.</div><div class="Para">Even though there may be a current box, access may be limited to read only (such as obtaining the current value of <span class="EmphasisFontCategoryNonProportional">box</span>→<span class="EmphasisFontCategoryNonProportional">pixels per em</span>). Invoking a method which sets attributes of the current box is permitted only within the display section of a page or within an action invoked from the display section.</div></div></div><div id="Sec10" class="Section1 RenderAsSection1"><h2 class="Heading">10.5 Live Editing of the User Interface</h2><div class="Para">Pages are easy to debug and modify while a script is executing. There is no need to stop the script and re-start it from the beginning each time that the script developer makes a small change. When the script is running in a browser, a pause button is displayed in the top right corner of the browser’s window. The pause button is shown in Figure <span class="InternalRef"><a href="#Fig7">10-7</a></span>.
<div class="Figure" id="Fig7"><div class="MediaObject" id="MO7"><img src="A978-1-4302-6137-7_10_Fig7_HTML.jpg" alt="A978-1-4302-6137-7_10_Fig7_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 10-7</span><div class="SimplePara">Icons for User Interface Editing</div></div></div></div>
          </div><div class="Para">Tapping that button causes a very thin blue line to be drawn around each box which is currently displayed on the screen, and the pause button is replaced with a resume button, also shown in Figure <span class="InternalRef"><a href="#Fig7">10-7</a></span>.</div><div class="Para">The script is no longer running at this point. Clicking inside one of the rectangles composed of thin blue lines causes the rectangle to be augmented with a thicker dotted red rectangle, and causes a button labeled as ‘edit’ to appear on the screen. The edit button is shown in Figure <span class="InternalRef"><a href="#Fig7">10-7</a></span>. That dotted red rectangle indicates which box has been selected. Double clicking causes an outer enclosing box to be selected instead. Triple clicking, etc., works similarly when the boxed constructs are nested sufficiently deeply.</div><div class="Para">Clicking the edit button causes the script editor to be invoked on exactly the code for the selected box. On a display monitor which is wide enough, the browser’s window is split so that the left-hand side contains the currently displayed page and the right-hand side shows the code for the selected box. (If the view of the page takes up too much screen real estate, it can be removed by clicking the dismiss button in its top left corner.)</div><div class="Para">The code for the script can now be edited. Changes can be small or they can be major. There is no restriction on which code in the entire script can be changed. When the changes are complete and it is time to see if they had the desired effect, the view of the current page should be dismissed (if that has not been done already) and the resume button, which is now on the left-hand side of the screen, can be tapped.</div><div class="Para">Resuming the script causes the display section of the current page to be re-executed and the page is re-drawn, reflecting any changes made to the code. The run-suspend-edit-resume cycle can be repeated as many times as desired until the user interface is perfect.</div><div class="Para">It should be noted that if major changes to the code are made, such as changes to actions called from other places in the script, then the script may need to be restarted from the beginning to see their full effect.</div></div><div id="Sec11" class="Section1 RenderAsSection1"><h2 class="Heading">10.6 API Support for Boxes and Pages</h2><div class="Para">The <span class="EmphasisFontCategoryNonProportional">box</span> identifier names a service which has the <span class="EmphasisFontCategoryNonProportional">Box</span> datatype. There is only one instance of this type, it is a <span class="EmphasisTypeItalic">singleton</span>.</div><div class="Para">The <span class="EmphasisTypeBold">boxed</span> and <span class="EmphasisTypeBold">page</span> constructs in TouchDevelop are recent additions to the scripting language and are still being developed. Table <span class="InternalRef"><a href="#Tab1">10-1</a></span>, Table <span class="InternalRef"><a href="#Tab2">10-2</a></span> and Table <span class="InternalRef"><a href="#Tab3">10-3</a></span> list the methods provided for the <span class="EmphasisFontCategoryNonProportional">box</span> service at the time of writing. However additional methods may be provided and/or some of the current methods may be modified to work differently. The most reliable and up-to-date source of information about these constructs is the TouchDevelop website.
<div id="Tab1" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 10-1</span><div class="SimplePara">General Methods of box Service</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">Method</div></th><th align="left"><div class="SimplePara">Description</div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set background(c : Color)</span>
                      </div></td><td align="left"><div class="SimplePara">Sets the background color</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set foreground(c : Color)</span>
                      </div></td><td align="left"><div class="SimplePara">Sets the color of items drawn in the box</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set height(h : Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Sets an exact height for the box</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set height range(min : Number, max : Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Sets a range of heights for the box</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set width(w : Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Sets an exact width for the box</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set width range(min : Number, max : Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Sets a range of widths for the box</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set border(c : Color, w : Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Sets the color and width of a line drawn around the edge of the box</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set horizontal stretch(f: Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Controls how box width is computed: f = 0.0 means shrink to fit content, f = 1.0 means expand to fill the frame, f = 0.5 means expand to 50% of frame’s width.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set padding(t: Number, r: Number, b: Number, l: Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Specify how much space to leave around the box: t, r, b and l determine the top, right, bottom and left sides respectively.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">on tapped(handler: Action)</span>
                      </div></td><td align="left"><div class="SimplePara">Associates a handler action with the box, and is invoked when the box is tapped</div></td></tr></tbody></table></div>
            <div id="Tab2" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 10-2</span><div class="SimplePara">Text Handling Methods of box Service</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">Method</div></th><th align="left"><div class="SimplePara">Description</div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set font size(n : Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Sets the font size for text displayed in the box; 1.0 is the current default size.</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set text wrapping(wrap: Boolean, min: Number)</span>
                      </div></td><td align="left"><div class="SimplePara">Specifies whether long text lines should be broken, and what length is too short to be split</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set horizontal align(s: String)</span>
                      </div></td><td align="left"><div class="SimplePara">Specifies how to format text in the box; the argument is one of “left”, “right”, “center” or “justify”</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">pixels per em</span>
                      </div></td><td align="left"><div class="SimplePara">Returns the width of the letter ‘m’ in pixels</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">edit(style: String, v: String, changehandler: Action)</span>
                      </div></td><td align="left"><div class="SimplePara">Displays text from the global variable v which can be edited. The style parameter is one of “textline” “textarea” “number” or “password”. The changehandler is invoked each time the text is changed.</div></td></tr></tbody></table></div>
            <div id="Tab3" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 10-3</span><div class="SimplePara">Layout Methods of box Service</div></div></div><table border="1"><colgroup><col align="left"/><col align="left"/></colgroup><thead><tr class="header"><th align="left"><div class="SimplePara">Method</div></th><th align="left"><div class="SimplePara">Description</div></th></tr></thead><tbody><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">use horizontal layout</span>
                      </div></td><td align="left"><div class="SimplePara">Arranges boxes and other items from left to right horizontally</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">use vertical layout</span>
                      </div></td><td align="left"><div class="SimplePara">Arranges boxes and other items from top to bottom vertically</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">use overlay layout</span>
                      </div></td><td align="left"><div class="SimplePara">Arrange boxes and other displayed items inside this box as layers drawn on top of each other</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set horizontal align(s: String)</span>
                      </div></td><td align="left"><div class="SimplePara">s is one of “left” “right” “center” and “justify” to indicate how text and other items in the box are arranged</div></td></tr><tr class="noclass"><td align="left"><div class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional">set vertical align(s: String)</span>
                      </div></td><td align="left"><div class="SimplePara">s is one of “top” “bottom” “center” and “baseline” (for text) to indicate how text and other items in the box are arranged vertically</div></td></tr></tbody></table></div>
          </div></div></div></body></html>
