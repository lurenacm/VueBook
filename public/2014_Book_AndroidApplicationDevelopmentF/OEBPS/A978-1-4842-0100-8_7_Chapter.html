<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title>GUI Design for Android Apps, Part 1: General Overview</title><link href="springer_epub.css" type="text/css" rel="styleSheet"/></head><body><div class="ChapterContextInformation"><div class="ContextInformation" id="Chap7"><div class="ChapterCopyright">© Ryan Cohen 2014</div><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">Ryan Cohen</span> and </span><span class="Author"><span class="AuthorName">Tao Wang</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" xml:lang="en">Android Application Development for the Intel<sup>®</sup> Platform</span></span><span class="ChapterDOI">10.1007/978-1-4842-0100-8_7</span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" xml:lang="en">7. GUI Design for Android Apps, Part 1: General Overview</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">Ryan Cohen</span><sup>1 <span class="ContactIcon"/></sup> and </span><span class="Author"><span class="AuthorName">Tao Wang</span><sup>1 <span class="ContactIcon"/></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff1"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">OR, USA</div></div><div class="ClearBoth"> </div></div></div><!--End Abstract--><div class="Fulltext"><div class="Para">Since its emergence in the 1980s, the concept of the <span class="EmphasisTypeItalic">graphical user interface</span> (GUI) has become an indispensable part of <span class="EmphasisTypeItalic">human-computer interaction</span> (HCI). As embedded systems have evolved, they have gradually adopted this concept as well. The Android embedded OS running on the Intel Atom hardware platform is at the forefront of this movement.</div><div class="Para">Because resources are limited, the GUI design of Android systems is more challenging than that of desktop systems. In addition, users have more rigorous demands and expectations for a high-quality user experience. Interface design has become one of the important factors in determining the success of systems and applications on the market. This chapter introduces how to develop user interfaces suitable for typical user interaction on Android embedded systems.</div><div id="Sec1" class="Section1 RenderAsSection1"><h2 class="Heading">Overview of GUIs for Embedded Applications</h2><div class="Para">These days, the user interface (UI) and user experience (UX) of software are increasingly important factors in determining whether software will be accepted by users and achieve market success. UX designs are based on the types of input/output or interaction devices and must comply with their characteristics. Compared to desktop computer systems, Android systems have different interaction devices and modalities. If a desktop’s UI designs are copied indiscriminately, an Android device will present a terrible UI and unbearable UX, unacceptable to users. In addition, with greater expectations for compelling user experiences, developers must be more meticulous and careful in designing system UIs and UXs, making them comply with the characteristics of embedded applications.</div><div class="Para">This chapter first introduces the general GUI design method for desktop systems and then shows how designing UIs for embedded systems is different. The aim is to help you quickly master general methods and principles of GUI design for Android applications.</div><div id="Sec2" class="Section2 RenderAsSection2"><h3 class="Heading">Characteristics of Interaction Modalities of Android Devices</h3><div class="Para">A general-purpose desktop computer has powerful input/output (or interaction) devices such as a large, high-resolution screen, a full keyboard and mouse, and diverse interaction modalities. Typical desktop computer screens are at least 17 inches, with resolutions of at least 1,280 × 960 pixels. The keyboard is generally a full keyboard or an enhanced keyboard. On full keyboards, letters, numbers, and other characters are located on corresponding keys—that is, full keyboards provide keys corresponding to all characters. Enhanced keyboards have additional keys. The distance between keys on a full keyboard is about 19 mm, which is convenient for users to make selections.</div><div class="Para">The GUI interactive mode of desktop computers based on screen, keyboard, and mouse is referred to as WIMP (windows, icons, menus, and pointers), which is a style of GUI using these elements as well as interactive elements including buttons, toolbars, and dialog boxes. WIMP depends on screen, keyboard, and mouse devices to complete the interaction. For example, a mouse (or a device similar to a mouse, such as a light pen) is used for pointing, a keyboard is used to input characters, and a screen shows the output.</div><div class="Para">In addition to screens, keyboards, mice, and other standard interaction hardware, desktop computers can be equipped with joysticks, helmets, data gloves, and other multimedia interactive devices to achieve multimedia computing functions. By installing cameras, microphones, speakers, and other devices, and by virtue of their powerful computing capabilities, users can interact with desktop computers in the form of voice, gestures, facial expressions, and other modalities.</div><div class="Para">Desktop computers are also generally equipped with CD-ROM/DVDs and other large-capacity portable external storage devices. With these external storage devices, desktop computers can release software and verify ownership and certificates through CD/DVD.</div><div class="Para">As a result of the embeddability and limited resources of embedded systems, as well as user demand for portability and mobility, Android systems have interaction modalities, methods, and capabilities that are distinct from those of desktop systems. Due to these characteristics and conditions, interaction on Android systems is more demanding and more difficult to achieve than it is on desktop systems.</div><div class="Para">The main differences between Android devices and desktop computers are described next.</div><div id="Sec3" class="Section3 RenderAsSection3"><h4 class="Heading">Screens of Various Sizes, Densities, and Specifications</h4><div class="Para">Instead of large, high-resolution screens like those on desktop computers, Android device screens are smaller and have various dimensions and densities measured in dots per inch (DPI). For example, the K900 smartphone’s screen is 5.5 inches with a resolution of 1920 ×1080 pixels, and some smartphone screens are only 3.2 inches.</div><div class="Para">The aspect ratio of Android device screens is not the conventional aspect ration of 16:9 or 4:3 used by desktop computers. If Android devices adopted the interaction mode of desktop computers, many problems would result, such as a blurry display and errors in selecting targets.</div></div><div id="Sec4" class="Section3 RenderAsSection3"><h4 class="Heading">Keypads and Special Keys</h4><div class="Para">Desktop computers have full keyboards, where a key corresponds to every character and the generous distance between keys makes typing convenient. If an Android device has a keyboard, it’s usually a keypad instead of the full keyboard. Keypads have fewer keys than full keyboards; several characters generally share one key. A keypad’s keys are smaller and more tightly spaced than on full keyboards, making it harder to select and type characters. As a result, keypads are less convenient to use than full keyboards. In addition, some keypads provide special keys that are not found on standard full keyboards, so users must adjust their input on the Android device.</div><div class="Para">Generally speaking, on Android devices, keys and buttons are a unified concept. Whether you press a button or a key, the action is processed as a keyboard event with a uniform numbering scheme. Keyboard events in Android have corresponding <span class="EmphasisFontCategoryNonProportional">android.view.KeyEvent</span> classes. Figure <span class="InternalRef"><a href="#Fig1">7-1</a></span>’s button/key callouts correspond to the event information listed in Table <span class="InternalRef"><a href="#Tab1">7-1</a></span>.<div class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img src="A978-1-4842-0100-8_7_Fig1_HTML.jpg" alt="A978-1-4842-0100-8_7_Fig1_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 7-1.</span><div class="SimplePara">Keyboard and buttons of an Android phone</div></div></div></div>
              </div><div class="Para">See help documents like that for <span class="EmphasisFontCategoryNonProportional">android.view.KeyEvent</span> for details. Table <span class="InternalRef"><a href="#Tab1">7-1</a></span>’s contents are excerpts.<div id="Tab1" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 7-1.</span><div class="SimplePara">Android Event Information Corresponding to Key and Button Events</div></div></div><div class="MediaObject" id="MO2"><img src="A978-1-4842-0100-8_7_Figa_HTML.jpg" alt="A978-1-4842-0100-8_7_Figa_HTML.jpg"/><img src="A978-1-4842-0100-8_7_Figb_HTML.jpg" alt="A978-1-4842-0100-8_7_Figb_HTML.jpg"/></div></div>
              </div></div><div id="Sec5" class="Section3 RenderAsSection3"><h4 class="Heading">Touch Screens and Styluses, in Place of Mice</h4><div class="Para">A <span class="EmphasisTypeItalic">touch screen</span> is an input device covering a display device to record touch positions. By using the touch screen, users can have a more intuitive reaction to the information displayed. Touch screens are widely applied to Android devices and replace a mouse for user input. The most common types of touch screens are resistive touch screens, capacitive touch screens, surface acoustic wave touch screens, and infrared touch screens, with resistive and capacitive touch screens being most often applied to Android devices. Users can directly click videos and images on the screen to watch them.</div><div class="Para">A stylus can be used to perform functions similar to touch. Some styluses are auxiliary tools for touch screens and replace fingers, helping users complete elaborate pointing, selecting, line drawing, and other operations, especially when the touch screen is small. Other styluses implement touch and input functions along with other system components. With the first type of auxiliary tool styluses, users can touch and input characters with fingers. But the second type of stylus is an indispensable input tool and is used instead of fingers.</div><div class="Para">Touch and styluses can perform most functions that mice typically do, such as click and drag, but can’t achieve all the functions of mice, such as right-click and left-click/right-click at the same time. When designing embedded applications, you should control the interaction mode within the range of functions that touch screens or styluses can provide and avoid operations that are not available.</div></div><div id="Sec6" class="Section3 RenderAsSection3"><h4 class="Heading">Onscreen Keyboards</h4><div class="Para">
                <span class="EmphasisTypeItalic">Onscreen keyboards</span>, also known as <span class="EmphasisTypeItalic">virtual keyboards</span> or <span class="EmphasisTypeItalic">soft keyboards</span>, are displayed on the screen via software. Users tap the virtual keys like they would tap the keys on physical keyboards.</div></div><div id="Sec7" class="Section3 RenderAsSection3"><h4 class="Heading">Few Multimodal Interactions</h4><div class="Para">
                <span class="EmphasisTypeItalic">Multimodal interaction</span>refers to human-computer interaction with the modes involving the five human senses. It allows the user to interact through input modalities such as speech, handwriting, and hand gesture. Because computing capability is limited, Android devices generally do not adopt multimodal interaction.</div></div><div id="Sec8" class="Section3 RenderAsSection3"><h4 class="Heading">Few Large-Capacity Portable External Storage Devices</h4><div class="Para">Most Android devices do not have the CD-ROM/DVD drives, hard disks, or other large-capacity portable storage peripherals such as solid-state drives (SSDs) that are usually configured on desktop computers. These devices cannot be used on Android devices to install software or verify ownership and certificates. However, Android devices usually support microSD cards, which now have capacities of up to 128 GB; and more and more cloud-based storage solutions such as Dropbox, One Drive, and Google Drive are being developed for Android devices, with Android-compatible client apps available for download from Google Play Store.</div></div></div></div><div id="Sec9" class="Section1 RenderAsSection1"><h2 class="Heading">UI Design Principles for Embedded Systems</h2><div class="Para">This section introduces interactive design issues and corrective measures to take when transforming traditional desktop applications to embedded applications.</div><div id="Sec10" class="Section2 RenderAsSection2"><h3 class="Heading">Considerations of Screen Size</h3><div class="Para">Compared to desktop computer systems, Android systems have smaller screens with different display densities and aspect ratios. Such screen differences result in many problems when migrating applications from desktop systems to Android systems. If developers reduce desktop system screens proportionally, the graphic elements become too small to be seen clearly. In particular, it is often difficult to see the text and icons, select and click some buttons, and place some application pictures on the screen appropriately. If developers migrate application graphic elements to Android systems without changing their sizes, the screen space is limited and can only accommodate a few of the graphic elements.</div><div id="Sec11" class="Section3 RenderAsSection3"><h4 class="Heading">Size of Text and Icons</h4><div class="Para">Another problem is the size of text and icons. When an application is reduced from a typical 15-inch desktop screen to a typical 5- or 7-inch phone or tablet screen, its text is too small to be seen clearly. In addition to the size of the text font, the text window (such as a chat window) also becomes too small to read the text. Trying to reduce the font size to suit smaller windows makes the text hard to recognize.</div><div class="Para">Therefore, the design of embedded systems should use as few text prompt messages as possible; for example, replace the text with graphic or sound information. In addition, where text is necessary, the text size should be adjustable. On Android, some predefined fonts and icons are available in the <span class="EmphasisFontCategoryNonProportional">res</span> directory, such as <span class="EmphasisFontCategoryNonProportional">drawable-hdpi</span>, <span class="EmphasisFontCategoryNonProportional">drawable-mdpi</span>, and <span class="EmphasisFontCategoryNonProportional">drawable-xhdpi</span>.</div></div><div id="Sec12" class="Section3 RenderAsSection3"><h4 class="Heading">Clickability of Buttons and Other Graphical Elements</h4><div class="Para">Similar to the problem of small text, buttons and other graphical elements also bring interaction problems when migrating applications. On desktop systems, the size of buttons is designed for mouse clicks, whereas on Android systems, the button size should be suitable for fingers (on touch screens) or styluses. Therefore, when porting a Windows-based app to support Android devices, the application UI needs to be redesigned; and predefined drawables provided by the Android SDK should be selected in order to suit fingers or styluses.</div><div class="Para">Developers should use bigger and clearer buttons or graphic elements to avoid such problems and leave enough gap between graphic elements to avoid errors, which are common when a small touch screen is used for selecting by fingers or styluses. In addition, if an application has text labels near buttons, the labels should be part of the clickable area connected with the buttons, so the buttons are easier to click.</div></div></div><div id="Sec13" class="Section2 RenderAsSection2"><h3 class="Heading">Size of Application Windows</h3><div class="Para">Many applications, such as games, use windows with fixed sizes instead of windows that automatically adjust to fill any size screen. When these applications are migrated to Android systems, because the screen’s aspect ratio does not match its resolution, part of the picture may not be seen, or part of the area may not be reachable.</div><div class="Para">These problems may be more complicated on smartphones and tablets because their screens have various densities such as small (426 dp × 320 dp), normal (470 dp × 320 dp), large (640 dp × 480 dp), and extra large (960 dp × 720 dp). Their aspect ratios are diverse and different from those commonly adopted by desktop systems.</div><div class="Para">One good way to solve such problems is to place the entire application window proportionally on the smartphone or tablet screen, such as the large and extra-large screens, which are typically 640 × 480 pixels and 960 × 720 pixels; or rearrange the UI to make full use of the entire widescreen area; or make the entire app window a scrollable view. In addition, you can allow users to use multiple touch fingers touch to zoom in, zoom out, or move the application window on the screen.</div></div><div id="Sec14" class="Section2 RenderAsSection2"><h3 class="Heading">Considerations Arising from Touch Screens and Styluses</h3><div class="Para">As mentioned earlier, touch screens and styluses are used on many Android systems to perform some traditional mouse functions. Such input devices are called . However, tap-only touch screens cannot provide all mouse functions. There is no right button, and the current finger/stylus location cannot be captured when the screen is not touched. So, desktop applications that allow functions such as cursor moves without clicking, different operations for left-clicks and right-clicks, and so on, cannot be realized on Android systems using touch screens and styluses.</div><div class="Para">The following sections talk about several problems often seen when migrating applications from desktop systems to Android systems using tap-only touch screens.</div><div id="Sec15" class="Section3 RenderAsSection3"><h4 class="Heading">Correctly Interpreting the Movement and Input of the Cursor (Mouse) on Tap-Only Touch Screens</h4><div class="Para">Many applications need mouse movement information when no mouse key is pressed. This operation is called . For example, a lot of PC shooting games<a href="#Fn1" id="Fn1_source"><sup>1</sup></a> simulate the user’s field of vision such that moving the mouse without clicking is interpreted as moving the game player’s vision field; but the cursor should always stay in the middle of the new vision field. However, an embedded device with a tap-only touch screen does not support the operation of moving the cursor without clicking. Once the user’s finger touches the screen, a tap event is triggered. When the user moves a finger on the screen, a series of tap events at different positions is triggered; these events are interpreted by the existing game code as additional interaction events (that is, moving the aiming position of the game player’s gun).</div><div class="Para">The original interaction mode needs to be modified when migrating this type of application to Android systems. For example, this problem can be modified into a click operation: once the user touches the screen, the game screen should immediately switch to the vision field, in which the cursor is located at the screen center. This way, the cursor is always displayed at the screen center and not at the position the user actually touched. One advantage you benefit from on mobile platforms is that most smartphones and tablets on the market are equipped with sensors such as accelerometers, gyroscopes, GPS sensors, and compasses, and they allow applications to read data from the sensors. As a result, developers have more options than just touch input.</div><div class="Para">More generally, if an application needs to track the cursor’s movement from point A to point B, the tap-only touch screen can define this input by the user clicking first point A and then point B, without the need to track the movement between point A and point B.</div></div><div id="Sec16" class="Section3 RenderAsSection3"><h4 class="Heading">Setting Screen Mapping Correctly</h4><div class="Para">Many applications run in full-screen mode. If such applications do not perfectly fill the entire tap-only touch screen (that is, they are smaller or bigger than the screen), input mapping errors result: there is a deviation between the display position and the click position.</div><div class="Para">One situation that often occurs in migrating a full-screen application to a tap-only touch screen with a low aspect ratio is the application window being centered on the screen with blank space showing on both sides. For example, when a desktop application window with a resolution of 640 × 480 (or 800 × 600) pixels is migrated to a tap-only touch screen with a resolution of 960 × 720 (or 1280 × 800, a WXGA on Dell Venue 8) pixels, it appears on the screen as shown in Figure <span class="InternalRef"><a href="#Fig2">7-2</a></span>. The resulting mapping errors cause the app to incorrectly respond to user interaction. When the user taps the position of the yellow arrow (the target), the position identified by the application is the point where the red explosion icon is located. These kinds of errors also occur when the user taps a button.<div class="Figure" id="Fig2"><div class="MediaObject" id="MO3"><img src="A978-1-4842-0100-8_7_Fig2_HTML.jpg" alt="A978-1-4842-0100-8_7_Fig2_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 7-2.</span><div class="SimplePara">Screen-mapping errors due to a low aspect ratio</div></div></div></div>
              </div><div class="Para">You should consider the position-mapping logic and take this blank space into consideration, even if the blank space is not part of the migrating application’s window. By making these changes, the tap-only touch screen can map the touch position correctly.</div><div class="Para">Another situation occurs when the desktop full-screen window is migrated to a tap-only touch screen with a higher aspect ratio. The height of the original application window does not fit on the tap-only touch screen, and mapping errors occur in the vertical direction instead of the horizontal direction.</div><div class="Para">Figure <span class="InternalRef"><a href="#Fig3">7-3</a></span> shows the original application window filling the screen horizontally but not vertically on a tap-only touch screen with a higher aspect ratio. Here, when the user taps the position of the yellow arrow (the target), the position identified by the application is the point where the red explosion icon is located. These errors are caused by the difference in shape between the physical display and the application window.<div class="Figure" id="Fig3"><div class="MediaObject" id="MO4"><img src="A978-1-4842-0100-8_7_Fig3_HTML.jpg" alt="A978-1-4842-0100-8_7_Fig3_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 7-3.</span><div class="SimplePara">Screen-mapping errors due to a high aspect ratio</div></div></div></div>
              </div><div class="Para">One solution is to ensure that the OS accurately maps the tap-only touch screen to the entire visible area of the screen. The OS provides special services to complete the screen stretching and mouse position mapping. Another solution is to consider, at the beginning of application development, allowing configuration options to support preconfigured display densities and aspect ratios provided by the Android SDK, such as screens with a resolution of 640 × 480, 960 × 720, or 1,080 × 800 pixels. This way, if the final dimension deformation is acceptable, the application may automatically stretch the window to cover the whole screen.</div></div><div id="Sec17" class="Section3 RenderAsSection3"><h4 class="Heading">How to Solve Hover-Over Problems</h4><div class="Para">Many applications allow hover-over operations: that is, users can place the mouse over a certain object or locate the mouse over an application icon to trigger an animated item or display a tooltip. This operation is commonly used to provide instructions for new players in games; but it is not compatible with the characteristics of tap-only touch screens, because they do not support the mouse hover-over operation.</div><div class="Para">You should consider selecting an alternative event to trigger animations or tips. For example, when the user touches the operation of applications, relevant animated themes and tips are triggered automatically. Another method is to design an interface interaction mode that temporarily interprets tap events as mouse hover-over events. For example, the action of pressing a certain button and moving the cursor would not be interpreted as a tap operation.</div></div><div id="Sec18" class="Section3 RenderAsSection3"><h4 class="Heading">Providing Right-Click Functionality</h4><div class="Para">As mentioned before, tap-only touch screens generally do not support right-click operations on mice. A commonly used alternative is a delayed touch (much longer than the tap time) to represent a right-click. This could result in the wrong operation occurring if the user accidentally releases their finger too soon. In addition, this method cannot perform simultaneous left-click and right-click (also known as <span class="EmphasisTypeItalic">double-click</span>).</div><div class="Para">You should provide a user-interaction interface that can replace the right-click function: for example, using double-click or installing a clickable control on the screen to replace the right-click.</div></div></div><div id="Sec19" class="Section2 RenderAsSection2"><h3 class="Heading">Keyboard Input Problems</h3><div class="Para">As mentioned earlier, desktop computers use full keyboards, whereas Android systems usually have much simpler keypads, button panels, user-programmable buttons, and a limited number of other input devices. These limitations cause some problems when designing embedded applications that are not seen in desktop systems.</div><div id="Sec20" class="Section3 RenderAsSection3"><h4 class="Heading">Restricting the Input of Various Commands</h4><div class="Para">The keyboard limitations on Android systems make it difficult for users to type a large number of characters. Therefore, applications that require users to input many characters, especially those depending on command input, need appropriate adjustments when migrating to an Android system.</div><div class="Para">One solution is to provide an input mode that restricts the number of characters by reducing the number of commands or selectively using convenient tools like menu item shortcut keys. A more flexible solution is to create command buttons on the screen, especially context-sensitive buttons (that is, buttons that appear only when needed).</div></div><div id="Sec21" class="Section3 RenderAsSection3"><h4 class="Heading">Meeting Keyboard Demand</h4><div class="Para">Applications need keyboard input, such as naming a file, creating personal data, saving progress, and supporting online chat. Most applications tend to use the screen keyboard to input characters, but the screen keyboard does not always run or show at the front of the application interface, making character-input problems hard to solve.</div><div class="Para">One solution is to either design a mode without explicit conflict with the onscreen keyboard application (for example, not using the full-screen default operation mode) for applications, or provide an onscreen keyboard in the UI that appears only when needed. Another simple way of minimizing keyboard input is to provide default text string values, such as default names of personal data and default names of saved files, and allow users to select by touching. To obtain other information required by the text string (for example, prefix and suffix of file names), you can add a selection button that provides a list of character strings you’ve established, from which the user can select. The name of a saved file can also be uniquely obtained by combining various user information items extracted from the screen or even using the date-time stamp. Some text input services (such as a chat service) should be disabled if they are not the core functions of an application. This will not cause any negative impact on the user experience.</div></div></div><div id="Sec22" class="Section2 RenderAsSection2"><h3 class="Heading">Software Distribution and Copyright Protection Problems</h3><div class="Para">Desktop computers are generally equipped with CD-ROM/DVD drives, and their software is generally distributed via CD/DVD. In addition, for anti-piracy purposes, CD/DVD installation usually requires users to verify the ownership of the disk or load contents dynamically from the CD/DVD, especially video files. However, Android systems (smartphones and tablets, for instance) generally do not have CD-ROM/DVD drives; Android does support an external microSD card, but directly installing an application from it is still not supported.</div><div class="Para">A good solution is to allow users to download or install applications via the Internet instead of installing from CD/DVD. Consumers buy and install applications directly from application stores such as the Apple App store, Google Play, and Amazon Appstore. This popular software release model allows mobile developers to use certificates, online accounts, or other software-based ways to verify ownership, instead of physical CD/DVDs. Similarly, you should consider providing the option of placing content on an online cloud service instead of requiring users to download videos and other content from a CD/DVD.</div></div></div><div id="Sec23" class="Section1 RenderAsSection1"><h2 class="Heading">Android Application Overview</h2><div class="Para">The following sections describe the application file framework and component structure of Android applications.</div><div id="Sec24" class="Section2 RenderAsSection2"><h3 class="Heading">Application File Framework</h3><div class="Para">Figure <span class="InternalRef"><a href="#Fig4">7-4</a></span> shows the file structure after the generation of the HelloAndroid app (this is an Eclipse screen shot).<div class="Figure" id="Fig4"><div class="MediaObject" id="MO5"><img src="A978-1-4842-0100-8_7_Fig4_HTML.jpg" alt="A978-1-4842-0100-8_7_Fig4_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 7-4.</span><div class="SimplePara">Example file structure of an Android project</div></div></div></div>
            </div><div class="Para">Even if you are not using Eclipse, you can directly access the project folder and see the same file structure, as listed next:</div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">E:\Android Dev\workspace\HelloAndroid&gt;TREE /F</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">E:.</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  .classpath</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  .project</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  AndroidManifest.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ic_launcher-web.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  proguard-project.txt</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  project.properties</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">├─.settings</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      org.eclipse.jdt.core.prefs</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">├─assets</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">├─bin</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │  AndroidManifest.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │  classes.dex</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │  HelloAndroid.apk</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │  resources.ap_</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─classes</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │  └─com</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      └─example</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │          └─helloandroid</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  BuildConfig.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  MainActivity.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R$attr.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R$dimen.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R$drawable.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R$id.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R$layout.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R$menu.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R$string.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R$style.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │                  R.class</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  └─res</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      ├─drawable-hdpi</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      │      ic_action_search.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      │      ic_launcher.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      ├─drawable-ldpi</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      │      ic_launcher.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      ├─drawable-mdpi</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      │      ic_action_search.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      │      ic_launcher.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      └─drawable-xhdpi</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│              ic_action_search.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│              ic_launcher.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">├─gen</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  └─com</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      └─example</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│          └─helloandroid</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│                  BuildConfig.java</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│                  R.java</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">├─libs</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│      android-support-v4.jar</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">├─res</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─drawable-hdpi</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      ic_action_search.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      ic_launcher.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─drawable-ldpi</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      ic_launcher.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─drawable-mdpi</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      ic_action_search.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      ic_launcher.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─drawable-xhdpi</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      ic_action_search.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      ic_launcher.png</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─layout</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      activity_main.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─menu</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      activity_main.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─values</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      dimens.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      strings.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      styles.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─values-large</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      dimens.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  ├─values-v11</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │      styles.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  │</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│  └─values-v14</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│          styles.xml</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">│</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">└─src</span>
            </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">└─com</span>
            </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">└─example</span>
            </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">└─helloandroid</span>
            </div><div class="Para ParaTypeProgramcode">                    <span class="EmphasisFontCategoryNonProportional">MainActivity.java</span>
            </div><div class="Para">Let’s explain the features of this Android project file structure:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">
                    <span class="EmphasisFontCategoryNonProportional">src</span>
                    <span class="EmphasisTypeItalic">directory</span>: Contains all source files.</div></li><li><div class="Para">
                    <span class="EmphasisFontCategoryNonProportional">R.java</span>
                    <span class="EmphasisTypeItalic">file</span>: Is automatically generated by the Android SDK integrated in Eclipse. You do not need to modify its contents.</div></li><li><div class="Para">
                    <span class="EmphasisTypeItalic">Android library</span>: A set of Java libraries used by Android applications.</div></li><li><div class="Para">
                    <span class="EmphasisFontCategoryNonProportional">assets</span>
                    <span class="EmphasisTypeItalic">directory</span>: Stores mostly multimedia files and other files.</div></li><li><div class="Para">
                    <span class="EmphasisFontCategoryNonProportional">res</span>
                    <span class="EmphasisTypeItalic">directory</span>: Stores preconfigured resource files such as drawable layouts used by applications.</div></li><li><div class="Para">
                    <span class="EmphasisFontCategoryNonProportional">values</span>
                    <span class="EmphasisTypeItalic">directory</span>: Stores mostly <span class="EmphasisFontCategoryNonProportional">strings.xml</span>, <span class="EmphasisFontCategoryNonProportional">colors.xml</span>, and <span class="EmphasisFontCategoryNonProportional">arrays.xml</span>.</div></li><li><div class="Para">
                    <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span>: Equivalent to an application configuration file. Contains the application’s name, activity, services, providers, receivers, permissions, and so on.</div></li><li><div class="Para">
                    <span class="EmphasisFontCategoryNonProportional">drawable</span>
                    <span class="EmphasisTypeItalic">directory</span>: Stores mostly image resources used by applications.</div></li><li><div class="Para">
                    <span class="EmphasisFontCategoryNonProportional">layout</span>
                    <span class="EmphasisTypeItalic">directory</span>: Stores mostly layout files used by applications. These layout files are XML files.</div></li></ul></div>
            </div><div class="Para">Similar to general Java projects, a <span class="EmphasisFontCategoryNonProportional">src</span> folder contains all the <span class="EmphasisFontCategoryNonProportional">.java</span> files for a project; and a <span class="EmphasisFontCategoryNonProportional">res</span> folder contains all the project resources, such as application icons (drawable), layout files, and constant values.</div><div class="Para">The next sections introduce the <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> file, a must-have of every Android project, and the <span class="EmphasisFontCategoryNonProportional">R.java</span> file in the <span class="EmphasisFontCategoryNonProportional">gen</span> folder, which is included in other Java projects.</div><div id="Sec25" class="Section3 RenderAsSection3"><h4 class="Heading">AndroidManifest.xml</h4><div class="Para">The file contains information about your app essential to the Android system, which the system must have before it can run any of the app’s code. This information includes activities, services, permissions, providers, and receivers used in the project. An example is shown in Figure <span class="InternalRef"><a href="#Fig5">7-5</a></span>.<div class="Figure" id="Fig5"><div class="MediaObject" id="MO6"><img src="A978-1-4842-0100-8_7_Fig5_HTML.jpg" alt="A978-1-4842-0100-8_7_Fig5_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 7-5.</span><div class="SimplePara">The content of <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> displayed in Eclipse</div></div></div></div>
              </div><div class="Para">The file’s code is as follows:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">&lt;manifest xmlns:android="</span>
                <span class="ExternalRef"><a href="http://schemas.android.com/apk/res/android"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional">http://schemas.android.com/apk/res/android</span>
                  </span></a></span>
                <span class="EmphasisFontCategoryNonProportional">"</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">package="com.example.helloandroid"</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">android:versionCode="1"</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">android:versionName="1.0" &gt;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">&lt;uses-sdk</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:minSdkVersion="8"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:targetSdkVersion="15" /&gt;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">&lt;application</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:icon="@drawable/ic_launcher"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:label="@string/app_name"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:theme="@style/AppTheme" &gt;</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">&lt;activity</span>
              </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">android:name=".MyMainActivity"</span>
              </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">android:label="@string/title_activity_my_main" &gt;</span>
              </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">&lt;intent-filter&gt;</span>
              </div><div class="Para ParaTypeProgramcode">                <span class="EmphasisFontCategoryNonProportional">&lt;action android:name="android.intent.action.MAIN" /&gt;</span>
              </div><div class="Para ParaTypeProgramcode">                <span class="EmphasisFontCategoryNonProportional">&lt;category android:name="android.intent.category.LAUNCHER" /&gt;</span>
              </div><div class="Para ParaTypeProgramcode">            <span class="EmphasisFontCategoryNonProportional">&lt;/intent-filter&gt;</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">&lt;/activity&gt;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">&lt;/application&gt;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">&lt;/manifest&gt;</span>
              </div><div class="Para">The <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> file is a text file in XML format, with each attribute defined by a <span class="EmphasisFontCategoryNonProportional">name = value</span> pair. For example, in Android, <span class="EmphasisFontCategoryNonProportional">label = "@ string / title_activity_my_main", label</span> indicates the name of the Android application as <span class="EmphasisFontCategoryNonProportional">activity_my_main</span>.</div><div class="Para">An element consists of one or more attributes, and each element is enclosed by the start (<span class="EmphasisFontCategoryNonProportional">&lt;</span>) and end (<span class="EmphasisFontCategoryNonProportional">/&gt;</span>) tags:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">&lt;Type Name [attribute set]&gt; Content &lt;/ type name&gt;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">&lt;Type Name  Content /&gt;</span>
              </div><div class="Para">The format <span class="EmphasisFontCategoryNonProportional">[attribute set]</span> can be omitted; for example, the <span class="EmphasisFontCategoryNonProportional">&lt;intent-filter&gt; ... &lt;/ intent-filter&gt;</span> text segment corresponds to the activity content of the element, and <span class="EmphasisFontCategoryNonProportional">&lt;action... /&gt;</span> corresponds to the <span class="EmphasisFontCategoryNonProportional">action</span> element.</div><div class="Para">XML elements are nested in layers to indicate their affiliation, as shown in the previous example. The <span class="EmphasisFontCategoryNonProportional">action</span> element is nested within the <span class="EmphasisFontCategoryNonProportional">intent-filter</span> element, which illustrates certain aspects of the properties or settings of <span class="EmphasisFontCategoryNonProportional">intent-filter</span>. Detailed information about XML is beyond the scope of this book, but many excellent XML books are available.</div><div class="Para">In the example, <span class="EmphasisFontCategoryNonProportional">intent-filter</span> describes the location and time when an activity is launched and creates an <span class="EmphasisFontCategoryNonProportional">intent</span> object whenever an activity (or OS) is to execute an operation. The information carried by the <span class="EmphasisFontCategoryNonProportional">intent</span> object can describe what you want to do, which data and type of data you want to process, and other information. Android compares the <span class="EmphasisFontCategoryNonProportional">intent-filter</span> data exposed by each application and finds the most suitable activity to handle the data and operations specified by the caller.</div><div class="Para">Descriptions for the main attribute entries in the <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> file are listed in Table <span class="InternalRef"><a href="#Tab2">7-2</a></span>.<div id="Tab2" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 7-2.</span><div class="SimplePara">The Main Attribute Entries in the <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> File</div></div></div><table border="1"><colgroup><col/><col/></colgroup><thead><tr class="header"><th><div class="SimplePara">Parameter</div></th><th><div class="SimplePara">Description</div></th></tr></thead><tbody><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Manifest</span>
                          </div></td><td><div class="SimplePara">Root node that contains all contents in the package.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">xmlns:android</span>
                          </div></td><td><div class="SimplePara">Contains the manifest of the namespace.</div><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">xmlns:android=</span>
                            <span class="ExternalRef"><a href="http://schemas.android.com/apk/res/android"><span class="RefSource">
                                <span class="EmphasisFontCategoryNonProportional">http://schemas.android.com/apk/res/android</span>
                              </span></a></span>. Makes various standard properties usable in the file and provides data to most elements.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">package</span>
                          </div></td><td><div class="SimplePara">Package of manifest application.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Application</span>
                          </div></td><td><div class="SimplePara">Contains the root node of the application-level component manifest in the package. This element can also contain some global and default properties for the application, such as label, icon, theme, and necessary permissions. One manifest may contain zero or one (no more than one) element.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">android:icon</span>
                          </div></td><td><div class="SimplePara">Icon of the application.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">android:label</span>
                          </div></td><td><div class="SimplePara">Name of the application.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Activity</span>
                          </div></td><td><div class="SimplePara">Name of the initial page to load when users start the application. It is an important tool for user interaction. Most other pages are displayed when other activities are performed or manifested by other activity flags.</div><div class="SimplePara">Note: Each activity must have a corresponding <span class="EmphasisFontCategoryNonProportional">&lt;activity&gt;</span> flag whether it is used externally or in its own package. If an activity has no corresponding flag, you cannot operate it. In addition, to support a searching activity, an activity can contain one or several <span class="EmphasisFontCategoryNonProportional">&lt;intent-filter&gt;</span> elements to describe the operations it supports.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">android:name</span>
                          </div></td><td><div class="SimplePara">Default activity launched by the application.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">intent-filter</span>
                          </div></td><td><div class="SimplePara">Is formed by manifesting the <span class="EmphasisFontCategoryNonProportional">intent</span> value supported by a designated component. In addition to specifying different types of values, <span class="EmphasisFontCategoryNonProportional">intent-filter</span> can specify properties for describing a unique label, icon, or other information required by an operation.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Action</span>
                          </div></td><td><div class="SimplePara">Intent action supported by a component.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Category</span>
                          </div></td><td><div class="SimplePara">Intent category supported by a component. The default activity launched by the application is designated here.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">uses-sdk</span>
                          </div></td><td><div class="SimplePara">Related to the SDK version used by the application.</div></td></tr></tbody></table></div>
              </div></div><div id="Sec26" class="Section3 RenderAsSection3"><h4 class="Heading">R.java</h4><div class="Para">The <span class="EmphasisFontCategoryNonProportional">R.java</span> file is generated automatically when a project is created. It is a read-only file and cannot be modified. R.java is an index file defining all resources of the project. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">/* AUTO-GENERATED FILE.  DO NOT MODIFY.</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">... ...</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">*/</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">package com.example.helloandroid;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">public final class R {</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public static final class attr {</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public static final class dimen {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int padding_large=0x7f040002;</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int padding_medium=0x7f040001;</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int padding_small=0x7f040000;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public static final class drawable {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int ic_action_search=0x7f020000;</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int ic_launcher=0x7f020001;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public static final class id {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int menu_settings=0x7f080000;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public static final class layout {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int activity_my_main=0x7f030000;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public static final class menu {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int activity_my_main=0x7f070000;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public static final class string {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int app_name=0x7f050000;</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int hello_world=0x7f050001;</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int menu_settings=0x7f050002;</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int title_activity_my_main=0x7f050003;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public static final class style {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">public static final int AppTheme=0x7f060000;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para">You can see that many constants are defined in this code. The names of these constants are the same as the file names in the <span class="EmphasisFontCategoryNonProportional">res</span> folder, which proves that the <span class="EmphasisFontCategoryNonProportional">R.java</span> file stores the index of all resources of the project. With this file, it is more convenient to use resources in applications and identify the resources required. Because this file does not allow manual editing, you only need to refresh the project when adding new resources to it. The <span class="EmphasisFontCategoryNonProportional">R.java</span> file automatically generates the index of all resources.</div></div><div id="Sec27" class="Section3 RenderAsSection3"><h4 class="Heading">Definition File of Constants</h4><div class="Para">The <span class="EmphasisFontCategoryNonProportional">values</span> subdirectory of the project contains a definition file for the strings, colors, and array constants; the string constant definitions are in the <span class="EmphasisFontCategoryNonProportional">strings.xml</span> file. These constants are used by other files in the Android project.</div><div class="Para">Eclipse provides two graphic view tabs, Resources and strings.xml, for the <span class="EmphasisFontCategoryNonProportional">strings.xml</span> file. The Resources tab provides a structured view of the <span class="EmphasisFontCategoryNonProportional">name-value</span>, and the strings.xml tab directly displays the contents of a text file format. The <span class="EmphasisFontCategoryNonProportional">strings.xml</span> file of the HelloAndroid example is shown in Figure <span class="InternalRef"><a href="#Fig6">7-6</a></span>.<div class="Figure" id="Fig6"><div class="MediaObject" id="MO7"><img src="A978-1-4842-0100-8_7_Fig6_HTML.jpg" alt="A978-1-4842-0100-8_7_Fig6_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 7-6.</span><div class="SimplePara">IDE graphic view of the <span class="EmphasisFontCategoryNonProportional">strings.xml</span> file of HelloAndroid</div></div></div></div>
              </div><div class="Para">The file content is as follows:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">&lt;resources&gt;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">&lt;string name="app_name"&gt;HelloAndroid&lt;/string&gt;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">&lt;string name="hello_world"&gt;Hello world!&lt;/string&gt;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">&lt;string name="menu_settings"&gt;Settings&lt;/string&gt;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">&lt;string name="title_activity_main"&gt;MainActivity&lt;/string&gt;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">&lt;/resources&gt;</span>
              </div><div class="Para">The code is very simple; it only defines four string constants (resources).</div></div><div id="Sec28" class="Section3 RenderAsSection3"><h4 class="Heading">Layout Files</h4><div class="Para">Layout files describe the size, location, and arrangement of each screen <span class="EmphasisTypeItalic">widget</span> (combination of <span class="EmphasisTypeItalic">window</span> and <span class="EmphasisTypeItalic">gadget</span>). A layout file is the “face” of the application. Layout files are text files in XML format.</div><div class="Para">Widgets are visual UI elements, such as buttons and text boxes. They are equivalent to controls and containers in the Windows system terminology. Buttons, text boxes, scroll bars, and so forth are widgets. In the Android OS, widgets generally belong to the <span class="EmphasisFontCategoryNonProportional">View</span> class and its descendant classes and are stored in the <span class="EmphasisFontCategoryNonProportional">android.widget</span> package.</div><div class="Para">An application has a main layout file corresponding to the application’s screen display at startup. For example, the layout file and the main interface of the HelloAndroid example are shown in Figure <span class="InternalRef"><a href="#Fig7">7-7</a></span>. When an application is created, Eclipse automatically generates a layout file for the application’s main screen display. The file is located in the project folder’s <span class="EmphasisFontCategoryNonProportional">res\layout</span> directory. The file name in the generated application projects is specified in the next section: in this case, the source code file name corresponds to the <span class="EmphasisFontCategoryNonProportional">[Layout Name]</span> key, so the file is named <span class="EmphasisFontCategoryNonProportional">activity_main.xml</span>.<div class="Figure" id="Fig7"><div class="MediaObject" id="MO8"><img src="A978-1-4842-0100-8_7_Fig7_HTML.jpg" alt="A978-1-4842-0100-8_7_Fig7_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 7-7.</span><div class="SimplePara">The main graphic layout and user interface</div></div></div></div>
              </div><div class="Para">When you click the design window (in this case, <span class="EmphasisFontCategoryNonProportional">activity_main.xml</span>), you can see the corresponding contents of the XML-formatted text file, as shown in Figure <span class="InternalRef"><a href="#Fig8">7-8</a></span>.<div class="Figure" id="Fig8"><div class="MediaObject" id="MO9"><img src="A978-1-4842-0100-8_7_Fig8_HTML.jpg" alt="A978-1-4842-0100-8_7_Fig8_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 7-8.</span><div class="SimplePara">The main layout file of the HelloAndroid example</div></div></div></div>
              </div><div class="Para">The contents of the file are as follows:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">&lt;RelativeLayout xmlns:android="</span>
                <span class="ExternalRef"><a href="http://schemas.android.com/apk/res/android"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional">http://schemas.android.com/apk/res/android</span>
                  </span></a></span>
                <span class="EmphasisFontCategoryNonProportional">"</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">xmlns:tools="</span>
                <span class="ExternalRef"><a href="http://schemas.android.com/tools"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional">http://schemas.android.com/tools</span>
                  </span></a></span>
                <span class="EmphasisFontCategoryNonProportional">"</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">android:layout_width="match_parent"</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">android:layout_height="match_parent" &gt;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">&lt;TextView</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:layout_width="wrap_content"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:layout_height="wrap_content"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:layout_centerHorizontal="true"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:layout_centerVertical="true"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:padding="@dimen/padding_medium"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">android:text="@string/hello_world"</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">tools:context=".MainActivity" /&gt;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">&lt;/RelativeLayout&gt;</span>
              </div><div class="Para">In this code, there are several layout parameters:
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">&lt;RelativeLayout&gt;</span>: The layout configuration for the relative position.</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">android:layout_width</span>: Customizes the screen width of the current view; <span class="EmphasisFontCategoryNonProportional">match_parent</span> represents the parent container (in this case, the activity) match; <span class="EmphasisFontCategoryNonProportional">fill_parent</span> fills the entire screen; <span class="EmphasisFontCategoryNonProportional">wrap_content</span>, expressed as text fields, changes depending on the width or height of this view.</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">android:layout_height</span>: Customizes the screen height occupied by the current view.</div></li></ul></div>
              </div><div class="Para">Two other common parameters, not shown in this layout file, are as follows:
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">android:orientation</span>: Here means the layout is arranged horizontally.</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">android:layout_weight</span>: Give a value for the importance assigned to multiple views of a linear layout. All views are given a <span class="EmphasisFontCategoryNonProportional">layout_weight</span> value; the default is zero.</div></li></ul></div>
              </div><div class="Para">Although the layout file is an XML file, you do not have to understand its format or directly edit it, because the Android Development Tools and Eclipse provide a visual design interface. You simply drag and drop widgets and set the corresponding properties in Eclipse, and your actions are automatically recorded in the layout file. You can see how this works when you walk though the application development example in following sections.</div></div><div id="Sec29" class="Section3 RenderAsSection3"><h4 class="Heading">Source Code File</h4><div class="Para">When a project is built, Eclipse generates a default <span class="EmphasisFontCategoryNonProportional">.java</span> source code file that contains the application basic runtime code for the project. It is located in the project folder under the <span class="EmphasisFontCategoryNonProportional">src\com\example\XXX</span> directory (where <span class="EmphasisFontCategoryNonProportional">XXX</span> is the project name). The file name of the generated application projects in this case is the source code file name that corresponds to the <span class="EmphasisFontCategoryNonProportional">[Activity Name]</span> key, so the file is named <span class="EmphasisFontCategoryNonProportional">MainActivity.java</span>.</div><div class="Para">The content of <span class="EmphasisFontCategoryNonProportional">MainActivity.java</span> is as follows:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">package com.example.flashlight;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">import android.os.Bundle;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">import android.app.Activity;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">import android.view.Menu;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">import android.view.MenuItem;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">import android.support.v4.app.NavUtils;</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">public class MyMainActivity extends Activity {</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">@Override</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public void onCreate(Bundle savedInstanceState) {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">super.onCreate(savedInstanceState);</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">setContentView(R.layout.activity_my_main);</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">@Override</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">public boolean onCreateOptionsMenu(Menu menu) {</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">getMenuInflater().inflate(R.menu.activity_my_main, menu);</span>
              </div><div class="Para ParaTypeProgramcode">        <span class="EmphasisFontCategoryNonProportional">return true;</span>
              </div><div class="Para ParaTypeProgramcode">    <span class="EmphasisFontCategoryNonProportional">}</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">}</span>
              </div></div></div><div id="Sec30" class="Section2 RenderAsSection2"><h3 class="Heading">Component Structure of Applications</h3><div class="Para">The Android application framework provides APIs for developers. Because the application is built in Java, the first level of the program contains the UI needs of the various controls. For example, views (<span class="EmphasisFontCategoryNonProportional">View</span> components) contain lists, grids, text boxes, buttons, and even an embedded web browser.</div><div class="Para">An Android application usually consists of five components:
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">Activity</div></li><li><div class="Para">Intent receiver</div></li><li><div class="Para">Service</div></li><li><div class="Para">Content provider</div></li><li><div class="Para">Intent and intent filters</div></li></ul></div>
            </div><div class="Para">The following sections discuss each components a bit more.</div><div id="Sec31" class="Section3 RenderAsSection3"><h4 class="Heading">Activity</h4><div class="Para">Applications with visual UIs are implemented using activities. When a user selects an application from the main screen or an application launcher, it starts an action or an activity. Each activity program typically takes the form of a separate interface (screen). Each activity is a separate class that extends and implements the activity’s base class. This class is shown as the UI, consisting of <span class="EmphasisFontCategoryNonProportional">View</span> components responding to events.</div><div class="Para">Most programs have multiple activities (in other words, an Android application is composed of one or more activities). Switching to another interface loads a new activity. In some cases, a previous activity may give a return value. For example, an activity that lets the user select a photo returns the photo to the caller.</div><div class="Para">When a user opens a new interface, the old interface is suspended and placed in the history stack (interface-switching history stack). The user can go back to an activity that has been opened in the history stack interface. A stack that has no historical value can be removed from the history stack interface. Android retains all generated interfaces in the history stack for running the application, from the first interface to the last one.</div><div class="Para">An activity is a container, which itself is not displayed in the UI. You can roughly imagine an activity as a window in the Windows OS, but the view window is not only for displaying but also for completing a task.</div></div><div id="Sec32" class="Section3 RenderAsSection3"><h4 class="Heading">Intent and Intent Filters</h4><div class="Para">Android achieves interface switching through a special class called <span class="EmphasisFontCategoryNonProportional">intent</span>. An <span class="EmphasisFontCategoryNonProportional">intent</span> describes what the program does. The two most important parts of the data structure are the action and the data processed in accordance with established rules (data). Typical operations are <span class="EmphasisFontCategoryNonProportional">MAIN</span> (activity entrance), <span class="EmphasisFontCategoryNonProportional">VIEW</span>, <span class="EmphasisFontCategoryNonProportional">PICK</span>, and <span class="EmphasisFontCategoryNonProportional">EDIT</span>. Data to be used in the operation is presented using a Universal Resource Identifier (URI). For example, to view a person’s contact information, you need to create an <span class="EmphasisFontCategoryNonProportional">intent</span> using the <span class="EmphasisFontCategoryNonProportional">VIEW</span> operation, and the data is a pointer to the person’s URI.</div><div class="Para">A class associated with an <span class="EmphasisFontCategoryNonProportional">intent</span> is called an <span class="EmphasisFontCategoryNonProportional">IntentFilter</span>. An <span class="EmphasisFontCategoryNonProportional">intent</span> encapsulates a request as an object; <span class="EmphasisFontCategoryNonProportional">IntentFilter</span> then describes what intentions an activity (or, say, an intent receiver, explained in a moment) can process. In the previous example, the activity that shows a person’s contact information uses an <span class="EmphasisFontCategoryNonProportional">IntentFilter</span>, and it knows how to handle the data <span class="EmphasisFontCategoryNonProportional">VIEW</span> operation applied to this person. The activity in the <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> file using <span class="EmphasisFontCategoryNonProportional">IntentFilter</span> is usually accomplished by parsing the <span class="EmphasisFontCategoryNonProportional">intent</span> activity switch. First, it uses the <span class="EmphasisFontCategoryNonProportional">startActivity (myIntent)</span> function to start the new activity, next it systematically checks the <span class="EmphasisFontCategoryNonProportional">IntentFilter</span> of all installed programs, and then it finds the activity that is the best match with the <span class="EmphasisFontCategoryNonProportional">myIntent</span> corresponding to <span class="EmphasisFontCategoryNonProportional">IntentFilter</span>. This new activity receives the message from <span class="EmphasisFontCategoryNonProportional">intent</span> and then starts. The <span class="EmphasisFontCategoryNonProportional">intent</span>-resolution process occurs in real time in the <span class="EmphasisFontCategoryNonProportional">startActivity</span> called. This process has two advantages:
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">The activity emits only one <span class="EmphasisFontCategoryNonProportional">intent</span> request and can reuse the function of other components.</div></li><li><div class="Para">The activity can always be replaced by an equivalent new activity of the <span class="EmphasisFontCategoryNonProportional">IntentFilter</span>.</div></li></ul></div>
              </div></div><div id="Sec33" class="Section3 RenderAsSection3"><h4 class="Heading">Service</h4><div class="Para">A <span class="EmphasisTypeItalic">service</span> is a resident system program that has no UI. You should use a service for any application that needs to run continuously, such as a network monitor or checking for application updates.</div><div class="Para">The two ways of using a service are <span class="EmphasisTypeItalic">start-stop mode</span> and <span class="EmphasisTypeItalic">bind-unbind mode</span>. The process flow chart and functions are shown in Table <span class="InternalRef"><a href="#Tab3">7-3</a></span>.<div id="Tab3" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 7-3.</span><div class="SimplePara">The Usage Model of a Service</div></div></div><table border="1"><colgroup><col/><col/><col/><col/><col/></colgroup><thead><tr class="header"><th><div class="SimplePara">Mode</div></th><th><div class="SimplePara">Start</div></th><th><div class="SimplePara">End</div></th><th><div class="SimplePara">Visit</div></th><th><div class="SimplePara">Notes</div></th></tr></thead><tbody><tr class="noclass"><td><div class="SimplePara">Start/stop</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Context.startService()</span>
                          </div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Context.stopService()</span>
                          </div></td><td> </td><td><div class="SimplePara">Even if the process of the <span class="EmphasisFontCategoryNonProportional">startService</span> call is ended, the service is still there until the process calls <span class="EmphasisFontCategoryNonProportional">stopService()</span> or the service causes its own demise (<span class="EmphasisFontCategoryNonProportional">stopSelf()</span> is called).</div></td></tr><tr class="noclass"><td><div class="SimplePara">Bind/unbind</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Context.bindService()</span>
                          </div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Context.unbindService()</span>
                          </div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">Context.ServiceConnection()</span>
                          </div></td><td><div class="SimplePara">When calling <span class="EmphasisFontCategoryNonProportional">bindService()</span>, the process is dead; then the service it binds to must be ended.</div></td></tr></tbody></table></div>
              </div><div class="Para">When two modes are in mixed use—for example, one mode calls <span class="EmphasisFontCategoryNonProportional">startService()</span> and other modes call <span class="EmphasisFontCategoryNonProportional">bindService()</span>—then only when both the <span class="EmphasisFontCategoryNonProportional">stopService</span> call and the <span class="EmphasisFontCategoryNonProportional">unbindService</span> call occur will the service be terminated.</div><div class="Para">A service process has its own life cycle, and Android tries to keep a service process that has been started or bound. The service process is described as follows:
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">If the service is the implementation process of the method <span class="EmphasisFontCategoryNonProportional">onCreate()</span>, <span class="EmphasisFontCategoryNonProportional">onStart</span>, or <span class="EmphasisFontCategoryNonProportional">onDestroy()</span>, then the main process becomes a foreground process to ensure that this code is not stopped.</div></li><li><div class="Para">If the service has started, the value of its importance is lower than that of the visible process but above all invisible processes. Because only a few processes are visible to the user, as long as the memory is not particularly low, the service does not stop.</div></li><li><div class="Para">If multiple clients have bound to the service, as long as any one of the clients is visible to the user, that service is visible.</div></li></ul></div>
              </div></div><div id="Sec34" class="Section3 RenderAsSection3"><h4 class="Heading">Broadcast Intent Receiver</h4><div class="Para">When you want to execute some code associated with external events, such as have a task performed in the middle of the night or respond to a phone ringing, use <span class="EmphasisFontCategoryNonProportional">IntentReceiver</span>. Intent receivers have no UI and use <span class="EmphasisFontCategoryNonProportional">NotificationManager</span> to inform users that their event has happened. An intent receiver is declared in the <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> file but can also be declared using <span class="EmphasisFontCategoryNonProportional">Context.registerReceiver()</span>. The program does not have to run continuously to wait for <span class="EmphasisFontCategoryNonProportional">IntentReceiver</span> to be called. When an intent receiver is triggered, the system starts your program. Programs can also use <span class="EmphasisFontCategoryNonProportional">Context.broadcastIntent()</span> to send their intent broadcast to other programs.</div><div class="Para">Android applications can be used to handle a data element or to respond to an event (such as receiving text messages). Android applications are deployed to the device together with an <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> file. <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> contains the necessary configuration information, so the application is properly installed on the device. <span class="EmphasisFontCategoryNonProportional">AndroidManifest.xml</span> also includes the necessary class names and the types of events that can be handled by the application, as well as the necessary permissions to run the application. For example, if an application needs to access the network—to, say, download a file—the manifest file must be explicitly listed in the license. Many applications may enable this particular license. This declarative security can help reduce the possibility of damage to equipment from malicious applications.</div></div></div><div id="Sec35" class="Section2 RenderAsSection2"><h3 class="Heading">Content Provider</h3><div class="Para">You can think of content providers as database servers. A content provider’s task is to manage persistent data access, such as a SQLite database. If the application is very simple, you might not need to create a content-provider application. If you want to build a larger application or need to build applications to provide data for multiple activities or applications, you can use the content provider for data access.</div><div class="Para">If you want other programs to use their own programs’ data, a content provider is very useful. The content-provider class implements a series of standard methods that allows other programs to store and read data that can be processed by the content provider.</div></div><div id="Sec36" class="Section2 RenderAsSection2"><h3 class="Heading">Android Emulator</h3><div class="Para">Android does not use the ordinary Java virtual machine (JVM); it uses the Dalvik virtual machine (DVM) instead. The DVM and JVM are fundamentally different. The DVM takes up less memory, is specifically optimized for mobile devices, and is more suitable for mobile phones used in embedded environments. Other differences are as follows:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">The general JVM is based on the stack-based virtual machine, but the DVM is a register-based virtual machine. The latter is better because applications can achieve maximum optimization based on the hardware, which is more in line with the characteristics of mobile devices.</div></li><li><div class="Para">The DVM can run multiple virtual machine instances simultaneously in limited memory, so that each DVM application executes as a separate Linux process. In the general JVM, all applications run in a shared JVM, and therefore individual applications are not running as separate processes. With each application running as a separate process, the DVM can be prevented from closing all programs in the event of the collapse of the virtual machine.</div></li><li><div class="Para">The DVM provides a less restrictive license platform than the general JVM. The DVM and JVM support different generic code. The DVM does not run standard Java bytecode, but rather Dalvik executable format (<span class="EmphasisFontCategoryNonProportional">.dex</span>). Java code compilation of Android applications actually consists of two processes. The first step is to compile the Java source code into normal JVM executable code, which uses the file-name suffix <span class="EmphasisFontCategoryNonProportional">.class.</span> The second step is to compile the bytecode into Dalvik execution code, which uses the file-name suffix <span class="EmphasisFontCategoryNonProportional">.dex</span>. The first step compiles the source code files under the <span class="EmphasisFontCategoryNonProportional">src</span> subdirectory in the project directory into <span class="EmphasisFontCategoryNonProportional">.class</span> files in the <span class="EmphasisFontCategoryNonProportional">bin\class</span> directory; and the second step moves the files from the <span class="EmphasisFontCategoryNonProportional">bin\class</span> subdirectory to <span class="EmphasisFontCategoryNonProportional">classes.dex</span> files in the <span class="EmphasisFontCategoryNonProportional">bin</span> directory. The compilation process is integrated into the Eclipse build process; however, you can also use the command line to compile manually.</div></li></ul></div>
            </div></div><div id="Sec37" class="Section2 RenderAsSection2"><h3 class="Heading">Introducing Android Runtime (ART)</h3><div class="Para">ART is an Android runtime that first became available in Google Android KitKat (4.4) as a preview feature. It is also called Dalvik version 2 and is under active development in the Android Open Source Project (AOSP). All smartphones and tablets with Android KitKat keep Dalvik as the default runtime. This is because some OEMs still do not support ART in Android implementations, and most third-party applications are still built based on Dalvik and have not yet added support for the new ART.</div><div class="Para">As described by Google on the Android developer site, most existing apps should work when running with ART. However, some techniques that work on Dalvik do not work on ART. The differences between Dalvik and ART are shown in Table <span class="InternalRef"><a href="#Tab4">7-4</a></span>.<div id="Tab4" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 7-4.</span><div class="SimplePara">Dalvik vs. ART Summary</div></div></div><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr class="header"><th> </th><th><div class="SimplePara">Dalvik</div></th><th><div class="SimplePara">ART</div></th></tr></thead><tbody><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisTypeBold">Application</span>
                        </div></td><td><div class="SimplePara">APK package with DEX class file</div></td><td><div class="SimplePara">Same as Dalvik</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisTypeBold">Compile Type</span>
                        </div></td><td><div class="SimplePara">Dynamic compilation (JIT)</div></td><td><div class="SimplePara">Ahead-of-time compilation (AOT)</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisTypeBold">Functionality</span>
                        </div></td><td><div class="SimplePara">Stable and went through extensive QA</div></td><td><div class="SimplePara">Basic functionality and stability</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisTypeBold">Installation Time</span>
                        </div></td><td><div class="SimplePara">Faster</div></td><td><div class="SimplePara">Slower due to compilation</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisTypeBold">App Launch Time</span>
                        </div></td><td><div class="SimplePara">Mostly slower due to JIT compilation and interpretation</div></td><td><div class="SimplePara">Mostly faster due to AOT compilation</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisTypeBold">Storage Footprint</span>
                        </div></td><td><div class="SimplePara">Smaller</div></td><td><div class="SimplePara">Larger, with precompiled binary</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisTypeBold">Memory Footprint</span>
                        </div></td><td><div class="SimplePara">Larger due to JIT code cache</div></td><td><div class="SimplePara">Smaller</div></td></tr></tbody></table></div>
            </div><div class="Para">ART offers some new features to help with application development, performance optimization, and debugging, such as support for the sampling profiler and debugging features like monitoring and garbage collection. Transitioning from Dalvik to ART is likely to take some time, and Dalvik and ART will both be provided in Android to allow smartphone and tablet users to select and switch. However, future 64-bit Android will be based on ART.</div></div></div><div id="Sec38" class="Section1 RenderAsSection1"><h2 class="Heading">Summary</h2><div class="Para">This chapter introduced the general GUI design method for desktop systems and then showed how designing the UI and UX for embedded systems is different. You should now understand the general methods and principles of GUI design for Android applications and be ready to learn about the Android-specific GUI. The next chapter describes the state transition of activities, the <span class="EmphasisFontCategoryNonProportional">Context</span> class, intent, and the relationship between applications and activities.</div></div><div class="FootnoteSection"><div class="Heading">Footnotes</div><div class="Footnote" id="Fn1"><span class="FootnoteNumber"><a href="#Fn1_source">1</a></span><div class="FootnoteParas"><div class="Para">A typical example is the game Counter-Strike (CS).</div></div><div class="ClearBoth"> </div></div></div></div></body></html>
