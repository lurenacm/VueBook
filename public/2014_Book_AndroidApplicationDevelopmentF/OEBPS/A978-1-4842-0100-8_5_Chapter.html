<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><title>The Android OS</title><link href="springer_epub.css" type="text/css" rel="styleSheet"/></head><body><div class="ChapterContextInformation"><div class="ContextInformation" id="Chap5"><div class="ChapterCopyright">© Ryan Cohen 2014</div><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">Ryan Cohen</span> and </span><span class="Author"><span class="AuthorName">Tao Wang</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" xml:lang="en">Android Application Development for the Intel<sup>®</sup> Platform</span></span><span class="ChapterDOI">10.1007/978-1-4842-0100-8_5</span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" xml:lang="en">5. The Android OS</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">Ryan Cohen</span><sup>1 <span class="ContactIcon"/></sup> and </span><span class="Author"><span class="AuthorName">Tao Wang</span><sup>1 <span class="ContactIcon"/></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff1"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">OR, USA</div></div><div class="ClearBoth"> </div></div></div><!--End Abstract--><div class="Fulltext"><div class="Para">At the heart of all compute devices is the operating system, or OS. Development and execution of application software are based on the OS and the software platform as a whole. In this chapter, you learn about the Android OS—the recommended software platform for Intel Atom-based machines—to build your competence for subsequent development of embedded applications.</div><div id="Sec1" class="Section1 RenderAsSection1"><h2 class="Heading">Android Overview</h2><div class="Para">Android is a comprehensive operating environment based on the Linux kernel (in 2014, Kernel version 3.10.x has been used by major OEMs). Initially, the deployment target for Android was the mobile phone category, including smartphones and lower-cost flip-phone devices. However, Android’s full range of computing services and rich functional support have the full potential to extend beyond the mobile phone market for use on other platforms and applications, such as tablets.</div><div class="Para">In addition to the kernel, the Android OS for x86 requires some drivers and technologies, including those commonly found on mobile devices:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">USB driver for host and client</div></li><li><div class="Para">Video driver for video encode as well as decode</div></li><li><div class="Para">Display and graphics: 2D and 3D rendering; planes, pipes, ports</div></li><li><div class="Para">Flash memory driver</div></li><li><div class="Para">Camera driver: usually a Linux-based v41 (video for) driver</div></li><li><div class="Para">Audio driver: usually an Advanced Linux Sound Architecture (ALSA) based advanced Linux (sound system) driver</div></li><li><div class="Para">Near field communication (NFC)</div></li><li><div class="Para">Wi-Fi Driver: IEEE 802.11-based driver</div></li><li><div class="Para">Keyboard driver</div></li><li><div class="Para">Security (DRM, trusted boot, and so on)</div></li><li><div class="Para">Bluetooth driver</div></li><li><div class="Para">Binder IPC: a special driver of Android, with separate device nodes to provide inter-process communications (IPC) functions</div></li><li><div class="Para">Power management: drivers for three different CPU Standby states: Active Stand-by (S0i1), Always On Always Connected (AOAC) Stand-by (S0i2), and Deep Sleep Stand-by (S0i3)</div></li></ul></div>
          </div><div class="Para">With Android’s breadth of capabilities, it would be easy to confuse it with a desktop OS; Android is a layered environment and includes rich functions.</div><div class="Para">Android applications are generally written in the Java programming language and can include many different kinds of resource files (in the <span class="EmphasisFontCategoryNonProportional">res</span> directory). An APK package is generated after the Java program and other related resources are compiled. Google also provides support for multiple APK files. This is a feature of Google Play that allows developers to publish different APKs for the application that are each targeted to different device configurations. Android offers many core applications including Home, Contact, Phone, and Browser. In addition, you can use the APIs in the application framework layer to develop your own applications.</div><div class="Para">The Android UI subsystem includes<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">Windows</div></li><li><div class="Para">Views</div></li><li><div class="Para">Widgets for displaying common elements such as edit boxes, lists, and drop-down lists</div></li></ul></div>
          </div><div class="Para">It also includes an embeddable browser built on WebKit, the same open source browser engine powering the Apple iPhone’s Mobile Safari browser.</div><div class="Para">Android boasts a healthy array of connectivity options, including Wi-Fi, Bluetooth, and wireless data over a cellular connection (for example, GPRS, EDGE, 3G, and 4G/LTE). A popular technique in Android applications is to link to Google Maps to display an address directly within an application. Support for location-based services (such as GPS) and accelerometers is also available in the Android software stack, although not all Android devices are equipped with the required hardware. There is also camera support. Historically, two areas where mobile applications have struggled to keep pace with their desktop counterparts are graphics/media and data-storage methods. Android addresses the graphics challenge with built-in support for 2D and 3D graphics, including the OpenGL ES library. The data-storage burden is eased with the popular open source SQLite database included on the Android platform.</div></div><div id="Sec2" class="Section1 RenderAsSection1"><h2 class="Heading">Android Architecture</h2><div class="Para">A simplified block diagram of the Android software architecture is shown in Figure <span class="InternalRef"><a href="#Fig1">5-1</a></span>.<div class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img src="A978-1-4842-0100-8_5_Fig1_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig1_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-1.</span><div class="SimplePara">Android software architecture</div></div></div></div>
          </div><div class="Para">As mentioned, Android runs on top of a Linux kernel. Java-based applications are run within a virtual machine (VM). It’s important to note that the VM is not a JVM, as you might expect, but is the Dalvik virtual machine (DVM), an open source technology. Each Android application runs within an instance of the DVM, which in turn resides within a Linux kernel–managed process, as shown in Figure <span class="InternalRef"><a href="#Fig2">5-2</a></span>.<div class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img src="A978-1-4842-0100-8_5_Fig2_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig2_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-2.</span><div class="SimplePara">Android application operation layer</div></div></div></div>
          </div><div class="Para">Starting with Android KitKat 4.4, Google has implemented the new Android Run Time (ART), which is also called Dalvik version 2. ART is under active development in the Android Open Source Project (AOSP) master, and future 64-bit versions of Android will be based on ART. You can find the latest information about ART at <span class="ExternalRef"><a href="https://source.android.com/devices/tech/dalvik/art.html"><span class="RefSource">
                <span class="EmphasisFontCategoryNonProportional">https://source.android.com/devices/tech/dalvik/art.html</span>
              </span></a></span>.</div></div><div id="Sec3" class="Section1 RenderAsSection1"><h2 class="Heading">Basic Android Functionality from a Programming Perspective</h2><div class="Para">Android is a version of Linux. This section recaps some basic Linux commands and common practices for Android developers with two scenarios: one based on the Android emulator provided in the Android SDK and the other for developers who own a real Android smartphone or tablet with Intel inside it (in the examples, the Lenovo K900 smartphone). If you are an experienced Android/Linux developer, you can safely skip the rest of this chapter and move to the next chapter.</div><div id="Sec4" class="Section2 RenderAsSection2"><h3 class="Heading">Android System Interface</h3><div class="Para">The Android mobile system interface is a key aspect in which major manufacturers differ. Personalized system interfaces are not only a selling point, but also a platform for mobile phone users to communicate with their friends. This section uses the Lenovo K900 smartphone as an example to discuss Android system UI design. The four-leaf clover design used by Lenovo K900 is shown in Figure <span class="InternalRef"><a href="#Fig3">5-3</a></span>.<div class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img src="A978-1-4842-0100-8_5_Fig3_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig3_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-3.</span><div class="SimplePara">Lenovo K900 main interface</div></div></div></div>
            </div><div class="Para">The Lenovo phone adopts the conventional “slide up to unlock” mode, which is simple and convenient. The shortcuts in the main interface can be changed by long-pressing a leaf, as shown in Figure <span class="InternalRef"><a href="#Fig4">5-4</a></span>. It’s worth noting that during the main interface operation, the shortcut-setting option does not appear if you click the menu key, as on some other Android phones. In addition, you cannot add or delete the home screen (the shortcuts in leaves can be changed).<div class="Figure" id="Fig4"><div class="MediaObject" id="MO4"><img src="A978-1-4842-0100-8_5_Fig4_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig4_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-4.</span><div class="SimplePara">All Menu interface</div></div></div></div>
            </div><div class="Para">The Lenovo phone’s drop-down menu is personalized and includes four options: Notification, Switch, Call, and Message. In the Switch interface, you can make quick settings for the mobile phone or long-press an option to enter the option’s detailed settings interface.</div><div class="Para">Some Android phones allow you to add widgets and shortcuts when you long-press any blank space on the interface, but the Lenovo phone doesn’t have this function. You can use the menu key to add tools and shortcut keys (except the )home screen. When you press the screen with two fingers, the multiscreen interface appears where you can perform a quick search, as shown in Figure <span class="InternalRef"><a href="#Fig5">5-5</a></span>.<div class="Figure" id="Fig5"><div class="MediaObject" id="MO5"><img src="A978-1-4842-0100-8_5_Fig5_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig5_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-5.</span><div class="SimplePara">Multiscreen interface of the Lenovo phone</div></div></div></div>
            </div><div class="Para">The menu interface in 20-rectangle-grid design is fashionable and elegant, but some icons are blurred.</div><div class="Para">The main hardware and OS configuration information of the Lenovo K900 phone are shown in Figure <span class="InternalRef"><a href="#Fig6">5-6</a></span>.<div class="Figure" id="Fig6"><div class="MediaObject" id="MO6"><img src="A978-1-4842-0100-8_5_Fig6_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig6_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-6.</span><div class="SimplePara">Parameters of the Lenovo K900 phone</div></div></div></div>
            </div><div id="Sec5" class="Section3 RenderAsSection3"><h4 class="Heading">Terminating an Application in Android</h4><div class="Para">Android offers three different methods to terminate an application, as described in the following sections.</div><div id="Sec6" class="Section4 RenderAsSection4"><h5 class="Heading">Method 1 (for Real Devices)</h5><div class="Para">
                  <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Select the following options in the mobile device menu: Settings ➤ Applications ➤ Running Services ➤ Running Applications. The applications that are executing are shown. This list may vary on different devices. For example, on the Samsung Galaxy Note, Applications is replaced with Application Manager, and on the Dell Venue (Android KitKat 4.4), it is replaced with Apps.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Click the application to delete from the list, and the Force Quit and Uninstall buttons pop up on the screen. Click Force Quit to terminate the process.</div></div><div class="ClearBoth"> </div></div></div>
                </div></div><div id="Sec7" class="Section4 RenderAsSection4"><h5 class="Heading">Method 2</h5><div class="Para">Press Return when the application occupies the current top-level window screen (that is, the application is running).</div></div><div id="Sec8" class="Section4 RenderAsSection4"><h5 class="Heading">Method 3</h5><div class="Para">Terminate the process in the Dalvik Debug Monitor Server (DDMS)on a host system. This can be achieved when the Android device is connect to a host system that has an IDE with an Android SDK that supports DDMS, such as Eclipse.</div></div></div><div id="Sec9" class="Section3 RenderAsSection3"><h4 class="Heading">Using the Web Browser in the Android Emulator</h4><div class="Para">If you have a smartphone, there is no doubt that you can connect to the Internet easily. If you are running Android on an emulator, you can follow these steps to use the web browser:<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Click the Home <img src="A978-1-4842-0100-8_5_Figa_HTML.jpg" alt="A978-1-4842-0100-8_5_Figa_HTML.jpg"/> button on the keyboard, and the interface shown in Figure <span class="InternalRef"><a href="#Fig7">5-7</a></span> appears. Click the bottom-right button.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig7"><div class="MediaObject" id="MO7"><img src="A978-1-4842-0100-8_5_Fig7_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig7_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-7.</span><div class="SimplePara">Web browser startup interface</div></div></div></div>
                <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">The web browser window pops up. Click the address bar to bring up the keyboard on the emulated device, as shown in Figure <span class="InternalRef"><a href="#Fig8">5-8</a></span>. Input the address on the emulated keyboard, and then click Go.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig8"><div class="MediaObject" id="MO8"><img src="A978-1-4842-0100-8_5_Fig8_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig8_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-8.</span><div class="SimplePara">Web browser initial interface</div></div></div></div>
              </div></div></div><div id="Sec10" class="Section2 RenderAsSection2"><h3 class="Heading">Common Linux Commands and Operations</h3><div class="Para">Because Android is based on Linux, Android supports most Linux commands. The following sections present some common Linux commands that are supported on an Ubuntu system–based host machine and an Android system–based target machine. If you are using a Windows host system to develop applications for Android, you can use the Android Debug Bridge (adb) command provided by the Android SDK to connect to an Android device or emulator to run these commands.</div><div id="Sec11" class="Section3 RenderAsSection3"><h4 class="Heading">Check Users</h4><div class="Para">The following command checks the current logged-in user’s name:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ who am i</span>
              </div><div class="Para">or</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$echo $USER</span>
              </div><div class="Para">The following command displays username information:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ id</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">uid=1000(cereal) gid=1000(cereal)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">groups=4(adm),  20(dialout), 24(cdrom), 46(plugdev), 106(lpadmin), 121(admin), 122(sambashare), 1000(cereal)</span>
              </div><div class="Para">The output data shows the current user is cereal, the user ID is 1000, the user belongs to the cereal group, the group ID is 1000, and so on.</div></div><div id="Sec12" class="Section3 RenderAsSection3"><h4 class="Heading">Changing a Password</h4><div class="Para">The following command changes the current user’s password:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ passwd</span>
              </div><div class="Para">Here is the output:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Changing password for cereal.</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">(current) UNIX password:</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Enter New UNIX password:</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Retype New UNIX password:</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Password changed</span>
              </div><div class="Para">The <span class="EmphasisFontCategoryNonProportional">passwd</span> command can also be used to change the Rootpassword. For example, if you log in with the username cereal, you can use the following command to set the password of the root user:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ sudo passwd root</span>
              </div><div class="Para">In desktop Linux, a login window usually appears as the system starts, requiring you to enter the username and password. But Android doesn’t have this process. Android automatically logs in using the default username and password, which are invisible to the user; the system resources are used under the user’s identity.</div><div class="Para">If the password of the root user is uncertain after Android installation, you can set it as shown earlier using the <span class="EmphasisFontCategoryNonProportional">passwd root</span> command. s<span class="EmphasisFontCategoryNonProportional">udo</span> means the command is executed under the root identity, but execution of the command only requires confirmation by inputting the password of an ordinary user.</div></div><div id="Sec13" class="Section3 RenderAsSection3"><h4 class="Heading">Clearing the Screen</h4><div class="Para">You can use the <span class="EmphasisFontCategoryNonProportional">clear</span> command to clear the screen:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ clear</span>
              </div></div><div id="Sec14" class="Section3 RenderAsSection3"><h4 class="Heading">Superuser Root Operation</h4><div class="Para">Linux has a unique superuser <span class="EmphasisTypeItalic">root</span> (different from multiple superusers for Windows), which can access all files and directories and operate all applications in the system. Use the <span class="EmphasisFontCategoryNonProportional">su</span> command to enter the root user account:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ su</span>
              </div><div class="Para">Then, enter the root user’s password. After you enter the root user account, the command-line prompt changes from <span class="EmphasisFontCategoryNonProportional">$</span> to <span class="EmphasisFontCategoryNonProportional">#</span>. If the <span class="EmphasisFontCategoryNonProportional">su</span> command is not followed by any parameter, the default is to switch to the root user but not the root user’s home directory—that is, the root login environment is not changed after the switch. It is still the default login environment. When a parameter is entered, the root user as well as the environment of the root user are changed:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ su -</span>
              </div><div class="Para">Use the <span class="EmphasisFontCategoryNonProportional">exit</span> command to exit the root user account and return to the ordinary user identity:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">#exit</span>
              </div><div class="Para">After exiting, the command line prompt changes from <span class="EmphasisFontCategoryNonProportional">#</span> to <span class="EmphasisFontCategoryNonProportional">$</span>.</div><div class="Para">When you enter the root user account with the <span class="EmphasisFontCategoryNonProportional">su</span> command, subsequent operations are made under the root identity. To execute the current command under the root user identity and return to the ordinary user identity after the execution of the command, add the prefix <span class="EmphasisFontCategoryNonProportional">sudo</span> before the command, as shown earlier. As <span class="EmphasisFontCategoryNonProportional">sudo</span> is executed, the system asks you to enter the password of the current user (not the root user) to confirm the identity.</div><div class="Para">Theoretically, an ordinary user doesn’t necessarily have <span class="EmphasisFontCategoryNonProportional">sudo</span> permissions; the permissions are specified in the document <span class="EmphasisFontCategoryNonProportional">/etc/sudoers</span>. In desktop Linux, this should always be edited or set via commands such as <span class="EmphasisFontCategoryNonProportional">visudo</span>. But in Android, the default is that the installer has <span class="EmphasisFontCategoryNonProportional">sudo</span> permissions.</div></div><div id="Sec15" class="Section3 RenderAsSection3"><h4 class="Heading">Displaying Files and Directories</h4><div class="Para">You use the <span class="EmphasisFontCategoryNonProportional">ls</span> command to display directory and file information. The common format of <span class="EmphasisFontCategoryNonProportional">ls</span> is as follows:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">ls [-l] [&lt;directory name&gt;]</span>
              </div><div class="Para">Here, ls -l shows file or directory, size, modified date and time, file or folder name and owner of file and it’s permission. By default, the information of the current directory is displayed. For example (the current directory is <span class="EmphasisFontCategoryNonProportional">/home/cereal</span>):</div></div><div id="Sec16" class="Section3 RenderAsSection3"><h4 class="Heading">Changing and Displaying the (Current) Directory</h4><div class="Para">Use the <span class="EmphasisFontCategoryNonProportional">cd</span> command to change the current directory. For example, to change the current directory to <span class="EmphasisFontCategoryNonProportional">\embedded\pkgs</span>, input the following command (note that the root directory and directory are separated by <span class="EmphasisFontCategoryNonProportional">/</span> in Linux):</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cd /home/cereal/Document</span>
              </div><div class="Para">This path, beginning with <span class="EmphasisFontCategoryNonProportional">/</span> to indicate the directory, is called an <span class="EmphasisTypeItalic">absolute path</span>.</div><div class="Para">If the current directory is <span class="EmphasisFontCategoryNonProportional">/home/cereal</span>, the relative path can be used:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cd Documents</span>
              </div><div class="Para">If no parameters are entered, the <span class="EmphasisFontCategoryNonProportional">cd</span> command changes to the home directory of the current user:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cd</span>
              </div><div class="Para">
                <span class="EmphasisFontCategoryNonProportional">..</span> means the parent directory, accessed with the following command:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cd ..</span>
              </div><div class="Para">Use the <span class="EmphasisFontCategoryNonProportional">pwd</span> command to display the absolute path name of the current directory:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ pwd</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">/home/cereal</span>
              </div><div class="Para">There are also symbols to represent special directories in Linux. For example, <span class="EmphasisFontCategoryNonProportional">∼</span> indicates the user’s home directory, so you can use the following command to go to the home directory:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cd ∼</span>
              </div></div><div id="Sec17" class="Section3 RenderAsSection3"><h4 class="Heading">Searching for Files</h4><div class="Para">Use the <span class="EmphasisFontCategoryNonProportional">find</span> command to search for files. The format of the command is</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">find directory name -name file name</span>
              </div><div class="Para">You can search for specified files in the specified directory and all child directories. For example, input the following command to search for <span class="EmphasisFontCategoryNonProportional">ifconfig</span> files in the entire file system:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># find / -name ifconfig</span>
              </div><div class="Para">This command starts at the root directory and searches for <span class="EmphasisFontCategoryNonProportional">ifconfig</span> files under all subdirectories. The command accesses all directories, many of which are not accessible to an ordinary user, so it’s recommended that you execute this command under the root identity.</div></div><div id="Sec18" class="Section3 RenderAsSection3"><h4 class="Heading">File Operation</h4><div class="Para">Android has file-operation commands similar to those in Windows. The commands are listed in Table <span class="InternalRef"><a href="#Tab1">5-1</a></span>.<div id="Tab1" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-1.</span><div class="SimplePara">Android File-Operation Commands</div></div></div><table border="1"><colgroup><col/><col/><col/><col/></colgroup><thead><tr class="header"><th><div class="SimplePara">Command</div></th><th><div class="SimplePara">Function</div></th><th><div class="SimplePara">Format</div></th><th><div class="SimplePara">Format description</div></th></tr></thead><tbody><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">cat</span>
                          </div></td><td><div class="SimplePara">Show file contents</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">cat [-n] &lt;file list&gt;</span>
                          </div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">n</span>: Show the line number.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">ln</span>
                          </div></td><td><div class="SimplePara">Establish a hard/soft link</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">ln [-sf] &lt;original file&gt;&lt;destination file&gt;</span>
                          </div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">s</span>: Soft link; the default is hard link. <span class="EmphasisFontCategoryNonProportional">f</span>: The destination file, if it exists, will be replaced</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">mkdir</span>
                          </div></td><td><div class="SimplePara">Make a directory</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">mkdir &lt;directory name&gt;</span>
                          </div></td><td><div class="SimplePara">Create a directory with given name</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">rmdir</span>
                          </div></td><td><div class="SimplePara">Delete an empty directory</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">rmdir &lt;directory name&gt;</span>
                          </div></td><td><div class="SimplePara">The directory to be deleted must be empty. To delete a non-empty directory, use the following command:</div><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">rm –rf &lt;directory name&gt;</span>
                          </div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">cp</span>
                          </div></td><td><div class="SimplePara">Copy a file</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">cp [option] [&lt;source path&gt;]&lt;source file&gt; &lt;destination path&gt;[&lt;destination file&gt;]</span>
                          </div></td><td><div class="SimplePara">Copy SOURCE to DEST, or multiple SOURCE(s) to DIRECTORY</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">mv</span>
                          </div></td><td><div class="SimplePara">Move and rename a file</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">mv &lt;source file&gt; &lt;destination file&gt;</span>
                          </div></td><td><div class="SimplePara">Rename SOURCE to DEST, or move SOURCE(s) to DIRECTORY.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">rm</span>
                          </div></td><td><div class="SimplePara">Delete a file</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">rm [option] &lt;file name&gt;</span>
                          </div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">-i</span>: Ask whether to delete.</div><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">-f</span>: Don’t ask whether to delete.</div><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">-r</span>: Recursively delete the entire directory, like <span class="EmphasisFontCategoryNonProportional">rmdir</span>.</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">cmp</span>
                          </div></td><td><div class="SimplePara">Compare files</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">cmp &lt;file 1&gt; &lt;file 2&gt;</span>
                          </div></td><td><div class="SimplePara">Compares two files of any type and writes the results to the standard output.</div></td></tr></tbody></table></div>
              </div><div class="Para">For example, you can use the following command to display the contents of the <span class="EmphasisFontCategoryNonProportional">/etc/passwd</span> file:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cat /etc/passwd</span>
              </div><div class="Para">Use the following command to copy the <span class="EmphasisFontCategoryNonProportional">/etc/passwd</span> file to the current directory:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cp /etc/passwd .</span>
              </div><div class="Para">The <span class="EmphasisFontCategoryNonProportional">.</span> in this command indicates the current directory.</div></div><div id="Sec19" class="Section3 RenderAsSection3"><h4 class="Heading">Modifying File/Directory Permissions</h4><div class="Para">As mentioned, every file or directory has its own permission. Only users with the corresponding permission can perform operations. The permission must be modified if it doesn’t match. Table <span class="InternalRef"><a href="#Tab2">5-2</a></span> lists the Linux commands to modify file permissions.<div id="Tab2" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-2.</span><div class="SimplePara">File/Directory Permission-Modification Commands</div></div></div><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr class="header"><th><div class="SimplePara">Command</div></th><th><div class="SimplePara">Function</div></th><th><div class="SimplePara">Format</div></th></tr></thead><tbody><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">chmod</span>
                          </div></td><td><div class="SimplePara">Change the file/directory access permission (only the file owner and root user can do this)</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">chmod &lt;octal digit&gt;/&lt;+/- w/r/x&gt; &lt;file name&gt;</span>
                          </div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">chgrp</span>
                          </div></td><td><div class="SimplePara">Change the file group</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">chgrp &lt;group name&gt; &lt;file name&gt;</span>
                          </div></td></tr><tr class="noclass"><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">chown</span>
                          </div></td><td><div class="SimplePara">Change the file owner (only the root user can do this)</div></td><td><div class="SimplePara">
                            <span class="EmphasisFontCategoryNonProportional">chown &lt;new owner&gt; &lt;file name&gt;</span>
                          </div></td></tr></tbody></table></div>
              </div><div class="Para">For example, this command adds write permission for other users of the <span class="EmphasisFontCategoryNonProportional">report.doc</span> file:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># chmod o+w report.doc</span>
              </div><div class="Para">In Linux, the owner, users in the same group, and other users are represented by <span class="EmphasisFontCategoryNonProportional">u</span>, <span class="EmphasisFontCategoryNonProportional">g</span>, and <span class="EmphasisFontCategoryNonProportional">o</span>, respectively. The previous command adds write permission for other users (<span class="EmphasisFontCategoryNonProportional">o</span>).</div><div class="Para">The next example sets the group permission of <span class="EmphasisFontCategoryNonProportional">report.doc</span> tp <span class="EmphasisFontCategoryNonProportional">rw</span> (deletes <span class="EmphasisFontCategoryNonProportional">x</span> permission):</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># chmod g=rw report.doc</span>
              </div><div class="Para">Permissions can also be represented by digits: the values for read, write, and execute are 4, 2, and 1, respectively. The digit of the allocated permissions is the sum of the three. For example, the following command sets the user permission of <span class="EmphasisFontCategoryNonProportional">report.doc</span> to <span class="EmphasisFontCategoryNonProportional">rw</span> (4 + 2 + 0 = 6), sets the group permission to <span class="EmphasisFontCategoryNonProportional">r</span> (4 + 0 + 0 = 4), and gives no permission for other users (0 + 0 + 0 = 0):</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># chmod 640 report.doc</span>
              </div><div class="Para">This command allocates <span class="EmphasisFontCategoryNonProportional">report.doc</span> to the managers groups:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># chgrp managers report.doc</span>
              </div><div class="Para">To set the owner of <span class="EmphasisFontCategoryNonProportional">report.doc</span> to cereal and set its group to managers, you can use this command:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># chown cereal.managers report.doc</span>
              </div><div class="Para">This command changes the owner of all files under the current directory to cereal:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># chown cereal *</span>
              </div><div class="Para">Generally, only root users can use <span class="EmphasisFontCategoryNonProportional">chown</span> to change the owner of a file or directory.</div><div class="Para">In Windows, executability of a file is based on its suffix (such as <span class="EmphasisFontCategoryNonProportional">.exe</span>), but Linux doesn’t have any requirement for the name of an executable file and determines whether the file is executable by the file attributes In Android, to make a file executable or non-executable, you usually use the <span class="EmphasisFontCategoryNonProportional">chmod</span> command to add or delete permission to execute.</div><div class="Para">Many command functions, such as file operations and permission operations, are usually performed in a file explorer, text editor, or other graphical user interface application. But with command-line operations, you have a new way to perform commands quickly. Android doesn’t provide GUI applications such as a file explorer, so in most cases, you have to use the command line to complete those functions.</div></div><div id="Sec20" class="Section3 RenderAsSection3"><h4 class="Heading">Working with the Executable File Path</h4><div class="Para">If a path is not specified for an executable file, Linux can find the file with the path it saved in the system variable <span class="EmphasisFontCategoryNonProportional">PATH</span>, also called the <span class="EmphasisTypeItalic">default path</span> or <span class="EmphasisTypeItalic">path</span>. By default, Windows finds executable files in the current directory, but Linux only finds executable files in their default paths. So, you can use the following command to execute the executable file under the current directory:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">./directory name of executable file</span>
              </div><div class="Para">The following command shows the current path:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ echo $PATH</span>
              </div><div class="Para">You can also use the <span class="EmphasisFontCategoryNonProportional">which</span> command to find out whether the directory of an executable file has been included in the default path. For example, the following command finds out whether the gcc directory has been included in the default path:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$which gcc</span>
              </div><div class="Para">If it is present in the default path, this command outputs the directory of the executable file: for example, <span class="EmphasisFontCategoryNonProportional">/usr/bin/gcc</span>. Otherwise, the command outputs nothing.</div><div class="Para">To add a directory in the default path, you can use the following command:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ PATH=$PATH:/tools/bin</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ export PATH</span>
              </div><div class="Para">or</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ export PATH=$PATH:/tools/bin</span>
              </div><div class="Para">Add a <span class="EmphasisFontCategoryNonProportional">/tools/bin</span> path under <span class="EmphasisFontCategoryNonProportional">PATH</span> with <span class="EmphasisFontCategoryNonProportional">:</span> as the separator. Changing the <span class="EmphasisFontCategoryNonProportional">PATH</span> value or any environment variable must be exported through <span class="EmphasisFontCategoryNonProportional">export</span>; otherwise, the new <span class="EmphasisFontCategoryNonProportional">PATH</span> value will not take effect. This works only for the current user.</div><div class="Para">The export command can be added to shell files such as <span class="EmphasisFontCategoryNonProportional">.bash_profile</span>, <span class="EmphasisFontCategoryNonProportional">.profile</span>, and <span class="EmphasisFontCategoryNonProportional">.bashrc</span> so the command is executed before the command line starts each time.</div><div class="Para">A simple way of executing executable files without modifying the default path is to specify the absolute path before the executable file name.</div></div><div id="Sec21" class="Section3 RenderAsSection3"><h4 class="Heading">Piping and Screening</h4><div class="Para">The Linux pipe operation symbol <span class="EmphasisFontCategoryNonProportional">|</span> takes the output of one command as the input of the second one. Its function is the same as in Windows. For example, you can use the following command to show file content screen by screen:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cat /etc/passwd | more</span>
              </div><div class="Para">The <span class="EmphasisFontCategoryNonProportional">more</span> command shows files screen by screen, suspending execution after each page of output; you tell it to continue by pressing any key. In the previous command, <span class="EmphasisFontCategoryNonProportional">cat/etc/passwd</span> means to output the content of the <span class="EmphasisFontCategoryNonProportional">passwd</span> file, and the output is used as the input (using the pipe command) of the more command.</div><div class="Para">The <span class="EmphasisFontCategoryNonProportional">grep</span> command can search and display certain lines in a file. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ grep cereal /etc/passwd</span>
              </div><div class="Para">This command finds and displays lines containing “cereal” in the passwd file. The output is like this:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">cereal:x:1000:1000:cereal,,,:/home/cereal:/bin/bash</span>
              </div><div class="Para">The string to search can be enclosed with single quotes (<span class="EmphasisFontCategoryNonProportional">''</span>) or double quotes (<span class="EmphasisFontCategoryNonProportional">""</span>). The text in <span class="EmphasisFontCategoryNonProportional">''</span> is taken literally, whereas some special characters in <span class="EmphasisFontCategoryNonProportional">""</span> are given special meaning by the shell. The previous command can also be written in these forms:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ grep 'cereal' /etc/passwd</span>
              </div><div class="Para">and</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ grep "cereal" /etc/passwd</span>
              </div><div class="Para">In most cases, you use the pipe and <span class="EmphasisFontCategoryNonProportional">grep</span> commands to show screens of command output. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ ls -l /home/cereal/Document | grep qt</span>
              </div><div class="Para">This command shows the corresponding line of the file/directory containing the <span class="EmphasisFontCategoryNonProportional">qt</span> field in the <span class="EmphasisFontCategoryNonProportional">/home/cereal/Document</span> directory.</div><div class="Para">Another command you have used is</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ ps -e | grep ssh</span>
              </div><div class="Para">which lists all active processes containing the text “ssh” in the process name.</div></div><div id="Sec22" class="Section3 RenderAsSection3"><h4 class="Heading">Running Commands in the Background</h4><div class="Para">The execution of commands usually occupies the input/output of the console or the command-line window, which means you cannot input a command before the one that is executing ends. In contrast, if an application runs in the background, the console’s input/output is not occupied. To run a command in the background, simply add <span class="EmphasisFontCategoryNonProportional">&amp;</span> to the end of the command.</div></div><div id="Sec23" class="Section3 RenderAsSection3"><h4 class="Heading">Interrupting the Execution of Commands in the Foreground</h4><div class="Para">Press Ctrl+C to interrupt commands executing in the foreground. For example, the Linux <span class="EmphasisFontCategoryNonProportional">ping</span> command will endlessly ping a host, but you can end its execution as follows:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ ping 127.0.0.1</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.027 ms</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.028 ms</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.029 ms</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.030 ms</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.031 ms</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">^C</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">--- 127.0.0.1 ping statistics ---</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">5 packets transmitted, 5 received, 0% packet loss, time 4462ms rtt min/avg/max/mdev = 0.027/0.029/0.031/0.001 ms</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$</span>
              </div><div class="Para">After the fifth ping output item, the command was interrupted by pressing Ctrl+C, and the screen shows <span class="EmphasisFontCategoryNonProportional">^C</span>.</div></div><div id="Sec24" class="Section3 RenderAsSection3"><h4 class="Heading">Checking Hardware Information (Such as OS Version and CPU)</h4><div class="Para">The <span class="EmphasisFontCategoryNonProportional">uname</span> command displays system information, including information related to the computer and OS. The syntax of the command is</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">uname [-amnrsv][--help][--version]</span>
              </div><div class="Para">The parameters are as follows:
<div class="UnorderedList"><ul class="UnorderedListMarkNone"><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">-a</span> (all): Show all information</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">-m</span> (machine): Show computer type</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">-n</span> (nodename): Show the host name on the network</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">-r</span> (release): Show the issue number of the OS</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">-s</span> (sysname): Show the OS name</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">-v</span> (version): Show the OS version</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">--help</span>: Show help</div></li><li><div class="Para">
                      <span class="EmphasisFontCategoryNonProportional">--version</span>: Show version information</div></li></ul></div>
              </div><div class="Para">For example, the following command shows the type of OS on the machine:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ uname</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Linux</span>
              </div><div class="Para">The machine’s OS is Linux.</div><div class="Para">This command shows the issue number of the Linux kernel:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ uname -r</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">2.6.31-14-generic</span>
              </div><div class="Para">The issue number is 2.6.31-14.</div><div class="Para">Linux puts the processor information in the <span class="EmphasisFontCategoryNonProportional">cpuinfo</span> file in the <span class="EmphasisFontCategoryNonProportional">/proc</span> directory, allowing you to check this through the file. You can check the processor model with the following command:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cat /proc/cpuinfo | grep "model name"</span>
              </div><div class="Para">The output on an Asus Eee PC 1000HC netbook is</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">model name : Intel(R) Atom(TM) CPU N270 @ 1.60GHz</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">model name : Intel(R) Atom(TM) CPU N270 @ 1.60GHz</span>
              </div><div class="Para">The machine has an Intel Atom processor N270.</div><div class="Para">Now check the number of logical CPUs:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cat /proc/cpuinfo | grep "processor"</span>
              </div><div class="Para">The output on an Asus Eee PC 1000HC netbook is</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">processor : 0</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">processor : 1</span>
              </div><div class="Para">The processor has two logical CPUs.</div><div class="Para">The following command will displays the ID of each logical CPU:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$ cat /proc/cpuinfo | grep "core id"</span>
              </div><div class="Para">The output on an Asus Eee PC 1000HC netbook is</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">core id : 0</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">core id : 0</span>
              </div><div class="Para">The two logical CPUs have the same core ID, which means the hyperthreading of the processor is open—that is, the hyperthreading technology simulates two CPUs.</div></div></div></div><div id="Sec25" class="Section1 RenderAsSection1"><h2 class="Heading">Using the Android Development and Auxiliary Tools</h2><div class="Para">The following sections describe how to use emulator, help file, DDMS, (adb), and common Android and telnet commands.</div><div id="Sec26" class="Section2 RenderAsSection2"><h3 class="Heading">Using the Emulator</h3><div class="Para">Android Virtual Device (AVD), the Android emulator, is a good tool to run to debug mobile applications. Using AVD was briefly introduced earlier in the book, and this section provides a more in-depth discussion.</div><div class="Para">The emulator can be started using one of three methods.</div><div id="Sec27" class="Section3 RenderAsSection3"><h4 class="Heading">Method 1</h4><div class="Para">Start the emulator in Eclipse by following these steps:
<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Start Eclipse, select Run ➤ Run Configuration, as shown in Figure <span class="InternalRef"><a href="#Fig9">5-9</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig9"><div class="MediaObject" id="MO9"><img src="A978-1-4842-0100-8_5_Fig9_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig9_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-9.</span><div class="SimplePara">Emulator startup menu</div></div></div></div>
                <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">In the Debug Configuration box, select \Android Application\XXX in the left column, and then click Target ➤ “Automatically pick compatible device: Always uses preferred AVD . . . ”. Click the Start button on the right after checking the specified emulator.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">A Launch Options information box pops up (see Figure <span class="InternalRef"><a href="#Fig10">5-10</a></span>). Click Launch, and the emulator window opens (see Figure <span class="InternalRef"><a href="#Fig11">5-11</a></span>).</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig10"><div class="MediaObject" id="MO10"><img src="A978-1-4842-0100-8_5_Fig10_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig10_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-10.</span><div class="SimplePara">Launch Options information box</div></div></div></div>
                <div class="Figure" id="Fig11"><div class="MediaObject" id="MO11"><img src="A978-1-4842-0100-8_5_Fig11_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig11_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-11.</span><div class="SimplePara">Initial interface of the emulator when started separately</div></div></div></div>
              </div><div id="Sec28" class="Section4 RenderAsSection4"><h5 class="Heading">Method 2</h5><div class="Para">To start the emulator while running the application in Eclipse, on the menu bar, select Window ➤ Android Virtual Device Manager (see Figure <span class="InternalRef"><a href="#Fig12">5-12</a></span>).<div class="Figure" id="Fig12"><div class="MediaObject" id="MO12"><img src="A978-1-4842-0100-8_5_Fig12_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig12_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-12.</span><div class="SimplePara">The Android Virtual Device Manager</div></div></div></div>
                </div><div class="Para">Sometimes, when this method is used, the interface locks up. That is to say, after running the project (application) in Eclipse, the emulator sometimes shows an interface like the one in Figure <span class="InternalRef"><a href="#Fig13">5-13</a></span>. The application’s interface is not visible, indicating the emulator is locked up.<div class="Figure" id="Fig13"><div class="MediaObject" id="MO13"><img src="A978-1-4842-0100-8_5_Fig13_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig13_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-13.</span><div class="SimplePara">Interface when the emulator locks up at startup</div></div></div></div>
                </div><div class="Para">The solution is to click the menu button. If a window pops up, click Wait To Continue, and the application’s interface will appear, as shown in Figure <span class="InternalRef"><a href="#Fig14">5-14</a></span>.<div class="Figure" id="Fig14"><div class="MediaObject" id="MO14"><img src="A978-1-4842-0100-8_5_Fig14_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig14_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-14.</span><div class="SimplePara">Interface after unlock</div></div></div></div>
                </div></div><div id="Sec29" class="Section4 RenderAsSection4"><h5 class="Heading">Method 3</h5><div class="Para">AVD configurations can also be created and managed from command line using “android” tool as discussed here: <span class="ExternalRef"><a href="http://developer.android.com/guide/developing/devices/managing-avds-cmdline.html"><span class="RefSource">
                      <span class="EmphasisFontCategoryNonProportional">http://developer.android.com/guide/developing/devices/managing-avds-cmdline.html</span>
                    </span></a></span>
                </div><div class="Para">Example Creation of AVD from command line for Intel Architecture: avd create avd –n HC –t android-13 –s WXGA</div></div></div></div><div id="Sec30" class="Section2 RenderAsSection2"><h3 class="Heading">Accept “yes” for custom hw and choose x86 for hw.cpu.arch propertyUsing the Help File</h3><div class="Para">The Android development help file provides descriptions, explanations, and use examples for class and method prototypes involved in application development. You can read the help file either online, or offline as local files. The online reading function is more powerful because it supports auto-complete and search of class names. However, depending on the network speed, online reading may not be as responsive as offline reading. The two methods are explained next.</div><div class="Para">When you use Android SDK Manager (by selecting Window from the top menu in Eclipse) to download the Android packages, you see Documentation for Android SDK in each package. After you select and install it, all documents are copied into the <span class="EmphasisFontCategoryNonProportional">docs</span> folder, which is the subdirectory of the <span class="EmphasisFontCategoryNonProportional">android-sdk</span> installation directory in your system. The local help file is accessed through the <span class="EmphasisFontCategoryNonProportional">index.html</span> file in the docs. To use local help files, follow these steps:
<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Open the <span class="EmphasisFontCategoryNonProportional">index.html</span> file under the <span class="EmphasisFontCategoryNonProportional">docs</span> subdirectory of the <span class="EmphasisFontCategoryNonProportional">android-sdk</span> installation directory (in this case, <span class="EmphasisFontCategoryNonProportional">D:\Android\android-sdk\docs\index.html</span>). In the browser window, an information bar asking to run ActiveX may pop up. Click to run the control.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Click Reference below the top of the page, as shown in figure <span class="InternalRef"><a href="#Fig15">5-15</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
            </div><div class="Para">
              <div class="Figure" id="Fig15"><div class="MediaObject" id="MO15"><img src="A978-1-4842-0100-8_5_Fig15_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig15_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-15.</span><div class="SimplePara">Entry page for class references</div></div></div></div>
            </div><div class="Para">The help interface appears, as shown in Figure <span class="InternalRef"><a href="#Fig16">5-16</a></span>.<div class="Figure" id="Fig16"><div class="MediaObject" id="MO16"><img src="A978-1-4842-0100-8_5_Fig16_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig16_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-16.</span><div class="SimplePara">Class reference page</div></div></div></div>
            </div><div class="Para">Offline reading does not support auto-complete and searching for a class name. Figure <span class="InternalRef"><a href="#Fig17">5-17</a></span> shows an example of searching help for the <span class="EmphasisFontCategoryNonProportional">TextView</span> class. Input the class name <span class="EmphasisFontCategoryNonProportional">TextView</span> in the search bar in the upper-right corner, and the auto-complete list shows corresponding candidate names.<div class="Figure" id="Fig17"><div class="MediaObject" id="MO17"><img src="A978-1-4842-0100-8_5_Fig17_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig17_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-17.</span><div class="SimplePara">Input interface for auto-complete and search of pages in offline reading mode</div></div></div></div>
            </div><div class="Para">When selecting a candidate in the list (in this example, the first one, <span class="EmphasisFontCategoryNonProportional">android.widget.TextView</span>, is selected), a network connection error will appear if no connection is available. The help file will not show corresponding information.</div><div class="Para">The online reading function is more powerful, and the steps are as follows:<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Enter the URL <span class="ExternalRef"><a href="http://android.com/"><span class="RefSource">
                          <span class="EmphasisFontCategoryNonProportional">http://android.com</span>
                        </span></a></span> in the address bar of the web browser, and a screen like the one in Figure <span class="InternalRef"><a href="#Fig18">5-18</a></span> appears.</div></div><div class="ClearBoth"> </div></div></div>
            </div><div class="Para">
              <div class="Figure" id="Fig18"><div class="MediaObject" id="MO18"><img src="A978-1-4842-0100-8_5_Fig18_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig18_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-18.</span><div class="SimplePara">Initial page of online reading</div></div></div></div>
              <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Click Get The SDK on the bottom of the page, as shown in Figure <span class="InternalRef"><a href="#Fig19">5-19</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
            </div><div class="Para">
              <div class="Figure" id="Fig19"><div class="MediaObject" id="MO19"><img src="A978-1-4842-0100-8_5_Fig19_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig19_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-19.</span><div class="SimplePara">SDK entry page</div></div></div></div>
              <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">Click Reference on the new page, as shown in Figure <span class="InternalRef"><a href="#Fig20">5-20</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
            </div><div class="Para">
              <div class="Figure" id="Fig20"><div class="MediaObject" id="MO20"><img src="A978-1-4842-0100-8_5_Fig20_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig20_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-20.</span><div class="SimplePara">Entry page for references</div></div></div></div>
              <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><div class="Para">In the help information search box in the upper-right corner, enter a search string for the item (in this example, “Log”). A list box of candidates that contain the keyword drops down. Select the item you want from the list. The page shows the help file of corresponding item.</div></div><div class="ClearBoth"> </div></div></div>
            </div></div><div id="Sec31" class="Section2 RenderAsSection2"><h3 class="Heading">Using DDMS</h3><div class="Para">Dalvik Debug Monitor Service (DDMS) is an important and powerful supporting file for Android development. It can help debug software on the target machine, perform needed interactions between the host and target machines, and manage file systems, processes, and other contents on the target machine. DDMS is saved in the tools subdirectory of the Android SDK installation directory. It can be integrated into Eclipse and used as a plug-in, or its functions can be input on the command line. There are also two ways to start DDMS:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">Double-click <span class="EmphasisFontCategoryNonProportional">ddms.bat</span> or input <span class="EmphasisFontCategoryNonProportional">ddms</span> in the command-line window to run it.</div></li><li><div class="Para">Start DDMS during program debugging in Eclipse.</div></li></ul></div>
            </div><div class="Para">DDMS can perform its functions on both the emulator and connected devices. If the system detects that both of them are running, DDMS is directed to the emulator by default.</div><div class="Para">DDMS sets up the link between the IDE and the target machine, which listen for debugging information through their respective ports, while DDMS can monitor the connection of the test terminal in real time. When a new test terminal is connected, DDMS captures the ID of target machine and sets up the debugger through adb, thus enabling instructions to be sent to the test terminal.</div><div class="Para">The following instructions show how to use DDMS integrated in Eclipse.</div><div id="Sec32" class="Section3 RenderAsSection3"><h4 class="Heading">Showing the DDMS Button</h4><div class="Para">In Eclipse, the DDMS interface is on the same level as the development editing and debug interfaces. Click the DDMS button to enter the DDMS interface. By default, Eclipse doesn’t show the button, so you need to follow these steps:
<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Click Open Perspective in the toolbar.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Select DDMS in the pop-up box. The DDMS button is displayed in the upper-left corner of Eclipse, as shown in Figure <span class="InternalRef"><a href="#Fig21">5-21</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig21"><div class="MediaObject" id="MO21"><img src="A978-1-4842-0100-8_5_Fig21_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig21_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-21.</span><div class="SimplePara">Displaying the DDMS start button</div></div></div></div>
              </div></div><div id="Sec33" class="Section3 RenderAsSection3"><h4 class="Heading">Starting DDMS</h4><div class="Para">With the DDMS button now visible, you can perform the following steps to use the interface:
<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Start Eclipse, connect the phone or start the AVD emulator, and click DDMS in the upper-right corner of the window, as shown in Figure <span class="InternalRef"><a href="#Fig22">5-22</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig22"><div class="MediaObject" id="MO22"><img src="A978-1-4842-0100-8_5_Fig22_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig22_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-22.</span><div class="SimplePara">DDMS entry interface</div></div></div></div>
                <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">The DDMS interface appears, as shown in Figure <span class="InternalRef"><a href="#Fig23">5-23</a></span>. The left pane is the task manager of the target machine where you can view and end processes. The right pane includes tabs such as File Explorer (shown in Figure <span class="InternalRef"><a href="#Fig23">5-23</a></span>) and Net Statistics. The right pane also displays information for the target machine.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig23"><div class="MediaObject" id="MO23"><img src="A978-1-4842-0100-8_5_Fig23_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig23_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-23.</span><div class="SimplePara">DDMS initial interface</div></div></div></div>
              </div></div><div id="Sec34" class="Section3 RenderAsSection3"><h4 class="Heading">File Transfer between Host and Target Machines, and File Management</h4><div class="Para">DDMS can also perform file transfers (mutual copy) between the host and target machines (real device or emulator) and manage files on the target machine, as described next.</div><div id="Sec35" class="Section4 RenderAsSection4"><h5 class="Heading">Copying a File from the Host Machine to the Target Machine</h5><div class="Para">Follow these steps:
<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Click File Explorer in the right pane of DDMS interface. You see the buttons Pull A File From The Device, Push A File Onto The Device, and Delete The Selection In The Toolbar, as shown in Figure <span class="InternalRef"><a href="#Fig24">5-24</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
                </div><div class="Para">
                  <div class="Figure" id="Fig24"><div class="MediaObject" id="MO24"><img src="A978-1-4842-0100-8_5_Fig24_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig24_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-24.</span><div class="SimplePara">Initial DDMS interface for file transfers</div></div></div></div>
                  <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">In the right pane, you can see the entire file system of the target machine (the emulator is running in this example). Click to select the folder (the <span class="EmphasisFontCategoryNonProportional">data</span> folder in this example), click the Push A File Onto The Device button on the toolbar, and select a file (on the host machine) in the pop-up box, as shown in Figure <span class="InternalRef"><a href="#Fig25">5-25</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
                </div><div class="Para">
                  <div class="Figure" id="Fig25"><div class="MediaObject" id="MO25"><img src="A978-1-4842-0100-8_5_Fig25_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig25_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-25.</span><div class="SimplePara">Selecting a file to copy from the host machine to the target machine</div></div></div></div>
                </div><div class="Para">You can see the copied file (<span class="EmphasisFontCategoryNonProportional">cats.jpg</span> in this example) on the target machine, as shown in Figure <span class="InternalRef"><a href="#Fig26">5-26</a></span>.<div class="Figure" id="Fig26"><div class="MediaObject" id="MO26"><img src="A978-1-4842-0100-8_5_Fig26_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig26_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-26.</span><div class="SimplePara">File system of the target machine after copying a file</div></div></div></div>
                </div><div class="Para">Note that some folders on the target machine are not allowed to be uploaded due to the restriction on user authority. For example, if you select the root folder to upload files, an error will appear in the bottom message box, as shown in Figure <span class="InternalRef"><a href="#Fig27">5-27</a></span>.<div class="Figure" id="Fig27"><div class="MediaObject" id="MO27"><img src="A978-1-4842-0100-8_5_Fig27_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig27_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-27.</span><div class="SimplePara">Uploading a file under the root directory on the target machine</div></div></div></div>
                </div></div><div id="Sec36" class="Section4 RenderAsSection4"><h5 class="Heading">Copying a File from the Target Machine to the Host Machine</h5><div class="Para">Follow the same steps as in the previous section, but this time click the button Pull A File From The Device.</div></div><div id="Sec37" class="Section4 RenderAsSection4"><h5 class="Heading">Deleting a File</h5><div class="Para">Follow the same steps as in the section “Copying a File from the Host Machine to the Target Machine,” but click the Delete The Selection button.</div></div></div><div id="Sec38" class="Section3 RenderAsSection3"><h4 class="Heading">Process Management on the Target Machine</h4><div class="Para">In DDMS, you can view the processes running on the target machine and perform some management tasks, such as Stop Process. Following is an introduction.</div><div id="Sec39" class="Section4 RenderAsSection4"><h5 class="Heading">Starting Process Management for the Target Machine</h5><div class="Para">Start an application (the test project in this example whose source code file is <span class="EmphasisFontCategoryNonProportional">MyAppCode.java</span>) in Eclipse, as shown in Figure <span class="InternalRef"><a href="#Fig28">5-28</a></span>.<div class="Figure" id="Fig28"><div class="MediaObject" id="MO28"><img src="A978-1-4842-0100-8_5_Fig28_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig28_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-28.</span><div class="SimplePara">Applications that have started before process view</div></div></div></div>
                </div><div class="Para">The application’s interface running on the emulator is shown in Figure <span class="InternalRef"><a href="#Fig29">5-29</a></span>.<div class="Figure" id="Fig29"><div class="MediaObject" id="MO29"><img src="A978-1-4842-0100-8_5_Fig29_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig29_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-29.</span><div class="SimplePara">Application’s interface started before process view</div></div></div></div>
                </div><div class="Para">Start the DDMS interface by clicking the DDMS button at the upper-right corner in the Eclipse window of the host machine. You see the list of processes running on the target machine in the left pane. Find the process (<span class="EmphasisFontCategoryNonProportional">com.example.test</span> in this example) corresponding to the application in the list, as shown in Figure <span class="InternalRef"><a href="#Fig30">5-30</a></span>.<div class="Figure" id="Fig30"><div class="MediaObject" id="MO30"><img src="A978-1-4842-0100-8_5_Fig30_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig30_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-30.</span><div class="SimplePara">List of processes running on target machine</div></div></div></div>
                </div><div class="Para">As you can see in the figure, DDMS monitors the first process <span class="EmphasisFontCategoryNonProportional">com.android.phone</span> (process ID: 311) on port 8600. If there are more target machines or more application processes, the monitoring port will increment in ascending order: The second process monitoring port will be assigned as 8601, the third process monitoring port will be assigned as 8602, and so on. DDMS receives all terminal commands via port 8700, which is called the <span class="EmphasisTypeItalic">base port</span>.</div><div class="Para">In the upper-right corner is a row of very important buttons: Debug The Selected Process, Update Threads, Update Heap, Stop Process, and Screen Capture, which complete the corresponding operations. The following sections illustrate the use of these buttons, using Stop Process as the example.</div></div><div id="Sec40" class="Section4 RenderAsSection4"><h5 class="Heading">Stopping a Designated Process</h5><div class="Para">To stop an application, select the application process and then click the Stop Process button in the upper toolbar. You can see the application on the simulator has been terminated, as shown in Figure <span class="InternalRef"><a href="#Fig31">5-31</a></span>; the original process (<span class="EmphasisFontCategoryNonProportional">com.example.test</span>) is no longer shown in the DDMS process list in Eclipse.<div class="Figure" id="Fig31"><div class="MediaObject" id="MO31"><img src="A978-1-4842-0100-8_5_Fig31_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig31_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-31.</span><div class="SimplePara">DDMS interface on the host machine after process termination</div></div></div></div>
                </div></div></div><div id="Sec41" class="Section3 RenderAsSection3"><h4 class="Heading">Taking a Target Machine Screen Capture</h4><div class="Para">DDMS can also be used to capture a shot of the target machine’s screen. The screenshot can be saved as a file on the host machine. The steps are as follows:<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Start the target machine application, as shown in Figure <span class="InternalRef"><a href="#Fig32">5-32</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig32"><div class="MediaObject" id="MO32"><img src="A978-1-4842-0100-8_5_Fig32_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig32_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-32.</span><div class="SimplePara">Interface of the target machine before screen capture</div></div></div></div>
                <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">In the Eclipse environment of the host machine, click the Screen Capture button on the upper toolbar of the left pane, click the Save button in the pop-up box, and then click the Done button to close the dialog box, as shown in Figure <span class="InternalRef"><a href="#Fig33">5-33</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig33"><div class="MediaObject" id="MO33"><img src="A978-1-4842-0100-8_5_Fig33_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig33_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-33.</span><div class="SimplePara">Performing a screen capture on the target machine</div></div></div></div>
              </div><div class="Para">You can see the screenshot in the folder on the host machine, as shown in Figure <span class="InternalRef"><a href="#Fig34">5-34</a></span>.<div class="Figure" id="Fig34"><div class="MediaObject" id="MO34"><img src="A978-1-4842-0100-8_5_Fig34_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig34_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-34.</span><div class="SimplePara">Host machine screen capture result</div></div></div></div>
              </div></div><div id="Sec42" class="Section3 RenderAsSection3"><h4 class="Heading">Emulator Operation</h4><div class="Para">If the target machine is an emulator, you can see the emulator operation interface by clicking the Emulator Control tab in the right pane of DDMS, as shown in Figure <span class="InternalRef"><a href="#Fig35">5-35</a></span>.<div class="Figure" id="Fig35"><div class="MediaObject" id="MO35"><img src="A978-1-4842-0100-8_5_Fig35_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig35_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-35.</span><div class="SimplePara">Emulator control interface of DDMS</div></div></div></div>
              </div><div class="Para">Functions on this panel allow the test device to easily simulate some interactive functions of real phones, such as answering phone calls, simulating various network conditions according to options, and simulating the receiving of SMS and sending of virtual address coordinates to test GPS functions. Here are several function descriptions.
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">
                      <span class="EmphasisTypeItalic">Telephony status</span>: Simulate voice quality and signal connection mode by using options</div></li><li><div class="Para">
                      <span class="EmphasisTypeItalic">Telephony actions</span>: Simulate telephone answering and sending SMS to the test device</div></li><li><div class="Para">
                      <span class="EmphasisTypeItalic">Location control:</span>Simulate geographical coordinates, or simulate the dynamic change of route coordinates and display the default geographical indications in the following three ways:</div></li><li><div class="Para">
                      <span class="EmphasisTypeItalic">Manual</span>: Send two-dimensional latitude and longitude coordinates to the test device manually</div></li><li><div class="Para">
                      <span class="EmphasisTypeItalic">GPX</span>: Import a sequence of dynamically changing geographical coordinates via a GPX file to simulate the changing GPS value during the movement</div></li><li><div class="Para">
                      <span class="EmphasisTypeItalic">KML</span>: Import unique geographical indications via a KML file and show them on the test device dynamically according to the changing geographical coordinates</div></li></ul></div>
              </div><div class="Para">Following you see how to use these functions, using as an example sending SMS:<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Complete the Emulator Control\Telephony Actions box.</div></div><div class="ClearBoth"> </div></div><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">After clicking Send, open Messaging in the Android emulator. You see the SMS, as shown in Figure <span class="InternalRef"><a href="#Fig36">5-36</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig36"><div class="MediaObject" id="MO36"><img src="A978-1-4842-0100-8_5_Fig36_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig36_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-36.</span><div class="SimplePara">Title of SMS received by the emulator</div></div></div></div>
                <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">Click the new SMS to view its details, as shown in Figure <span class="InternalRef"><a href="#Fig37">5-37</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para">
                <div class="Figure" id="Fig37"><div class="MediaObject" id="MO37"><img src="A978-1-4842-0100-8_5_Fig37_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig37_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-37.</span><div class="SimplePara">Content of the SMS received by the emulator</div></div></div></div>
              </div></div></div><div id="Sec43" class="Section2 RenderAsSection2"><h3 class="Heading">Using adb at Command Prompt</h3><div class="Para">Android Debug Bridge (adb) is a general-purpose debugging tool provided by Android. With this tool, you can manage the status of the device or phone simulator and perform the following operations:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">Quickly update the code on the device or phone emulator, such as the application or Android system</div></li><li><div class="Para">Run shell commands on the device</div></li><li><div class="Para">Manage the reserved ports on the device or the phone emulator</div></li><li><div class="Para">Copy and paste files on the device or the phone emulator</div></li></ul></div>
            </div><div class="Para">adb’s functions are generally integrated into the Eclipse development environment. This section introduces other functions of adb, which generally are entered on the command line. Table <span class="InternalRef"><a href="#Tab2">5-4</a></span> lists the three frequently used commands. <div id="Tab4" class="Table"><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-4.</span><div class="SimplePara">Common Commands for Viewing Information on the Target Machine</div></div></div><table border="1"><colgroup><col/><col/></colgroup><thead><tr class="header"><th><div class="SimplePara">Command</div></th><th><div class="SimplePara">Description</div></th></tr></thead><tbody><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">adb devices</span>
                        </div></td><td><div class="SimplePara">View the information of the target machine</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">adb get-product</span>
                        </div></td><td><div class="SimplePara">View the product model of the target machine</div></td></tr><tr class="noclass"><td><div class="SimplePara">
                          <span class="EmphasisFontCategoryNonProportional">adb get-serialno</span>
                        </div></td><td><div class="SimplePara">View the serial number of the target machine</div></td></tr></tbody></table></div>
            </div><div class="Para">Using adb at Command Prompt is very helpful when the emulator isn’t started or a phone isn’t connected, the output result is empty after you type this command in the host machine’s Windows command line:</div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;adb devices</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">List of devices attached</span>
            </div><div class="Para">If the adb service has not been started, the above command will prompt information for start-up:</div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;adb devices</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">* daemon not running. starting it now on port 5037 *</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">* daemon started successfully *</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">List of devices attached</span>
            </div><div class="Para">After starting the emulator, run the command, and the emulator device information is displayed:</div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;adb devices</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">List of devices attached emulator-5554 device</span>
            </div><div class="Para">After starting the emulator and connecting to the phone, the command displays the following</div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;adb devices</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">List of devices attached emulator-5554 device Medfield04749AFB device</span>
            </div><div class="Para">where <span class="EmphasisFontCategoryNonProportional">emulator-5554</span> refers to the target machine corresponding to the emulator, and <span class="EmphasisFontCategoryNonProportional">Medfield04749AFB</span> refers to the target machine corresponding to the Lenovo phone.</div><div class="Para">When only the phone is connected, the <span class="EmphasisFontCategoryNonProportional">adb get-serialno</span> command only outputs the serial number of the effective target machine:</div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;adb get-serialno</span>
            </div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">Medfield04749AFB</span>
            </div><div id="Sec44" class="Section3 RenderAsSection3"><h4 class="Heading">Running Commands on the Target Machine</h4><div class="Para">You know that Android is based on Linux, and you have been introduced to the Linux commands supported by Android. However, most mobile devices running Android have no physical keyboard for command input. Even then, the Linux commands are useful. You can make use of some auxiliary tools, such as adb, to achieve remote input of Android commands. By using adb shell commands, you can enter commands on the host machine and make the target machine execute them. In other words, the keyboard and screen of the host machine simulate a terminal on the target machine. The target machine here can be either a real device or an emulator. Follow these steps:<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">Enter the <span class="EmphasisFontCategoryNonProportional">adb shell</span> command on the host machine’s Windows command line:</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt; adb shell</span>
              </div><div class="Para">
                <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Input the Android command of the target machine. For example:</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># pwd</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">pwd</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">/</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># ls -l</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">ls -l</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwxr-xr-x root     root     2012-07-09 13:24 acct</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwxrwx--- system   cache    2012-07-09 13:25 cache</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">dr-x------ root     root     2012-07-09 13:24 config</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">lrwxrwxrwx root     root     2012-07-09 13:24 d -&gt; /sys/kernel/debug</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwxrwx--x system   system   2012-07-09 19:44 data</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">-rw-r--r-- root     root     116 1970-01-01 00:00 default.prop</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwxr-xr-x root     root     2012-07-09 13:25 dev</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">lrwxrwxrwx root     root     2012-07-09 13:24 etc -&gt; /system/etc</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">-rwxr-x--- root     root     105204 1970-01-01 00:00 init</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">-rwxr-x--- root     root     2344 1970-01-01 00:00 init.goldfish.rc</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">-rwxr-x--- root     root     17048 1970-01-01 00:00 init.rc</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">-rwxr-x--- root     root     1637 1970-01-01 00:00 init.trace.rc</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">-rwxr-x--- root     root     3915 1970-01-01 00:00 init.usb.rc</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwxrwxr-x root     system   2012-07-09 13:24 mnt</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">dr-xr-xr-x root     root     1970-01-01 00:00 proc</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwx------ root     root     2011-12-08 23:06 root</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwxr-x--- root     root     1970-01-01 00:00 sbin</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">lrwxrwxrwx root     root     2012-07-09 13:24 sdcard -&gt; /mnt/sdcard</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwxr-xr-x root     root     1970-01-01 00:00 sys</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">drwxr-xr-x root     root     2012-06-23 01:56 system</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">-rw-r--r—root       root     272 1970-01-01 00:00 ueventd.goldfish.rc</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">-rw-r--r-- root     root     3879 1970-01-01 00:00 ueventd.rc</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">lrwxrwxrwx root     root     2012-07-09 13:24 vendor -&gt; /system/vendor</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># cd</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">cd</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">cd: HOME not set</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># echo $PATH</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">echo $PATH</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">/sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># ifconfig eth0</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">ifconfig eth0</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">eth0: ip 10.0.2.15 mask 255.255.255.0 flags [up broadcast running multicast]</span>
              </div><div class="Para">
                <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><div class="Para">Use the <span class="EmphasisFontCategoryNonProportional">exit</span> command to stop execution on the target machine and return to the command-line interface on the host machine:</div></div><div class="ClearBoth"> </div></div></div>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional"># exit</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">exit</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;</span>
              </div><div class="FormalPara FormalParaRenderingStyle1 ParaTypeImportant"><div class="Heading">Note</div><div class="Para">The Linux shell in Android has been simplified a lot. As a result, many common Linux commands are not supported.</div></div><div id="Sec45" class="Section4 RenderAsSection4"><h5 class="Heading">Installing Application Packages on the Target Machine</h5><div class="Para">You can use the <span class="EmphasisFontCategoryNonProportional">adb install</span> command to install or uninstall application packages on the target machine. The format of the software installation command is</div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">adb install XXX.apk</span>
                </div><div class="Para">where <span class="EmphasisFontCategoryNonProportional">XXX.apk</span> is a file in the current directory of the host machine. For example, to install file browser software, follow these steps:<div class="OrderedList"><div class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><div class="Para">The original application on the target machine (emulator) is shown in Figure <span class="InternalRef"><a href="#Fig38">5-38</a></span>.</div></div><div class="ClearBoth"> </div></div></div>
                </div><div class="Para">
                  <div class="Figure" id="Fig38"><div class="MediaObject" id="MO38"><img src="A978-1-4842-0100-8_5_Fig38_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig38_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-38.</span><div class="SimplePara">Application executing on the virtual machine before software installation</div></div></div></div>
                  <div class="OrderedList"><div class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><div class="Para">Run the following commands at the command line on the host machine:</div></div><div class="ClearBoth"> </div></div></div>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">E:\temp\temp&gt;adb install file_browser.apk</span>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">92 KB/s (2617375 bytes in 27.546s)</span>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">pkg: /data/local/tmp/file_browser.apk</span>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">Success</span>
                </div><div class="Para">The installation file, <span class="EmphasisFontCategoryNonProportional">file_browser.apk</span>, is located under the current directory (<span class="EmphasisFontCategoryNonProportional">E:\temp\temp</span> in this example) of the host machine.</div><div class="Para">You can see that the target machine has the new application ES File Explorer installed, as shown in Figure <span class="InternalRef"><a href="#Fig39">5-39</a></span>. <div class="Figure" id="Fig39"><div class="MediaObject" id="MO39"><img src="A978-1-4842-0100-8_5_Fig39_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig39_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-39.</span><div class="SimplePara">Virtual machine application after software installation</div></div></div></div>
                </div><div class="Para">You can start the new app by clicking its icon, as shown in Figure <span class="InternalRef"><a href="#Fig40">5-40</a></span>.<div class="Figure" id="Fig40"><div class="MediaObject" id="MO40"><img src="A978-1-4842-0100-8_5_Fig40_HTML.jpg" alt="A978-1-4842-0100-8_5_Fig40_HTML.jpg"/></div><div class="Caption" xml:lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-40.</span><div class="SimplePara">Operation interface of the newly installed software</div></div></div></div>
                </div><div class="Para">The software can be installed on a real phone in the same way.</div></div><div id="Sec46" class="Section4 RenderAsSection4"><h5 class="Heading">Uninstalling Software on the Target Machine</h5><div class="Para">You can use the <span class="EmphasisFontCategoryNonProportional">adb shell</span> command <span class="EmphasisFontCategoryNonProportional">rm</span> to uninstall software on the target machine. For example:</div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">E:\temp\temp&gt;adb shell rm /data/app/*.apk</span>
                </div><div class="Para">The software (<span class="EmphasisFontCategoryNonProportional">*.apk</span>) is installed via adb and located in the <span class="EmphasisFontCategoryNonProportional">/data/app/</span> directory; therefore, it is not necessary to designate a path during installation. It is only required that you execute the <span class="EmphasisFontCategoryNonProportional">rm</span> command during uninstallation. However, the <span class="EmphasisFontCategoryNonProportional">rm</span> command is very powerful and can cause irreversible loss of data if not used properly. The safe and recommended method to uninstall an app is</div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">adb uninstall packagename</span>
                </div></div><div id="Sec47" class="Section4 RenderAsSection4"><h5 class="Heading">Transferring Files between the Host and Target Machines</h5><div class="Para">The command <span class="EmphasisFontCategoryNonProportional">adb push</span>can be used to copy files from the host machine to the target machine, and the command <span class="EmphasisFontCategoryNonProportional">adb pull</span> can be used to copy files from the target machine to the host machine.</div></div><div id="Sec48" class="Section4 RenderAsSection4"><h5 class="Heading">Enabling and Disabling the adb Service</h5><div class="Para">You can disable the adb service using the <span class="EmphasisFontCategoryNonProportional">adb kill-server</span> command and enable it with the <span class="EmphasisFontCategoryNonProportional">adb start-server</span> command.</div></div><div id="Sec49" class="Section4 RenderAsSection4"><h5 class="Heading">Other Functions</h5><div class="Para">The following is a list of some other useful adb functions:<div class="UnorderedList"><ul class="UnorderedListMarkNone"><li><div class="Para">Port forwarding (forwards the default port TCP5555 to port 1234)</div></li></ul></div>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">adb forward adb forward tcp:5555 tcp:1234</span>
                </div><div class="Para">
                  <div class="UnorderedList"><ul class="UnorderedListMarkNone"><li><div class="Para">Access the database <span class="EmphasisFontCategoryNonProportional">sqlite3</span>
                      </div></li></ul></div>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">adb shell sqlite3</span>
                </div><div class="Para">
                  <div class="UnorderedList"><ul class="UnorderedListMarkNone"><li><div class="Para">Wait for running devices</div></li></ul></div>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">adb wait-for-devices</span>
                </div><div class="Para">
                  <div class="UnorderedList"><ul class="UnorderedListMarkNone"><li><div class="Para">View the bug report</div></li></ul></div>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">adb bugreport</span>
                </div><div class="Para">
                  <div class="UnorderedList"><ul class="UnorderedListMarkNone"><li><div class="Para">Record the radio communication log</div></li></ul></div>
                </div><div class="Para ParaTypeProgramcode">
                  <span class="EmphasisFontCategoryNonProportional">adb shell logcat -b ratio</span>
                </div><div class="Para">Generally speaking, there are many radio communication logs, and it is unnecessary to get the record during operation, but you can get the record by command.</div></div></div></div><div id="Sec50" class="Section2 RenderAsSection2"><h3 class="Heading">Using Android Commands</h3><div class="Para">Android commands are provided by the batch file <span class="EmphasisFontCategoryNonProportional">android.bat</span>, located under the <span class="EmphasisFontCategoryNonProportional">tools</span> subdirectory in the <span class="EmphasisFontCategoryNonProportional">android-sdk</span> installation directory. These commands can manage the emulator and the APIs, mostly through Eclipse. Of course, management can also be achieved by entering Android commands on the command line. The following sections introduce these commands.</div><div id="Sec51" class="Section3 RenderAsSection3"><h4 class="Heading">Viewing the Installed Emulator</h4><div class="Para">You can view the installed emulator by running the <span class="EmphasisFontCategoryNonProportional">android list avd</span> command. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;android list avd</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Available Android Virtual Devices:</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Name: AtomAVD</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Path: C:\Documents and Settings\hlgu\.android\avd\AtomAVD.avd</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Target machine: Android 4.0.3 (API level 15)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisTypeUnderline"><span class="EmphasisFontCategoryNonProportional">ABI: x86</span></span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Skin: WVGA800</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Sdcard: 1024M</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">---------</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Name: myAndroid</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Path: C:\Documents and Settings\hlgu\.android\avd\myAndroid.avd</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Target machine: Android 4.1 (API level 16)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisTypeUnderline"><span class="EmphasisFontCategoryNonProportional">ABI: armeabi-v7a</span></span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Skin: WVGA800</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Sdcard: 1024M</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Snapshot: true</span>
              </div><div class="Para">The output shows that the system has two emulators installed: AtomAVD emulator (name line) with CPU of x86 (ABI line) and myAndroid emulator with CPU of armeabi-v7a.</div></div><div id="Sec52" class="Section3 RenderAsSection3"><h4 class="Heading">Viewing the Version Information of the Currently Supported APIs</h4><div class="Para">You can view the version information of the currently supported APIs by running the <span class="EmphasisFontCategoryNonProportional">android list target</span> command. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;android list target</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Available Android targets:</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">----------</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">id: 1 or "android-15"</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Name: Android 4.0.3</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Type: Platform</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">API level: 15</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Revision: 3</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">ABIs : x86</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">----------</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">id: 2 or "Google Inc.:Google APIs:15"</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Name: Google APIs</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Type: Add-On</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Vendor: Google Inc.</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Revision: 2</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Description: Android + Google APIs</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Based on Android 4.0.3 (API level 15)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Libraries:</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">* com.google.android.media.effects (effects.jar)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Collection of video effects</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">* com.android.future.usb.accessory (usb.jar)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">API for USB Accessories</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">* com.google.android.maps (maps.jar)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">API for Google Maps</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Skins: WVGA854, WQVGA400, WSVGA, WXGA720, HVGA, WQVGA432, WVGA800 (default), QVGA, WXGA800</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">ABIs : armeabi-v7a</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">----------</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">id: 3 or "HTC:HTC OpenSense SDK:15"</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Name: HTC OpenSense SDK</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Type: Add-On</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Vendor: HTC</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Revision: 2</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Based on Android 4.0.3 (API level 15)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Libraries:</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">* htc-extension (HTCSDK.jar)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">HTC generic extension library</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Skins: WVGA854, WQVGA400, WSVGA, WXGA720, HVGA, WQVGA432, WVGA800 (default), QVGA, WXGA800</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">ABIs : no ABIs.</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">----------</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">id: 4 or "android-16"</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Name: Android 4.1</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Type: Platform</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">API level: 16</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Revision: 1</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">ABIs : armeabi-v7a</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">----------</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">id: 5 or "Google Inc.:Google APIs:16"</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Name: Google APIs</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Type: Add-On</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Vendor: Google Inc.</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Revision: 2</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Description: Android + Google APIs</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Based on Android 4.1 (API level 16)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Libraries:</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">* com.google.android.media.effects (effects.jar)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Collection of video effects</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">* com.android.future.usb.accessory (usb.jar)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">API for USB Accessories</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">* com.google.android.maps (maps.jar)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">API for Google Maps</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">Skins: WVGA854, WQVGA400, WSVGA, WXGA800-7in, WXGA720, HVGA, WQVGA432, WVGA 800 (default), QVGA, WXGA800</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">ABIs : armeabi-v7a</span>
              </div><div class="Para">The output shows that the current development environment has several APIs installed including android-15, Google Inc.: Google APIs:15, HTC:HTC OpenSense SDK:15, android-16, and Google Inc.:Google APIs:16.</div></div><div id="Sec53" class="Section3 RenderAsSection3"><h4 class="Heading">Creating an Emulator</h4><div class="Para">The Android <span class="EmphasisFontCategoryNonProportional">create avd –n</span> command can be used to create an emulator, but you generally create it in Eclipse.</div></div><div id="Sec54" class="Section3 RenderAsSection3"><h4 class="Heading">Starting the Emulator</h4><div class="Para">Most of the time, you start the emulator in Eclipse using the <span class="EmphasisFontCategoryNonProportional">emulator</span> command. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">C:\Documents and Settings&gt;emulator -avd myAndroid</span>
              </div><div class="Para">
                <span class="EmphasisFontCategoryNonProportional">myAndroid</span> is the name of emulator listed by the <span class="EmphasisFontCategoryNonProportional">android list avd</span> command. This command will start the <span class="EmphasisFontCategoryNonProportional">myAndroid</span> emulator.</div></div></div><div id="Sec55" class="Section2 RenderAsSection2"><h3 class="Heading">Using Telnet for Emulator Commands</h3><div class="Para">You can use Telnet to enter commands on the target machine (emulator) from the host machine and make the target machine (emulator) execute the commands. In this way, the host machine (Windows, Linux, and Mac systems) becomes a console terminal of the emulator. The format of Telnet commands is</div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">telnet localhost &lt;console-port&gt;</span>
            </div><div class="Para">For example:</div><div class="Para ParaTypeProgramcode">
              <span class="EmphasisFontCategoryNonProportional">telnet localhost 5554</span>
            </div><div class="Para">In general, the serial number of the Android emulator is 5554. When running Telnet, you need to change the console-port to the serial number of the emulator you intend to connect to: for example, 5554, 5556, or 5558. After connecting to the emulator using telnet localhost 5554, enter the <span class="EmphasisFontCategoryNonProportional">help</span> command.</div><div class="Para">After logging in to the Android emulator terminal mode, the available commands include <span class="EmphasisFontCategoryNonProportional">event</span>, <span class="EmphasisFontCategoryNonProportional">geo</span>, <span class="EmphasisFontCategoryNonProportional">gsm</span>, <span class="EmphasisFontCategoryNonProportional">kill</span>, <span class="EmphasisFontCategoryNonProportional">network</span>, <span class="EmphasisFontCategoryNonProportional">power</span>, <span class="EmphasisFontCategoryNonProportional">redir</span>, <span class="EmphasisFontCategoryNonProportional">sms</span>, <span class="EmphasisFontCategoryNonProportional">vm</span>, and <span class="EmphasisFontCategoryNonProportional">window</span>; they are used to control the Android emulator. Many of these commands can be replaced by the DDMS emulator graphical operation introduced previously. The following sections introduce these commands.</div><div id="Sec56" class="Section3 RenderAsSection3"><h4 class="Heading">event Command</h4><div class="Para">The format is</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">event text testmessage</span>
              </div><div class="Para">This command can send four events—<span class="EmphasisFontCategoryNonProportional">send</span>, <span class="EmphasisFontCategoryNonProportional">types</span>, <span class="EmphasisFontCategoryNonProportional">codes</span>, and <span class="EmphasisFontCategoryNonProportional">text</span>—to the emulator. For example, after <span class="EmphasisFontCategoryNonProportional">event text testmessage</span> sends a literal string “test message” to the emulator, you immediately see this message on the screen of the Android emulator.</div></div><div id="Sec57" class="Section3 RenderAsSection3"><h4 class="Heading">geo Command</h4><div class="Para">The format is</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">geo &lt;fix|nmea&gt;</span>
              </div><div class="Para">For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">geo fix 121.5 25.4 10</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">geo nmea $GPRMC,071236,A,3751.65,S,14527.36,E,000.0,073.0,130309,011.3,E*62</span>
              </div><div class="Para">The <span class="EmphasisFontCategoryNonProportional">geo</span> command can send the GPS location to the emulator. <span class="EmphasisFontCategoryNonProportional">geo fix</span> sends a set of fixed GPS locations represented by longitude, latitude, and height, which can be obtained from the map on some web sites, such as longitude 121.5, latitude 25.4, and height 10 meters. When the Android device is connected to an external GPS device via USB, you can use the <span class="EmphasisFontCategoryNonProportional">geo nmea</span> command to send locations to the external GPS device.</div><div class="Para">The National Electrical Manufacturers Association (NEMA) developed the NEMA 0183 protocol for GPS devices. The format of <span class="EmphasisFontCategoryNonProportional">gps nema</span> command is complicated and composed of 12 fields, but thanks to this complexity, the command provides more accurate positioning than the <span class="EmphasisFontCategoryNonProportional">geo fix</span> command. The format of the <span class="EmphasisFontCategoryNonProportional">gps nema</span> command is as follows:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$GPRMC,&lt;1&gt;,&lt;2&gt;,&lt;3&gt;,&lt;4&gt;,&lt;5&gt;,&lt;6&gt;,&lt;7&gt;,&lt;8&gt;,&lt;9&gt;,&lt;10&gt;,&lt;11&gt;,&lt;12&gt;*hh</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$GPRMC,hhmmss.ss,A,IIII.II,a,yyyyy.yy,a,x.x,x.x,ddmmyy,x.x,a*hh</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">$GPRMC (Recommended minimum specific GPS/Transit data)</span>
              </div><div class="Para">The fields are as follows:
<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para">UTC, in the format of hhmmss (hour, minute, and second). For example: <span class="EmphasisFontCategoryNonProportional">071236</span>.</div></li><li><div class="Para">Positioning state: A = Available positioning, V = Void positioning.</div></li><li><div class="Para">Latitude, in the format of ddmm.mm (d refers to degrees, m refers to minutes). For example: 3751.65 = 37 degrees 51.65 minutes.</div></li><li><div class="Para">Latitude hemisphere N (northern hemisphere) or S (southern hemisphere).</div></li><li><div class="Para">Longitude, in the format of dddmm.mm. For example: 14527.36 = 145 degrees 27.36 minutes.</div></li><li><div class="Para">Longitude hemisphere E (east longitude) or W (west longitude).</div></li><li><div class="Para">Ground speed (000.0 to 999.9 knots; 0 will also be transmitted). For example: stationary 000.0.</div></li><li><div class="Para">Ground direction (000.0-359.9 degrees; 0 will also be transmitted). For example: 073.0.</div></li><li><div class="Para">UTC date, in the format of ddmmyy (date, month, and year). For example: 130309.</div></li><li><div class="Para">Magnetic declination (000.0-180.0 degrees; 0 will also be transmitted). For example: 011.3.</div></li><li><div class="Para">Direction of magnetic declination: E (East) or W (West).</div></li><li><div class="Para">Mode indicator (in NEMA 0183 protocol, A = autonomous positioning, D = difference, E = estimate, N = null information). *hh is the checksum. For example: *62 gsm call 5556688.</div></li></ul></div>
              </div></div><div id="Sec58" class="Section3 RenderAsSection3"><h4 class="Heading">gsm Command</h4><div class="Para">The <span class="EmphasisFontCategoryNonProportional">gsm</span> command can simulate the calling state of a GSM phone and has parameters including <span class="EmphasisFontCategoryNonProportional">call</span>, <span class="EmphasisFontCategoryNonProportional">busy</span>, <span class="EmphasisFontCategoryNonProportional">hold</span>, <span class="EmphasisFontCategoryNonProportional">accept</span>, <span class="EmphasisFontCategoryNonProportional">cancel</span>, <span class="EmphasisFontCategoryNonProportional">data</span>, <span class="EmphasisFontCategoryNonProportional">voice</span>, and <span class="EmphasisFontCategoryNonProportional">status</span>. Simply by adding any phone number behind a parameter, you can simulate calling a GSM phone in the Android emulator.</div></div><div id="Sec59" class="Section3 RenderAsSection3"><h4 class="Heading">kill Command</h4><div class="Para">The <span class="EmphasisFontCategoryNonProportional">kill</span> command immediately closes the emulator window in the terminal mode of the Android emulator.</div></div><div id="Sec60" class="Section3 RenderAsSection3"><h4 class="Heading">network Command</h4><div class="Para">The <span class="EmphasisFontCategoryNonProportional">network</span> command is a network-management and -operation command. It has various parameters to complete different network functions. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">network status</span>
              </div><div class="Para">This command is used to view the network-transmission status of the Android emulator.</div><div class="Para">Here are some additional examples:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">network speed full</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">network speed umts</span>
              </div><div class="Para">Network speed can change the phone’s network-transmission modes, including <span class="EmphasisFontCategoryNonProportional">gsm</span> (GSM/CSD), <span class="EmphasisFontCategoryNonProportional">gprs</span> (GPRS), <span class="EmphasisFontCategoryNonProportional">edge</span> (EDGE/EGPRS), <span class="EmphasisFontCategoryNonProportional">umts</span> (UMTS/3G), <span class="EmphasisFontCategoryNonProportional">hsdpa</span> (HSDPA/3.5G), and full-speed transmission, which are selected randomly. This is the default network setting of the Android system.</div></div><div id="Sec61" class="Section3 RenderAsSection3"><h4 class="Heading">power Command</h4><div class="Para">This command displays whether the current power status of the phone is AC power connected, as well as the battery’s remaining power:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">power display</span>
              </div></div><div id="Sec62" class="Section3 RenderAsSection3"><h4 class="Heading">redir Command</h4><div class="Para">Similar to the <span class="EmphasisFontCategoryNonProportional">adb forward</span> command, the <span class="EmphasisFontCategoryNonProportional">redir</span> command can display and manage the emulator’s TCP or UDP communication port. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">redir add tcp: 5000:6000</span>
              </div><div class="Para">You can use this command to direct the messages received by TCP port 5000 of the hosting system to TCP port 6000 of the Android emulator.</div><div class="Para">This command lists the TCP or UDP communication port that has been directed:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">redir list</span>
              </div><div class="Para">The <span class="EmphasisFontCategoryNonProportional">redir del</span> command can delete the communication port that has been directed:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">redir del tcp: 5000</span>
              </div></div><div id="Sec63" class="Section3 RenderAsSection3"><h4 class="Heading">sms Command</h4><div class="Para">You can use the <span class="EmphasisFontCategoryNonProportional">sms</span> command to send SMS:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">sms send &lt;phone number&gt; &lt;SMS&gt;</span>
              </div><div class="Para">For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">sms send 5556688 this is a test sms</span>
              </div><div class="Para">This sends the SMS text “this is a test” to the phone number 5556688, and the Android emulator will immediately receive it.</div></div><div id="Sec64" class="Section3 RenderAsSection3"><h4 class="Heading">Window scale? Command</h4><div class="Para">The <span class="EmphasisFontCategoryNonProportional">window scale</span> command can change the emulator’s window size. For example:</div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">window scale factor (factor: 0.1-3.0)</span>
              </div><div class="Para ParaTypeProgramcode">
                <span class="EmphasisFontCategoryNonProportional">window scale 1.2</span>
              </div><div class="Para">The first command sets the screen scale factor to between 0.1 and 3.0. The second command scales the window size of the Android emulator 1.2 times.</div></div></div><div id="Sec65" class="Section2 RenderAsSection2"><h3 class="Heading">Summary</h3><div class="Para">For application developers, it is critical that the applications you build can be run on all the devices made by different OEMs and on different platforms. However, OEMs have been tailoring and customizing the Android OS of their devices to meet the unique needs of the set of the software and hardware they use. As a result, understanding Android OS customization is helpful for you to better design applications. The next chapter discusses customization of the Android OS, including the installation and reflash of the Android image, which is the fastest way for you to update your test platform to the latest Android version directly from the device manufacturer.</div></div></div></div></body></html>
